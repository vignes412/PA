import{j as e,c as De,i as Ee,h as Le,g as Ge,r as t,B as r,v as Ae}from"./pwa-components-VU4Qx4K-.js";import{e as Me,L as k,I as x,P,f as H,g as Q,h as X,i as J,j as K,k as Y,X as Ie}from"./DashboardLayout-C65j5e1O.js";import{S as $e,a as Pe,b as We,c as Re,d as Z}from"./select-Dr4rU8JC.js";import{S as W}from"./scroll-area-BBZUOvsN.js";import{T as Fe,a as Oe,b as ee,c as se}from"./tabs-DYR4dmqI.js";import{c as Be,C}from"./index-D8bk7kCo.js";import{a as ae,b as te,c as g,d as m,e as le,f as d,g as re}from"./table-B2sesdZa.js";import{S as Ue}from"./save-B69DCWX6.js";import{S as ze}from"./square-pen-DSwcUwSJ.js";import{a as Ve}from"./index-BU7zvzS3.js";import"./db-utils-DgoSxAK8.js";import"./react-vendor-Csw2ODfV.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_e=Be("search",qe);function ce({className:D,shape:p="rect",pulse:E=!0,variant:f="default",...v}){return e.jsx("div",{className:De("animate-pulse",{"rounded-md":p==="rect","rounded-full":p==="circle","rounded-lg":p==="rounded","bg-muted/70":f==="default","bg-muted/30":f==="subtle"},D),...v})}const rs=()=>{const{exercises:D,exerciseGroups:p,fetchExercises:E,isLoading:f}=Ee(),{templates:v,fetchTemplates:R,saveTemplate:ie,deleteTemplate:ne,startWorkout:oe,isLoading:de}=Le(),me=Ge(),[ue,N]=t.useState("build"),[L,he]=t.useState(null),[y,xe]=t.useState(""),[j,b]=t.useState(""),[F,T]=t.useState(""),[o,u]=t.useState([]),[pe,S]=t.useState(!1),[je,w]=t.useState(!1),[h,O]=t.useState(null),[B,U]=t.useState(!1),[z,V]=t.useState(!1),[ge,G]=t.useState(!1),[fe,ve]=t.useState(""),[Ne,ye]=t.useState("success"),[c,A]=t.useState(!1),[l,M]=t.useState(null);t.useEffect(()=>{E(),R()},[E,R]),t.useEffect(()=>{l&&c&&(b(l.name),T(l.description),u(l.exercises),N("build"))},[l,c]);const q=D.filter(s=>{const a=!L||s.muscleGroup===L,n=!y||s.exercise.toLowerCase().includes(y.toLowerCase())||s.muscleGroup.toLowerCase().includes(y.toLowerCase());return a&&n}),be=s=>{const a={name:s.exercise,muscleGroup:s.muscleGroup,sets:3,reps:10,weight:0,rest:60,notes:"",difficultyLevel:s.difficultyLevel,equipmentRequired:s.equipmentRequired,targetIntensity:String(s.targetIntensity),primaryMuscleGroup:s.primaryMuscleGroup,secondaryMuscleGroup:String(s.secondaryMuscleGroup||""),exerciseDuration:s.exerciseDuration,recoveryTime:s.recoveryTime,exerciseType:s.exerciseType,caloriesBurned:String(s.caloriesBurned),exerciseProgression:s.exerciseProgression,injuryRiskLevel:s.injuryRiskLevel,exerciseLink:s.exerciseLink,imageLink:s.imageLink,relativePath:s.relatedPath};u([...o,a]),i(`${s.exercise} added to template`,"success")},Te=s=>{const a=[...o];a.splice(s,1),u(a)},I=(s,a,n)=>{const $=[...o];$[s]={...$[s],[a]:n},u($)},Se=async()=>{if(!j.trim()){i("Please enter a template name","error");return}if(o.length===0){i("Please add at least one exercise to the template","error");return}U(!0);const s={id:c&&l?l.id:Ae(),name:j,description:F,exercises:o,createdAt:c&&l?l.createdAt:new Date().toISOString(),lastUsed:c&&(l!=null&&l.lastUsed)?l.lastUsed:""};try{const a=await ie(s);a.success?(i(`Workout template ${c?"updated":"saved"} successfully`,"success"),b(""),T(""),u([]),S(!1),A(!1),M(null),c&&N("view")):i(`Error saving template: ${a.error}`,"error")}catch(a){i(`Error: ${a.message}`,"error")}finally{U(!1)}},we=async()=>{if(h){V(!0);try{const s=await ne(h.id);s.success?(i(`Template "${h.name}" deleted successfully`,"success"),w(!1),O(null)):i(`Error deleting template: ${s.error}`,"error")}catch(s){i(`Error: ${s.message}`,"error")}finally{V(!1)}}},ke=s=>{M(s),A(!0)},_=()=>{b(""),T(""),u([]),A(!1),M(null),N("build")},i=(s,a="success")=>{ve(s),ye(a),G(!0),setTimeout(()=>{G(!1)},3e3)},Ce=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return e.jsx(Me,{children:e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Workout Templates"})}),e.jsxs(Fe,{value:ue,onValueChange:N,className:"w-full",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-2",children:[e.jsx(ee,{value:"build",children:"Build Template"}),e.jsx(ee,{value:"view",children:"View Templates"})]}),e.jsxs(se,{value:"build",className:"mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"template-name",children:"Template Name"}),e.jsx(x,{id:"template-name",placeholder:"My Workout Template",value:j,onChange:s=>b(s.target.value),className:"mb-2"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"template-description",children:"Description (Optional)"}),e.jsx(x,{id:"template-description",placeholder:"Description of your workout template...",value:F,onChange:s=>T(s.target.value)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(k,{htmlFor:"muscle-group",children:"Filter by Muscle Group"}),"                  ",e.jsxs($e,{value:L||"all",onValueChange:s=>he(s==="all"?null:s),children:[e.jsx(Pe,{id:"muscle-group",children:e.jsx(We,{placeholder:"All Muscle Groups"})}),e.jsxs(Re,{children:[e.jsx(Z,{value:"all",children:"All Muscle Groups"}),p.map(s=>e.jsx(Z,{value:s.muscleGroup,children:s.muscleGroup},s.muscleGroup))]})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(k,{htmlFor:"search",children:"Search Exercises"}),e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(x,{id:"search",type:"text",placeholder:"Search by name...",className:"pl-9",value:y,onChange:s=>xe(s.target.value)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_1fr] gap-6",children:[e.jsxs(C,{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Exercise Library"}),f?e.jsx("div",{className:"space-y-2",children:Array(5).fill(0).map((s,a)=>e.jsx(ce,{className:"h-16 w-full"},a))}):e.jsx(W,{className:"h-[500px]",children:e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(g,{children:[e.jsx(m,{children:"Action"}),e.jsx(m,{children:"Exercise"}),e.jsx(m,{children:"Muscle Group"})]})}),e.jsx(le,{children:q.length>0?q.map((s,a)=>e.jsxs(g,{children:[e.jsx(d,{children:e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>be(s),children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsx(d,{children:s.exercise}),e.jsx(d,{children:s.muscleGroup})]},`${s.exercise}-${a}`)):e.jsx(g,{children:e.jsx(d,{colSpan:3,className:"text-center py-4",children:"No exercises found"})})})]})})]}),e.jsxs(C,{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Selected Exercises"}),e.jsx(W,{className:"h-[400px] mb-4",children:o.length>0?e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(g,{children:[e.jsx(m,{children:"Exercise"}),e.jsx(m,{children:"Sets"}),e.jsx(m,{children:"Reps"}),e.jsx(m,{children:"Rest (s)"}),e.jsx(m,{children:"Action"})]})}),e.jsx(le,{children:o.map((s,a)=>e.jsxs(g,{children:[e.jsx(d,{children:s.name}),e.jsx(d,{children:e.jsx(x,{type:"number",value:s.sets,min:1,className:"w-16",onChange:n=>I(a,"sets",parseInt(n.target.value)||1)})}),e.jsx(d,{children:e.jsx(x,{type:"number",value:s.reps,min:1,className:"w-16",onChange:n=>I(a,"reps",parseInt(n.target.value)||1)})}),e.jsx(d,{children:e.jsx(x,{type:"number",value:s.rest,min:0,className:"w-16",onChange:n=>I(a,"rest",parseInt(n.target.value)||0)})}),e.jsx(d,{children:e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>Te(a),children:e.jsx(re,{className:"h-4 w-4"})})})]},a))})]}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"No exercises added yet. Add some from the library."})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(r,{variant:"default",onClick:()=>S(!0),disabled:o.length===0||!j.trim(),children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"})," ",c?"Update":"Save"," Template"]})})]})]})]}),e.jsxs(se,{value:"view",className:"mt-6",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs(r,{onClick:_,children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," New Template"]})}),de?e.jsx("div",{className:"space-y-4",children:Array(3).fill(0).map((s,a)=>e.jsx(ce,{className:"h-24 w-full"},a))}):v.length===0?e.jsxs(C,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Templates Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first workout template to get started."}),e.jsxs(r,{onClick:_,children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," Create New Template"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(s=>e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>ke(s),children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{O(s),w(!0)},children:e.jsx(re,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Exercises:"})," ",e.jsx("span",{className:"font-medium",children:s.exercises.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",e.jsx("span",{className:"font-medium",children:Ce(s.createdAt)})]})]}),s.exercises.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Exercises:"}),e.jsx(W,{className:"h-32",children:e.jsxs("ul",{className:"space-y-1",children:[s.exercises.slice(0,5).map((a,n)=>e.jsxs("li",{className:"text-sm",children:[a.name," - ",a.sets,"Ã—",a.reps]},n)),s.exercises.length>5&&e.jsxs("li",{className:"text-sm text-muted-foreground",children:["+",s.exercises.length-5," more"]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(r,{size:"sm",onClick:async()=>{const a=await oe(s.name);a.success?(i(`Workout started with template "${s.name}"`,"success"),me.push("/workout")):i(`Error starting workout: ${a.error}`,"error")},children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"})," Start Workout"]})})]},s.name))})]})]}),e.jsx(H,{open:pe,onOpenChange:S,children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsxs(J,{children:[c?"Update":"Save"," Workout Template"]}),e.jsxs(K,{children:["Are you sure you want to ",c?"update":"save"," this workout template?"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Template Name:"})," ",j]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Exercises:"})," ",o.length]})]}),e.jsxs(Y,{children:[e.jsx(r,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(r,{onClick:Se,disabled:B,children:B?"Saving...":(c?"Update":"Save")+" Template"})]})]})}),e.jsx(H,{open:je,onOpenChange:w,children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsx(J,{children:"Delete Workout Template"}),e.jsx(K,{children:"Are you sure you want to delete this template? This action cannot be undone."})]}),h&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Template Name:"})," ",h.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Exercises:"})," ",h.exercises.length]})]}),e.jsxs(Y,{children:[e.jsx(r,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:we,disabled:z,children:z?"Deleting...":"Delete Template"})]})]})}),ge&&e.jsxs("div",{className:`fixed bottom-4 right-4 z-50 bg-background border shadow-lg rounded-md px-4 py-2 flex items-center gap-2 ${Ne==="error"?"border-destructive text-destructive":"border-primary text-primary"}`,children:[fe,e.jsx("button",{onClick:()=>G(!1),className:"ml-2",children:e.jsx(Ie,{className:"h-4 w-4"})})]})]})})};export{rs as default};
//# sourceMappingURL=WorkoutTemplateBuilderPage-DFTCO6Hv.js.map
