var No=Object.defineProperty;var Co=(e,t,n)=>t in e?No(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kn=(e,t,n)=>Co(e,typeof t!="symbol"?t+"":t,n);import{r as x,e as ut,j as r,c as oe,f as Zs,g as ea,B as R,h as Re,i as Po,k as Mo,l as ko,m as Do,n as Ro,o as De,R as I,q as Fo,b as Nn,u as Cn,t as _o,v as ta,w as Io,x as nt,y as ye,z as Fe,A as ze,C as Ge,D as Te,E as Xn,F as Eo,G as Ao,H as To,I as Oo,J as ra}from"./pwa-components-DFRzXAPN.js";import{u as na,c as Pn,P as et,a as ne,b as Lo,d as $o,S as sa,T as Pt,e as br,D as aa,A as we,C as ia,f as Mn,I as G,g as tr,h as lr,i as Vo,X as oa,H as lt,j as Qn,B as Nt,k as Mt,L as O,l as Bo,U as bt,m as Jn,n as Zn,o as es,p as ts,q as rs,r as Ho,s as ns,t as zo,v as la,w as ca,x as Go,R as Wo,y as Uo,z as Sr,E as qo,F as Yo,G as Ko,J as Xo,K as Qo,M as Jo,N as Zo,O as el,Q as tl,V as ss,W as as,Y as rl}from"./DashboardLayout-c4N3lsWj.js";import{c as K,C as A,a as H,b as z,d as L,t as B,e as Nr,u as nl,f as Pe,g as da}from"./index-DoxOVinb.js";import{B as ie}from"./badge-DDeZSJE1.js";import{S as sl}from"./scroll-area-Coq-ol54.js";import{R as ua}from"./rotate-ccw-B8tLZ-f6.js";import{E as Vt,a as ln,P as Kt,d as al,Q as il,f as ol,I as ll,T as cl}from"./TodosPage-DTgivXNe.js";import{f as se,p as Me,r as ma,a as dl,b as ga,c as ul,i as $e,T as fa,L as xe,g as ha,d as pa,e as ml,D as kn,A as xa,h as _e,j as cn,k as va,G as ya,l as cr,m as gl,n as dr,o as rr,q as wt,C as Or,s as fl,t as hl,u as pl,v as is,w as wa,x as xl,X as Dn,Y as Rn,y as vl,R as Fn,z as ja,B as _n,E as In,F as yl,H as wl,I as jl,J as bl}from"./BarChart-TnJZMJRX.js";import{g as En}from"./react-vendor-Csw2ODfV.js";import{T as ba,a as Sa,b as Na,c as Ct,d as Ca,e as Pa,f as ur}from"./table-CzyWKN9b.js";import{T as mt}from"./trash-2-D7BXSIAU.js";import{c as Ma,a as Sl,g as Nl,T as Cl,I as Pl,b as Ml,d as kl,C as kt,M as Dl}from"./MuscleFatiguePage-Db9aic3N.js";import{C as ka,P as Lt}from"./progress-CwerKmR9.js";import{m as An}from"./proxy-C4UgOg9u.js";import{T as Ee,S as Rl}from"./SleepTrackingPage-nf6Tifin.js";import{S as Ke,a as Xe,b as Qe,c as Je,d as ce}from"./select-C1ZopsoU.js";import{T as Cr,a as Pr,b as ge,c as fe,d as Da,I as Fl,R as _l}from"./tabs-Ckg3dhe6.js";import{P as Tn}from"./PageHeader-wjss6V3A.js";import{S as Il}from"./square-pen-Cv09M6XU.js";import{S as El}from"./save-CCykoWoj.js";import{C as Al}from"./check-CiQyU1a7.js";import{S as Tl}from"./search-BZv1Nir8.js";import"./db-utils-DgoSxAK8.js";import"./separator-DZ4Y86iO.js";import"./arrow-left-1LmNAeng.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],Ra=K("arrow-down-wide-narrow",Ol);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Fa=K("arrow-down",Ll);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Gt=K("arrow-right",$l);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],_a=K("arrow-up-narrow-wide",Vl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ia=K("arrow-up",Bl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zl=K("award",Hl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Wl=K("chart-line",Gl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ql=K("chart-no-axes-column",Ul);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Kl=K("chef-hat",Yl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ea=K("circle-plus",Xl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jl=K("circle",Ql);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ec=K("copy",Zl);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],rc=K("download",tc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],os=K("droplets",nc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ac=K("ellipsis-vertical",sc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],dn=K("file",ic);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Aa=K("folder-open",oc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cc=K("funnel",lc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],uc=K("image",dc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gc=K("loader-circle",mc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ls=K("lock",fc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pc=K("mail",hc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=[["path",{d:"M5 12h14",key:"1ays0h"}]],vc=K("minus",xc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],cs=K("panels-top-left",yc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],jc=K("pause",wc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Sc=K("play",bc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ds=K("sparkles",Nc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],us=K("thermometer",Cc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Mc=K("trending-down",Pc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ms=K("upload",kc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],gs=K("utensils",Dc);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Fc=K("weight",Rc);var Mr="Switch",[_c,tp]=Pn(Mr),[Ic,Ec]=_c(Mr),Ta=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:u="on",onCheckedChange:d,form:c,...m}=e,[f,g]=x.useState(null),h=ut(t,y=>g(y)),p=x.useRef(!1),v=f?c||!!f.closest("form"):!0,[w,M]=na({prop:a,defaultProp:i??!1,onChange:d,caller:Mr});return r.jsxs(Ic,{scope:n,checked:w,disabled:l,children:[r.jsx(et.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":Va(w),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:h,onClick:ne(e.onClick,y=>{M(j=>!j),v&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})}),v&&r.jsx($a,{control:f,bubbles:!p.current,name:s,value:u,checked:w,required:o,disabled:l,form:c,style:{transform:"translateX(-100%)"}})]})});Ta.displayName=Mr;var Oa="SwitchThumb",La=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=Ec(Oa,n);return r.jsx(et.span,{"data-state":Va(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});La.displayName=Oa;var Ac="SwitchBubbleInput",$a=x.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},i)=>{const o=x.useRef(null),l=ut(o,i),u=Lo(n),d=$o(t);return x.useEffect(()=>{const c=o.current;if(!c)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&g){const h=new Event("click",{bubbles:s});g.call(c,n),c.dispatchEvent(h)}},[u,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});$a.displayName=Ac;function Va(e){return e?"checked":"unchecked"}var Ba=Ta,Tc=La;const Ha=x.forwardRef(({className:e,...t},n)=>r.jsx(Ba,{className:oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(Tc,{className:oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ha.displayName=Ba.displayName;const fs=[{id:"muscle-fatigue",name:"Muscle Fatigue",component:"MuscleFatigueCard",isVisible:!0,category:"health"},{id:"active-workout",name:"Active Workout",component:"ActiveWorkoutCard",isVisible:!0,category:"other"},{id:"total-workouts",name:"Total Workouts",component:"TotalWorkoutsCard",isVisible:!0,category:"stat"},{id:"weekly-average",name:"Weekly Average",component:"WeeklyAverageCard",isVisible:!0,category:"stat"},{id:"weight-lifted",name:"Weight Lifted",component:"WeightLiftedCard",isVisible:!0,category:"stat"},{id:"personal-records",name:"Personal Records",component:"PersonalRecordsCard",isVisible:!0,category:"stat"},{id:"recent-workouts",name:"Recent Workouts",component:"RecentWorkouts",isVisible:!0,category:"content"},{id:"progress-card",name:"Progress",component:"ProgressCard",isVisible:!0,category:"content"},{id:"health-widget",name:"Health Dashboard",component:"HealthDashboardWidget",isVisible:!0,category:"health"},{id:"todo-card",name:"Tasks",component:"TodoCard",isVisible:!0,category:"content"},{id:"new-workout-action",name:"New Workout",component:"NewWorkoutActionCard",isVisible:!0,category:"action"},{id:"analytics-action",name:"Analytics",component:"AnalyticsActionCard",isVisible:!0,category:"action"},{id:"set-goals-action",name:"Set Goals",component:"SetGoalsActionCard",isVisible:!0,category:"action"},{id:"progression-chart",name:"Progression by Muscle",component:"ProgressionByMuscleCard",isVisible:!0,category:"chart"},{id:"volume-chart",name:"Muscle Group Volume",component:"MuscleGroupVolumeCard",isVisible:!0,category:"chart"},{id:"fatigue-chart",name:"Fatigue Progression",component:"FatigueProgressionCard",isVisible:!0,category:"chart"},{id:"workout-log-table",name:"Workout Log",component:"WorkoutLogTableCard",isVisible:!0,category:"content"},{id:"workout-summary",name:"Workout Summary",component:"WorkoutSummaryCard",isVisible:!0,category:"content"}],za=Zs()(ea((e,t)=>({cards:fs,toggleCardVisibility:n=>e(s=>({cards:s.cards.map(a=>a.id===n?{...a,isVisible:!a.isVisible}:a)})),resetToDefault:()=>e({cards:[...fs]})}),{name:"dashboard-customization",version:1})),Oc=()=>{const{cards:e,toggleCardVisibility:t,resetToDefault:n}=za(),[s,a]=x.useState(!1),i=()=>{n(),B.success("Reset to default layout")},o=e.filter(d=>d.isVisible),l=e.filter(d=>!d.isVisible),u=e.reduce((d,c)=>(d[c.category]||(d[c.category]=[]),d[c.category].push(c),d),{});return r.jsxs(A,{className:"mb-4 border-primary/20 bg-gradient-to-r from-primary/5 to-secondary/5",children:[r.jsx(H,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(sa,{className:"h-5 w-5 text-primary"}),r.jsx(z,{className:"text-lg",children:"Dashboard Cards"}),r.jsxs(ie,{variant:"secondary",className:"ml-2",children:[o.length," of ",e.length," visible"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(R,{variant:"outline",size:"sm",onClick:i,children:[r.jsx(ua,{className:"h-4 w-4 mr-2"}),"Reset"]}),r.jsxs(R,{variant:s?"default":"outline",size:"sm",onClick:()=>a(!s),children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),s?"Hide":"Manage Cards"]})]})]})}),s&&r.jsxs(L,{className:"pt-0",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(cs,{className:"h-4 w-4"}),"Quick Actions"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(R,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{e.forEach(d=>{d.isVisible||t(d.id)}),B.success("All cards shown")},children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Show All Cards"]}),r.jsxs(R,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{e.forEach(d=>{d.isVisible&&d.category!=="stat"&&t(d.id)}),B.success("Only stats cards shown")},children:[r.jsx(ln,{className:"h-4 w-4 mr-2"}),"Show Only Stats"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4"}),"Categories"]}),r.jsx(sl,{className:"h-48",children:r.jsx("div",{className:"space-y-3",children:Object.entries(u).map(([d,c])=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{variant:"outline",className:"text-xs capitalize",children:[d," (",c.length,")"]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{c.forEach(m=>{m.isVisible||t(m.id)}),B.success(`Showing all ${d} cards`)},children:r.jsx(Vt,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{c.forEach(m=>{m.isVisible&&t(m.id)}),B.success(`Hiding all ${d} cards`)},children:r.jsx(ln,{className:"h-3 w-3"})})]})]}),r.jsx("div",{className:"space-y-1",children:c.map(m=>r.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded border",children:[r.jsx("span",{className:oe("truncate",!m.isVisible&&"text-muted-foreground line-through"),children:m.name}),r.jsx(Ha,{checked:m.isVisible,onCheckedChange:()=>t(m.id),className:"ml-2"})]},m.id))})]},d))})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(ie,{className:"h-4 w-4"}),"Dashboard Stats"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total:"}),r.jsx(ie,{variant:"secondary",children:e.length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Visible:"}),r.jsx(ie,{variant:"default",children:o.length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Hidden:"}),r.jsx(ie,{variant:"outline",children:l.length})]})]}),r.jsx("div",{className:"text-xs space-y-1",children:Object.entries(u).map(([d,c])=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"capitalize",children:[d,":"]}),r.jsxs("span",{children:[c.filter(m=>m.isVisible).length,"/",c.length]})]},d))})]})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-md",children:r.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.jsx("strong",{children:"Instructions:"})," Use the switches to show/hide individual cards. Use category buttons to show/hide entire categories. Hidden cards will be automatically removed from the dashboard layout."]})})]})]})},kr=({title:e,value:t,description:n,icon:s,trend:a,className:i})=>{const o={fontSize:"clamp(0.75rem, calc(var(--grid-width, 3) * 0.25rem), 1rem)",iconSize:"clamp(1rem, calc(var(--grid-width, 3) * 0.33rem), 2rem)",padding:"clamp(0.5rem, calc(var(--grid-width, 3) * 0.16rem), 1.5rem)",valueSize:"clamp(1.25rem, calc(var(--grid-width, 3) * 0.5rem), 2.5rem)"};return r.jsxs(A,{variant:"glass",hover:"lift",className:oe("overflow-hidden h-full",i),style:o,children:[r.jsxs(H,{className:oe("flex flex-row items-center justify-between space-y-0","pb-[calc(var(--grid-height,3)*0.15rem)]","px-[calc(var(--grid-width,3)*0.16rem)]","pt-[calc(var(--grid-height,3)*0.2rem)]"),children:[r.jsx(z,{className:"font-medium text-muted-foreground line-clamp-1",style:{fontSize:"clamp(0.75rem, calc(var(--grid-width, 3) * 0.25rem), 0.9rem)"},children:e}),s&&r.jsx("div",{className:"flex items-center justify-center rounded-full bg-primary text-white shadow-sm shrink-0",style:{width:"clamp(1.5rem, calc(var(--grid-width, 3) * 0.5rem), 2.5rem)",height:"clamp(1.5rem, calc(var(--grid-width, 3) * 0.5rem), 2.5rem)"},children:r.jsx("div",{style:{width:"clamp(0.75rem, calc(var(--grid-width, 3) * 0.25rem), 1.25rem)",height:"clamp(0.75rem, calc(var(--grid-width, 3) * 0.25rem), 1.25rem)"},children:s})})]}),r.jsxs(L,{className:oe("px-[calc(var(--grid-width,3)*0.16rem)]","pb-[calc(var(--grid-height,3)*0.1rem)]"),children:[r.jsx("div",{className:"font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",style:{fontSize:"clamp(1.25rem, calc(var(--grid-width, 3) * 0.5rem + var(--grid-height, 3) * 0.2rem), 2.5rem)",lineHeight:"clamp(1.5rem, calc(var(--grid-width, 3) * 0.6rem + var(--grid-height, 3) * 0.25rem), 3rem)"},children:t}),n&&r.jsx("p",{className:"text-muted-foreground mt-1 line-clamp-2",style:{fontSize:"clamp(0.65rem, calc(var(--grid-width, 3) * 0.2rem), 0.8rem)",marginTop:"clamp(0.25rem, calc(var(--grid-height, 3) * 0.1rem), 0.5rem)"},children:n})]}),a&&r.jsx(Nr,{className:oe("px-[calc(var(--grid-width,3)*0.16rem)]","pb-[calc(var(--grid-height,3)*0.15rem)]","pt-0"),children:r.jsxs(ie,{variant:a.isPositive?"success":"destructive",className:oe("font-medium gap-1 shadow-sm animate-fade-in",a.isPositive?"bg-success/20 text-success hover:bg-success/30":"bg-destructive/20 text-destructive hover:bg-destructive/30"),style:{fontSize:"clamp(0.6rem, calc(var(--grid-width, 3) * 0.18rem), 0.75rem)",padding:"clamp(0.25rem, calc(var(--grid-width, 3) * 0.08rem), 0.5rem) clamp(0.5rem, calc(var(--grid-width, 3) * 0.12rem), 0.75rem)"},children:[a.isPositive?r.jsx(Ia,{style:{width:"clamp(0.6rem, calc(var(--grid-width, 3) * 0.15rem), 0.75rem)",height:"clamp(0.6rem, calc(var(--grid-width, 3) * 0.15rem), 0.75rem)"}}):r.jsx(Fa,{style:{width:"clamp(0.6rem, calc(var(--grid-width, 3) * 0.15rem), 0.75rem)",height:"clamp(0.6rem, calc(var(--grid-width, 3) * 0.15rem), 0.75rem)"}}),a.value,"%"]})})]})},Lc=()=>{const{workoutLogs:e}=Re(),t=x.useMemo(()=>Po(e),[e]);return r.jsx(kr,{title:"Total Workouts",value:t,description:"Since you started",icon:r.jsx(ql,{className:"w-4 h-4 text-black"}),trend:{value:0,isPositive:!0}})},$c=()=>{const{workoutLogs:e}=Re(),t=x.useMemo(()=>Mo(e),[e]);return r.jsx(kr,{title:"Weekly Average",value:t.toString(),description:"Sessions per week",icon:r.jsx(Pt,{className:"w-4 h-4 text-black"}),trend:{value:0,isPositive:!0}})},Vc=()=>{const{workoutLogs:e}=Re(),{convertAndFormatWeight:t}=br(),n=x.useMemo(()=>ko(e,"month"),[e]);return r.jsx(kr,{title:"Weight Lifted",value:t(n),description:"Total this month",icon:r.jsx(aa,{className:"w-4 h-4 text-black"}),trend:{value:0,isPositive:!0}})},Bc=()=>{const{workoutLogs:e}=Re(),t=x.useMemo(()=>Do(e),[e]),n=x.useMemo(()=>Ro(e),[e]);return r.jsx(kr,{title:"Personal Records",value:t,description:`${n} new this month`,icon:r.jsx(zl,{className:"w-4 h-4 text-black"}),trend:{value:n>0?n:0,isPositive:n>0}})};var Hc=["points","className","baseLinePoints","connectNulls"];function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},St.apply(this,arguments)}function zc(e,t){if(e==null)return{};var n=Gc(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Gc(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function hs(e){return Yc(e)||qc(e)||Uc(e)||Wc()}function Wc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uc(e,t){if(e){if(typeof e=="string")return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}}function qc(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yc(e){if(Array.isArray(e))return un(e)}function un(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var ps=function(t){return t&&t.x===+t.x&&t.y===+t.y},Kc=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){ps(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),ps(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Bt=function(t,n){var s=Kc(t);n&&(s=[s.reduce(function(i,o){return[].concat(hs(i),hs(o))},[])]);var a=s.map(function(i){return i.reduce(function(o,l,u){return"".concat(o).concat(u===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},Xc=function(t,n,s){var a=Bt(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Bt(n.reverse(),s).slice(1))},Ga=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,o=zc(t,Hc);if(!n||!n.length)return null;var l=De("recharts-polygon",s);if(a&&a.length){var u=o.stroke&&o.stroke!=="none",d=Xc(n,a,i);return I.createElement("g",{className:l},I.createElement("path",St({},se(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),u?I.createElement("path",St({},se(o,!0),{fill:"none",d:Bt(n,i)})):null,u?I.createElement("path",St({},se(o,!0),{fill:"none",d:Bt(a,i)})):null)}var c=Bt(n,i);return I.createElement("path",St({},se(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",className:l,d:c}))},Qc=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Wt(e){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(e)}function Jc(e,t){if(e==null)return{};var n=Zc(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Zc(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ve.apply(this,arguments)}function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xs(Object(n),!0).forEach(function(s){ed(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ed(e,t,n){return t=td(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function td(e){var t=rd(e,"string");return Wt(t)=="symbol"?t:t+""}function rd(e,t){if(Wt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Wt(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nd=function(t,n,s,a){var i="";return a.forEach(function(o,l){var u=Me(n,s,t,o);l?i+="L ".concat(u.x,",").concat(u.y):i+="M ".concat(u.x,",").concat(u.y)}),i+="Z",i},sd=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var u=Ut({stroke:"#ccc"},se(t,!1));return I.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(d){var c=Me(n,s,a,d),m=Me(n,s,i,d);return I.createElement("line",Ve({},u,{key:"line-".concat(d),x1:c.x,y1:c.y,x2:m.x,y2:m.y}))}))},ad=function(t){var n=t.cx,s=t.cy,a=t.radius,i=t.index,o=Ut(Ut({stroke:"#ccc"},se(t,!1)),{},{fill:"none"});return I.createElement("circle",Ve({},o,{className:De("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:n,cy:s,r:a}))},id=function(t){var n=t.radius,s=t.index,a=Ut(Ut({stroke:"#ccc"},se(t,!1)),{},{fill:"none"});return I.createElement("path",Ve({},a,{className:De("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(s),d:nd(n,t.cx,t.cy,t.polarAngles)}))},od=function(t){var n=t.polarRadius,s=t.gridType;return!n||!n.length?null:I.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(a,i){var o=i;return s==="circle"?I.createElement(ad,Ve({key:o},t,{radius:a,index:i})):I.createElement(id,Ve({key:o},t,{radius:a,index:i}))}))},Wa=function(t){var n=t.cx,s=n===void 0?0:n,a=t.cy,i=a===void 0?0:a,o=t.innerRadius,l=o===void 0?0:o,u=t.outerRadius,d=u===void 0?0:u,c=t.gridType,m=c===void 0?"polygon":c,f=t.radialLines,g=f===void 0?!0:f,h=Jc(t,Qc);return d<=0?null:I.createElement("g",{className:"recharts-polar-grid"},I.createElement(sd,Ve({cx:s,cy:i,innerRadius:l,outerRadius:d,gridType:m,radialLines:g},h)),I.createElement(od,Ve({cx:s,cy:i,innerRadius:l,outerRadius:d,gridType:m,radialLines:g},h)))};Wa.displayName="PolarGrid";var Lr,vs;function ld(){if(vs)return Lr;vs=1;var e=ma(),t=dl(),n=ga();function s(a,i){return a&&a.length?e(a,n(i,2),t):void 0}return Lr=s,Lr}var cd=ld();const dd=En(cd);var $r,ys;function ud(){if(ys)return $r;ys=1;var e=ma(),t=ga(),n=ul();function s(a,i){return a&&a.length?e(a,t(i,2),n):void 0}return $r=s,$r}var md=ud();const gd=En(md);var fd=["cx","cy","angle","ticks","axisLine"],hd=["ticks","tick","angle","tickFormatter","stroke"];function Dt(e){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(e)}function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ht.apply(this,arguments)}function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ws(Object(n),!0).forEach(function(s){Dr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function js(e,t){if(e==null)return{};var n=pd(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function pd(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bs(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,qa(s.key),s)}}function vd(e,t,n){return t&&bs(e.prototype,t),n&&bs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yd(e,t,n){return t=mr(t),wd(e,Ua()?Reflect.construct(t,n||[],mr(e).constructor):t.apply(e,n))}function wd(e,t){if(t&&(Dt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jd(e)}function jd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ua=function(){return!!e})()}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mr(e)}function bd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}function mn(e,t){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},mn(e,t)}function Dr(e,t,n){return t=qa(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qa(e){var t=Sd(e,"string");return Dt(t)=="symbol"?t:t+""}function Sd(e,t){if(Dt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Dt(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xt=function(e){function t(){return xd(this,t),yd(this,t,arguments)}return bd(t,e),vd(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,o=i.angle,l=i.cx,u=i.cy;return Me(l,u,a,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,u=dd(l,function(c){return c.coordinate||0}),d=gd(l,function(c){return c.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,u=s.axisLine,d=js(s,fd),c=l.reduce(function(h,p){return[Math.min(h[0],p.coordinate),Math.max(h[1],p.coordinate)]},[1/0,-1/0]),m=Me(a,i,c[0],o),f=Me(a,i,c[1],o),g=st(st(st({},se(d,!1)),{},{fill:"none"},se(u,!1)),{},{x1:m.x,y1:m.y,x2:f.x,y2:f.y});return I.createElement("line",Ht({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,u=a.tickFormatter,d=a.stroke,c=js(a,hd),m=this.getTickTextAnchor(),f=se(c,!1),g=se(o,!1),h=i.map(function(p,v){var w=s.getTickValueCoord(p),M=st(st(st(st({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},f),{},{stroke:"none",fill:d},g),{},{index:v},w),{},{payload:p});return I.createElement(xe,Ht({className:De("recharts-polar-radius-axis-tick",ha(o)),key:"tick-".concat(p.coordinate)},pa(s.props,p,v)),t.renderTickItem(o,M,u?u(p.value,v):p.value))});return I.createElement(xe,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,o=s.tick;return!a||!a.length?null:I.createElement(xe,{className:De("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ml.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return I.isValidElement(s)?o=I.cloneElement(s,a):$e(s)?o=s(a):o=I.createElement(fa,Ht({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(x.PureComponent);Dr(Xt,"displayName","PolarRadiusAxis");Dr(Xt,"axisType","radiusAxis");Dr(Xt,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Rt(e){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(e)}function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ct.apply(this,arguments)}function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ss(Object(n),!0).forEach(function(s){Rr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Nd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ns(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Ka(s.key),s)}}function Cd(e,t,n){return t&&Ns(e.prototype,t),n&&Ns(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pd(e,t,n){return t=gr(t),Md(e,Ya()?Reflect.construct(t,n||[],gr(e).constructor):t.apply(e,n))}function Md(e,t){if(t&&(Rt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kd(e)}function kd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ya=function(){return!!e})()}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gr(e)}function Dd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gn(e,t)}function gn(e,t){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},gn(e,t)}function Rr(e,t,n){return t=Ka(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ka(e){var t=Rd(e,"string");return Rt(t)=="symbol"?t:t+""}function Rd(e,t){if(Rt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Rt(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fd=Math.PI/180,_d=1e-5,Qt=function(e){function t(){return Nd(this,t),Pd(this,t,arguments)}return Dd(t,e),Cd(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,o=a.cy,l=a.radius,u=a.orientation,d=a.tickSize,c=d||8,m=Me(i,o,l,s.coordinate),f=Me(i,o,l+(u==="inner"?-1:1)*c,s.coordinate);return{x1:m.x,y1:m.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*Fd),o;return i>_d?o=a==="outer"?"start":"end":i<-1e-5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.radius,l=s.axisLine,u=s.axisLineType,d=at(at({},se(this.props,!1)),{},{fill:"none"},se(l,!1));if(u==="circle")return I.createElement(kn,ct({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var c=this.props.ticks,m=c.map(function(f){return Me(a,i,o,f.coordinate)});return I.createElement(Ga,ct({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,u=a.tickFormatter,d=a.stroke,c=se(this.props,!1),m=se(o,!1),f=at(at({},c),{},{fill:"none"},se(l,!1)),g=i.map(function(h,p){var v=s.getTickLineCoord(h),w=s.getTickTextAnchor(h),M=at(at(at({textAnchor:w},c),{},{stroke:"none",fill:d},m),{},{index:p,payload:h,x:v.x2,y:v.y2});return I.createElement(xe,ct({className:De("recharts-polar-angle-axis-tick",ha(o)),key:"tick-".concat(h.coordinate)},pa(s.props,h,p)),l&&I.createElement("line",ct({className:"recharts-polar-angle-axis-tick-line"},f,v)),o&&t.renderTickItem(o,M,u?u(h.value,p):h.value))});return I.createElement(xe,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,o=s.axisLine;return i<=0||!a||!a.length?null:I.createElement(xe,{className:De("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var o;return I.isValidElement(s)?o=I.cloneElement(s,a):$e(s)?o=s(a):o=I.createElement(fa,ct({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(x.PureComponent);Rr(Qt,"displayName","PolarAngleAxis");Rr(Qt,"axisType","angleAxis");Rr(Qt,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Vr,Cs;function Id(){if(Cs)return Vr;Cs=1;function e(t){return t&&t.length?t[0]:void 0}return Vr=e,Vr}var Br,Ps;function Ed(){return Ps||(Ps=1,Br=Id()),Br}var Ad=Ed();const Td=En(Ad);var Od=["key"];function Ft(e){"@babel/helpers - typeof";return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(e)}function Ld(e,t){if(e==null)return{};var n=$d(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $d(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function fr(){return fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fr.apply(this,arguments)}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ms(Object(n),!0).forEach(function(s){Le(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Vd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ks(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Qa(s.key),s)}}function Bd(e,t,n){return t&&ks(e.prototype,t),n&&ks(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hd(e,t,n){return t=hr(t),zd(e,Xa()?Reflect.construct(t,n||[],hr(e).constructor):t.apply(e,n))}function zd(e,t){if(t&&(Ft(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gd(e)}function Gd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xa=function(){return!!e})()}function hr(e){return hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hr(e)}function Wd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fn(e,t)}function fn(e,t){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},fn(e,t)}function Le(e,t,n){return t=Qa(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qa(e){var t=Ud(e,"string");return Ft(t)=="symbol"?t:t+""}function Ud(e,t){if(Ft(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ft(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jt=function(e){function t(){var n;Vd(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=Hd(this,t,[].concat(a)),Le(n,"state",{isAnimationFinished:!1}),Le(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),$e(o)&&o()}),Le(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),$e(o)&&o()}),Le(n,"handleMouseEnter",function(o){var l=n.props.onMouseEnter;l&&l(n.props,o)}),Le(n,"handleMouseLeave",function(o){var l=n.props.onMouseLeave;l&&l(n.props,o)}),n}return Wd(t,e),Bd(t,[{key:"renderDots",value:function(s){var a=this.props,i=a.dot,o=a.dataKey,l=se(this.props,!1),u=se(i,!0),d=s.map(function(c,m){var f=me(me(me({key:"dot-".concat(m),r:3},l),u),{},{dataKey:o,cx:c.x,cy:c.y,index:m,payload:c});return t.renderDotItem(i,f)});return I.createElement(xe,{className:"recharts-radar-dots"},d)}},{key:"renderPolygonStatically",value:function(s){var a=this.props,i=a.shape,o=a.dot,l=a.isRange,u=a.baseLinePoints,d=a.connectNulls,c;return I.isValidElement(i)?c=I.cloneElement(i,me(me({},this.props),{},{points:s})):$e(i)?c=i(me(me({},this.props),{},{points:s})):c=I.createElement(Ga,fr({},se(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:s,baseLinePoints:l?u:null,connectNulls:d})),I.createElement(xe,{className:"recharts-radar-polygon"},c,o?this.renderDots(s):null)}},{key:"renderPolygonWithAnimation",value:function(){var s=this,a=this.props,i=a.points,o=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,d=a.animationEasing,c=a.animationId,m=this.state.prevPoints;return I.createElement(xa,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"radar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var g=f.t,h=m&&m.length/i.length,p=i.map(function(v,w){var M=m&&m[Math.floor(w*h)];if(M){var y=_e(M.x,v.x),j=_e(M.y,v.y);return me(me({},v),{},{x:y(g),y:j(g)})}var N=_e(v.cx,v.x),P=_e(v.cy,v.y);return me(me({},v),{},{x:N(g),y:P(g)})});return s.renderPolygonStatically(p)})}},{key:"renderPolygon",value:function(){var s=this.props,a=s.points,i=s.isAnimationActive,o=s.isRange,l=this.state.prevPoints;return i&&a&&a.length&&!o&&(!l||!cn(l,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.className,o=s.points,l=s.isAnimationActive;if(a||!o||!o.length)return null;var u=this.state.isAnimationFinished,d=De("recharts-radar",i);return I.createElement(xe,{className:d},this.renderPolygon(),(!l||u)&&va.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"renderDotItem",value:function(s,a){var i;if(I.isValidElement(s))i=I.cloneElement(s,a);else if($e(s))i=s(a);else{var o=a.key,l=Ld(a,Od);i=I.createElement(kn,fr({},l,{key:o,className:De("recharts-radar-dot",typeof s!="boolean"?s.className:"")}))}return i}}])}(x.PureComponent);Le(Jt,"displayName","Radar");Le(Jt,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!ya.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Le(Jt,"getComposedData",function(e){var t=e.radiusAxis,n=e.angleAxis,s=e.displayedData,a=e.dataKey,i=e.bandSize,o=n.cx,l=n.cy,u=!1,d=[],c=n.type!=="number"?i??0:0;s.forEach(function(f,g){var h=cr(f,n.dataKey,g),p=cr(f,a),v=n.scale(h)+c,w=Array.isArray(p)?gl(p):p,M=dr(w)?void 0:t.scale(w);Array.isArray(p)&&p.length>=2&&(u=!0),d.push(me(me({},Me(o,l,M,v)),{},{name:h,value:p,cx:o,cy:l,radius:M,angle:v,payload:f}))});var m=[];return u&&d.forEach(function(f){if(Array.isArray(f.value)){var g=Td(f.value),h=dr(g)?void 0:t.scale(g);m.push(me(me({},f),{},{radius:h},Me(o,l,h,f.angle)))}else m.push(f)}),{points:d,isRange:u,baseLinePoints:m}});var qd=["layout","type","stroke","connectNulls","isRange","ref"],Yd=["key"],Ja;function _t(e){"@babel/helpers - typeof";return _t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(e)}function Za(e,t){if(e==null)return{};var n=Kd(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Kd(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dt.apply(this,arguments)}function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ds(Object(n),!0).forEach(function(s){Ie(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rs(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ti(s.key),s)}}function Qd(e,t,n){return t&&Rs(e.prototype,t),n&&Rs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jd(e,t,n){return t=pr(t),Zd(e,ei()?Reflect.construct(t,n||[],pr(e).constructor):t.apply(e,n))}function Zd(e,t){if(t&&(_t(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eu(e)}function eu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ei(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ei=function(){return!!e})()}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pr(e)}function tu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}function hn(e,t){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},hn(e,t)}function Ie(e,t,n){return t=ti(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ti(e){var t=ru(e,"string");return _t(t)=="symbol"?t:t+""}function ru(e,t){if(_t(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(_t(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Be=function(e){function t(){var n;Xd(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=Jd(this,t,[].concat(a)),Ie(n,"state",{isAnimationFinished:!0}),Ie(n,"id",pl("recharts-area-")),Ie(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),$e(o)&&o()}),Ie(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),$e(o)&&o()}),n}return tu(t,e),Qd(t,[{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var u=this.props,d=u.dot,c=u.points,m=u.dataKey,f=se(this.props,!1),g=se(d,!0),h=c.map(function(v,w){var M=qe(qe(qe({key:"dot-".concat(w),r:3},f),g),{},{index:w,cx:v.x,cy:v.y,dataKey:m,value:v.value,payload:v.payload,points:c});return t.renderDotItem(d,M)}),p={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return I.createElement(xe,dt({className:"recharts-area-dots"},p),h)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,u=o[0].x,d=o[o.length-1].x,c=s*Math.abs(u-d),m=rr(o.map(function(f){return f.y||0}));return wt(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(rr(i.map(function(f){return f.y||0})),m)),wt(m)?I.createElement("rect",{x:u<d?u:u-c,y:0,width:c,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,u=o[0].y,d=o[o.length-1].y,c=s*Math.abs(u-d),m=rr(o.map(function(f){return f.x||0}));return wt(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(rr(i.map(function(f){return f.x||0})),m)),wt(m)?I.createElement("rect",{x:0,y:u<d?u:u-c,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,o){var l=this.props,u=l.layout,d=l.type,c=l.stroke,m=l.connectNulls,f=l.isRange;l.ref;var g=Za(l,qd);return I.createElement(xe,{clipPath:i?"url(#clipPath-".concat(o,")"):null},I.createElement(Or,dt({},se(g,!0),{points:s,connectNulls:m,type:d,baseLine:a,layout:u,stroke:"none",className:"recharts-area-area"})),c!=="none"&&I.createElement(Or,dt({},se(this.props,!1),{className:"recharts-area-curve",layout:u,type:d,connectNulls:m,fill:"none",points:s})),c!=="none"&&f&&I.createElement(Or,dt({},se(this.props,!1),{className:"recharts-area-curve",layout:u,type:d,connectNulls:m,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,u=o.baseLine,d=o.isAnimationActive,c=o.animationBegin,m=o.animationDuration,f=o.animationEasing,g=o.animationId,h=this.state,p=h.prevPoints,v=h.prevBaseLine;return I.createElement(xa,{begin:c,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var M=w.t;if(p){var y=p.length/l.length,j=l.map(function(F,W){var E=Math.floor(W*y);if(p[E]){var C=p[E],T=_e(C.x,F.x),q=_e(C.y,F.y);return qe(qe({},F),{},{x:T(M),y:q(M)})}return F}),N;if(wt(u)&&typeof u=="number"){var P=_e(v,u);N=P(M)}else if(dr(u)||fl(u)){var b=_e(v,0);N=b(M)}else N=u.map(function(F,W){var E=Math.floor(W*y);if(v[E]){var C=v[E],T=_e(C.x,F.x),q=_e(C.y,F.y);return qe(qe({},F),{},{x:T(M),y:q(M)})}return F});return i.renderAreaStatically(j,N,s,a)}return I.createElement(xe,null,I.createElement("defs",null,I.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(M))),I.createElement(xe,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,u,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,o=i.points,l=i.baseLine,u=i.isAnimationActive,d=this.state,c=d.prevPoints,m=d.prevBaseLine,f=d.totalLength;return u&&o&&o.length&&(!c&&f>0||!cn(c,o)||!cn(m,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(o,l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,u=a.className,d=a.top,c=a.left,m=a.xAxis,f=a.yAxis,g=a.width,h=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var w=this.state.isAnimationFinished,M=l.length===1,y=De("recharts-area",u),j=m&&m.allowDataOverflow,N=f&&f.allowDataOverflow,P=j||N,b=dr(v)?this.id:v,F=(s=se(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},W=F.r,E=W===void 0?3:W,C=F.strokeWidth,T=C===void 0?2:C,q=hl(o)?o:{},D=q.clipDot,Y=D===void 0?!0:D,Z=E*2+T;return I.createElement(xe,{className:y},j||N?I.createElement("defs",null,I.createElement("clipPath",{id:"clipPath-".concat(b)},I.createElement("rect",{x:j?c:c-g/2,y:N?d:d-h/2,width:j?g:g*2,height:N?h:h*2})),!Y&&I.createElement("clipPath",{id:"clipPath-dots-".concat(b)},I.createElement("rect",{x:c-Z/2,y:d-Z/2,width:g+Z,height:h+Z}))):null,M?null:this.renderArea(P,b),(o||M)&&this.renderDots(P,Y,b),(!p||w)&&va.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(x.PureComponent);Ja=Be;Ie(Be,"displayName","Area");Ie(Be,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ya.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ie(Be,"getBaseValue",function(e,t,n,s){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(wt(l)&&typeof l=="number")return l;var u=a==="horizontal"?s:n,d=u.scale.domain();if(u.type==="number"){var c=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||c<0?c:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Ie(Be,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,u=e.dataKey,d=e.stackedData,c=e.dataStartIndex,m=e.displayedData,f=e.offset,g=t.layout,h=d&&d.length,p=Ja.getBaseValue(t,n,s,a),v=g==="horizontal",w=!1,M=m.map(function(j,N){var P;h?P=d[c+N]:(P=cr(j,u),Array.isArray(P)?w=!0:P=[p,P]);var b=P[1]==null||h&&cr(j,u)==null;return v?{x:is({axis:s,ticks:i,bandSize:l,entry:j,index:N}),y:b?null:a.scale(P[1]),value:P,payload:j}:{x:b?null:s.scale(P[1]),y:is({axis:a,ticks:o,bandSize:l,entry:j,index:N}),value:P,payload:j}}),y;return h||w?y=M.map(function(j){var N=Array.isArray(j.value)?j.value[0]:null;return v?{x:j.x,y:N!=null&&j.y!=null?a.scale(N):null}:{x:N!=null?s.scale(N):null,y:j.y}}):y=v?a.scale(p):s.scale(p),qe({points:M,baseLine:y,layout:g,isRange:w},f)});Ie(Be,"renderDotItem",function(e,t){var n;if(I.isValidElement(e))n=I.cloneElement(e,t);else if($e(e))n=e(t);else{var s=De("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=Za(t,Yd);n=I.createElement(kn,dt({},i,{key:a,className:s}))}return n});var nu=wa({chartName:"RadarChart",GraphicalChild:Jt,axisComponents:[{axisType:"angleAxis",AxisComp:Qt},{axisType:"radiusAxis",AxisComp:Xt}],formatAxisMap:xl,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),su=wa({chartName:"AreaChart",GraphicalChild:Be,axisComponents:[{axisType:"xAxis",AxisComp:Dn},{axisType:"yAxis",AxisComp:Rn}],formatAxisMap:vl});const ri=6048e5,au=864e5,Fs=Symbol.for("constructDateFrom");function He(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Fs in e?e[Fs](t):e instanceof Date?new e.constructor(t):new Date(t)}function be(e,t){return He(t||e,e)}function xt(e,t,n){const s=be(e,n==null?void 0:n.in);return isNaN(t)?He(e,NaN):(t&&s.setDate(s.getDate()+t),s)}let iu={};function Fr(){return iu}function It(e,t){var l,u,d,c;const n=Fr(),s=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((c=(d=n.locale)==null?void 0:d.options)==null?void 0:c.weekStartsOn)??0,a=be(e,t==null?void 0:t.in),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function xr(e,t){return It(e,{...t,weekStartsOn:1})}function ni(e,t){const n=be(e,t==null?void 0:t.in),s=n.getFullYear(),a=He(n,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const i=xr(a),o=He(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const l=xr(o);return n.getTime()>=i.getTime()?s+1:n.getTime()>=l.getTime()?s:s-1}function _s(e){const t=be(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ou(e,...t){const n=He.bind(null,t.find(s=>typeof s=="object"));return t.map(n)}function Is(e,t){const n=be(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function lu(e,t,n){const[s,a]=ou(n==null?void 0:n.in,e,t),i=Is(s),o=Is(a),l=+i-_s(i),u=+o-_s(o);return Math.round((l-u)/au)}function cu(e,t){const n=ni(e,t),s=He(e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),xr(s)}function du(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function uu(e){return!(!du(e)&&typeof e!="number"||isNaN(+be(e)))}function mu(e,t){const n=be(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const gu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fu=(e,t,n)=>{let s;const a=gu[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Hr(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const hu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vu={date:Hr({formats:hu,defaultWidth:"full"}),time:Hr({formats:pu,defaultWidth:"full"}),dateTime:Hr({formats:xu,defaultWidth:"full"})},yu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wu=(e,t,n,s)=>yu[e];function At(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const ju={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Su={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Nu={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Cu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mu=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ku={ordinalNumber:Mu,era:At({values:ju,defaultWidth:"wide"}),quarter:At({values:bu,defaultWidth:"wide",argumentCallback:e=>e-1}),month:At({values:Su,defaultWidth:"wide"}),day:At({values:Nu,defaultWidth:"wide"}),dayPeriod:At({values:Cu,defaultWidth:"wide",formattingValues:Pu,defaultFormattingWidth:"wide"})};function Tt(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Ru(l,m=>m.test(o)):Du(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const c=t.slice(o.length);return{value:d,rest:c}}}function Du(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ru(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Fu(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const _u=/^(\d+)(th|st|nd|rd)?/i,Iu=/\d+/i,Eu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Au={any:[/^b/i,/^(a|c)/i]},Tu={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ou={any:[/1/i,/2/i,/3/i,/4/i]},Lu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$u={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gu={ordinalNumber:Fu({matchPattern:_u,parsePattern:Iu,valueCallback:e=>parseInt(e,10)}),era:Tt({matchPatterns:Eu,defaultMatchWidth:"wide",parsePatterns:Au,defaultParseWidth:"any"}),quarter:Tt({matchPatterns:Tu,defaultMatchWidth:"wide",parsePatterns:Ou,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Tt({matchPatterns:Lu,defaultMatchWidth:"wide",parsePatterns:$u,defaultParseWidth:"any"}),day:Tt({matchPatterns:Vu,defaultMatchWidth:"wide",parsePatterns:Bu,defaultParseWidth:"any"}),dayPeriod:Tt({matchPatterns:Hu,defaultMatchWidth:"any",parsePatterns:zu,defaultParseWidth:"any"})},Wu={code:"en-US",formatDistance:fu,formatLong:vu,formatRelative:wu,localize:ku,match:Gu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Uu(e,t){const n=be(e,t==null?void 0:t.in);return lu(n,mu(n))+1}function qu(e,t){const n=be(e,t==null?void 0:t.in),s=+xr(n)-+cu(n);return Math.round(s/ri)+1}function si(e,t){var c,m,f,g;const n=be(e,t==null?void 0:t.in),s=n.getFullYear(),a=Fr(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(f=a.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=He((t==null?void 0:t.in)||e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=It(o,t),u=He((t==null?void 0:t.in)||e,0);u.setFullYear(s,0,i),u.setHours(0,0,0,0);const d=It(u,t);return+n>=+l?s+1:+n>=+d?s:s-1}function Yu(e,t){var l,u,d,c;const n=Fr(),s=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(d=n.locale)==null?void 0:d.options)==null?void 0:c.firstWeekContainsDate)??1,a=si(e,t),i=He((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),It(i,t)}function Ku(e,t){const n=be(e,t==null?void 0:t.in),s=+It(n,t)-+Yu(n,t);return Math.round(s/ri)+1}function J(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const We={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return J(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):J(n+1,2)},d(e,t){return J(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return J(e.getHours()%12||12,t.length)},H(e,t){return J(e.getHours(),t.length)},m(e,t){return J(e.getMinutes(),t.length)},s(e,t){return J(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return J(a,t.length)}},vt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Es={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return We.y(e,t)},Y:function(e,t,n,s){const a=si(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return J(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):J(i,t.length)},R:function(e,t){const n=ni(e);return J(n,t.length)},u:function(e,t){const n=e.getFullYear();return J(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return J(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return J(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return We.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return J(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=Ku(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):J(a,t.length)},I:function(e,t,n){const s=qu(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):J(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):We.d(e,t)},D:function(e,t,n){const s=Uu(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):J(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return J(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return J(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return J(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=vt.noon:s===0?a=vt.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=vt.evening:s>=12?a=vt.afternoon:s>=4?a=vt.morning:a=vt.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return We.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):We.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):J(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):J(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):We.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):We.s(e,t)},S:function(e,t){return We.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Ts(s);case"XXXX":case"XX":return it(s);case"XXXXX":case"XXX":default:return it(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return Ts(s);case"xxxx":case"xx":return it(s);case"xxxxx":case"xxx":default:return it(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+As(s,":");case"OOOO":default:return"GMT"+it(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+As(s,":");case"zzzz":default:return"GMT"+it(s,":")}},t:function(e,t,n){const s=Math.trunc(+e/1e3);return J(s,t.length)},T:function(e,t,n){return J(+e,t.length)}};function As(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?n+String(a):n+String(a)+t+J(i,2)}function Ts(e,t){return e%60===0?(e>0?"-":"+")+J(Math.abs(e)/60,2):it(e,t)}function it(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=J(Math.trunc(s/60),2),i=J(s%60,2);return n+a+t+i}const Os=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ai=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Xu=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return Os(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Os(s,t)).replace("{{time}}",ai(a,t))},Qu={p:ai,P:Xu},Ju=/^D+$/,Zu=/^Y+$/,em=["D","DD","YY","YYYY"];function tm(e){return Ju.test(e)}function rm(e){return Zu.test(e)}function nm(e,t,n){const s=sm(e,t,n);if(console.warn(s),em.includes(e))throw new RangeError(s)}function sm(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const am=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,im=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,om=/^'([^]*?)'?$/,lm=/''/g,cm=/[a-zA-Z]/;function ae(e,t,n){var c,m,f,g;const s=Fr(),a=s.locale??Wu,i=s.firstWeekContainsDate??((m=(c=s.locale)==null?void 0:c.options)==null?void 0:m.firstWeekContainsDate)??1,o=s.weekStartsOn??((g=(f=s.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,l=be(e,n==null?void 0:n.in);if(!uu(l))throw new RangeError("Invalid time value");let u=t.match(im).map(h=>{const p=h[0];if(p==="p"||p==="P"){const v=Qu[p];return v(h,a.formatLong)}return h}).join("").match(am).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:dm(h)};if(Es[p])return{isToken:!0,value:h};if(p.match(cm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});a.localize.preprocessor&&(u=a.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(h=>{if(!h.isToken)return h.value;const p=h.value;(rm(p)||tm(p))&&nm(p,t,String(e));const v=Es[p[0]];return v(l,p,a.localize,d)}).join("")}function dm(e){const t=e.match(om);return t?t[1].replace(lm,"'"):e}const Ce={progression:"#10b981",fatigue:"#ef4444",distribution:"#8b5cf6"},On={contentStyle:{backgroundColor:"#ffffff",borderColor:"#e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",padding:"8px 12px",fontSize:"12px",color:"#374151",border:"1px solid #e5e7eb"}},ii=()=>{const{theme:e}=nl(),t=e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;return{isDarkMode:t,gridOpacity:t?.1:.15,gridColor:"hsl(var(--muted-foreground))",textColor:"hsl(var(--muted-foreground))"}},um=e=>{if(!e||e.length===0)return[];const t=[...new Set(e.map(n=>n.date))].sort();return t.length<2?[]:t.map((n,s)=>{const a=e.filter(g=>g.date===n),i=a.reduce((g,h)=>g+h.weight*h.reps,0);let o=0;if(s>0){const g=t[s-1],h=e.filter(w=>w.date===g),p=a.reduce((w,M)=>w+M.weight,0)/a.length,v=h.reduce((w,M)=>w+M.weight,0)/h.length;v>0&&(o=(p-v)/v*100)}const l=new Date(n),u=new Date(l);u.setDate(u.getDate()-7);const d=e.filter(g=>{const h=new Date(g.date);return h>=u&&h<=l}),c={};d.forEach(g=>{const h=g.date,p=g.weight*g.reps;c[h]=(c[h]||0)+p});const m=Math.max(...Object.values(c),1),f=Math.min(i/m*100,100);return{date:n,progression:Math.max(-50,Math.min(50,parseFloat(o.toFixed(2)))),fatigue:parseFloat(f.toFixed(2))}})},oi=({logs:e})=>{const t=ii(),n=x.useMemo(()=>um(e),[e]);return!n||n.length===0?r.jsxs(A,{className:"chart-card",children:[r.jsxs(H,{className:"pb-3",children:[r.jsx(z,{className:"text-base font-semibold",children:"Fatigue & Progression Over Time"}),r.jsx(Pe,{className:"text-xs",children:"No data available."})]}),r.jsx(L,{className:"pt-0",children:r.jsx("div",{className:"chart-container flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Log workouts to see fatigue and progression over time."})})})]}):r.jsxs(A,{className:"chart-card",children:[r.jsxs(H,{className:"pb-3",children:[r.jsx(z,{className:"text-base font-semibold",children:"Fatigue & Progression Over Time"}),r.jsx(Pe,{className:"text-xs",children:"Daily weight progression and fatigue levels over time."})]}),r.jsx(L,{className:"pt-0",children:r.jsx("div",{className:"chart-container",children:r.jsx(Fn,{width:"100%",height:"100%",children:r.jsxs(su,{data:n,margin:{top:5,right:10,bottom:5,left:0},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"colorProgression",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:Ce.progression,stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:Ce.progression,stopOpacity:0})]}),r.jsxs("linearGradient",{id:"colorFatigue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:Ce.fatigue,stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:Ce.fatigue,stopOpacity:0})]})]}),r.jsx(ja,{vertical:!1,strokeDasharray:"3 3",strokeOpacity:t.gridOpacity,stroke:t.gridColor}),r.jsx(Dn,{dataKey:"date",tickFormatter:s=>ae(new Date(s),"MMM d"),tick:{fontSize:12,fill:t.textColor},tickLine:!1,axisLine:!1,dy:5}),r.jsx(Rn,{unit:"%",tick:{fontSize:12,fill:t.textColor},tickLine:!1,axisLine:!1,dx:-5}),r.jsx(_n,{formatter:(s,a)=>[`${s.toFixed(2)}%`,a==="progression"?"Weight Progression":"Fatigue Level"],labelFormatter:s=>ae(new Date(s),"MMM d, yyyy"),contentStyle:On.contentStyle}),r.jsx(In,{wrapperStyle:{paddingTop:"8px"},formatter:s=>r.jsx("span",{style:{fontSize:"12px"},children:s}),iconSize:12}),r.jsx(Be,{type:"monotone",dataKey:"progression",name:"Progression",stroke:Ce.progression,strokeWidth:2,fillOpacity:.6,fill:"url(#colorProgression)",activeDot:{r:5,strokeWidth:1},animationDuration:1500,animationEasing:"ease-out"}),r.jsx(Be,{type:"monotone",dataKey:"fatigue",name:"Fatigue",stroke:Ce.fatigue,strokeWidth:2,fillOpacity:.6,fill:"url(#colorFatigue)",activeDot:{r:5,strokeWidth:1},animationDuration:1500,animationEasing:"ease-out"})]})})})})]})},mm=({workoutLogs:e,isLoading:t=!1,error:n})=>t?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((s,a)=>r.jsxs(A,{className:"h-[400px]",children:[r.jsx(H,{children:r.jsx(z,{className:"h-4 bg-gray-200 rounded animate-pulse"})}),r.jsx(L,{children:r.jsx("div",{className:"h-[300px] bg-gray-100 rounded animate-pulse"})})]},a))}):n?r.jsx(A,{className:"p-6",children:r.jsx("div",{className:"text-center text-red-600",children:r.jsxs("p",{children:["Error loading charts: ",n]})})}):!e||e.length===0?r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"p-8 text-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[r.jsx("h3",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No Workout Data"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:"Start logging workouts to see your progress charts"})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Workout Analytics Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Track your progression, weight distribution, and fatigue levels over time"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx("div",{children:r.jsx(ci,{logs:e})}),r.jsx("div",{children:r.jsx(li,{logs:e})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx(oi,{logs:e})})]})]}),gm=e=>{if(!e||e.length===0)return[];const t={};let n=0;return e.forEach(s=>{const a=s.muscleGroup||"Unknown",i=s.weight*s.reps;t[a]=(t[a]||0)+i,n+=i}),n===0?Object.keys(t).map(s=>({subject:s,value:0,volume:0,fullMark:100})):Object.entries(t).map(([s,a])=>({subject:s,value:parseFloat((a/n*100).toFixed(2)),volume:a,fullMark:100})).sort((s,a)=>a.value-s.value)},li=({logs:e})=>{const t=gm(e);return t.length===0?r.jsxs(A,{className:"chart-card",children:[r.jsxs(H,{className:"pb-3",children:[r.jsx(z,{className:"text-base font-semibold",children:"Muscle Group Weight Distribution"}),r.jsx(Pe,{className:"text-xs",children:"No data available."})]}),r.jsx(L,{className:"pt-0",children:r.jsx("div",{className:"chart-container flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Log workouts to see weight distribution by muscle group."})})})]}):r.jsxs(A,{className:"chart-card",children:[r.jsxs(H,{className:"pb-3",children:[r.jsx(z,{className:"text-base font-semibold",children:"Muscle Group Weight Distribution"}),r.jsx(Pe,{className:"text-xs",children:"Percentage of total weight (volume) lifted per muscle group (all time)."})]}),r.jsx(L,{className:"pt-0",children:r.jsx("div",{className:"chart-container",children:r.jsx(Fn,{width:"100%",height:"100%",children:r.jsxs(nu,{data:t,children:[r.jsx("defs",{children:r.jsxs("radialGradient",{id:"radarGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[r.jsx("stop",{offset:"0%",stopColor:Ce.distribution,stopOpacity:.9}),r.jsx("stop",{offset:"80%",stopColor:Ce.distribution,stopOpacity:.7})]})}),r.jsx(Wa,{gridType:"circle",stroke:"hsl(var(--muted-foreground))",strokeWidth:1,opacity:.3}),r.jsx(Qt,{dataKey:"subject",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"}}),r.jsx(Xt,{angle:30,domain:[0,"auto"],tickLine:!1,axisLine:!1,tick:{fontSize:11,fill:"hsl(var(--muted-foreground))"}}),r.jsx(_n,{formatter:n=>[`${n}%`,"Weight Distribution"],contentStyle:On.contentStyle}),r.jsx(In,{wrapperStyle:{color:"var(--foreground)"},formatter:n=>r.jsx("span",{style:{color:"var(--foreground)",fontSize:"12px"},children:n})}),r.jsx(Jt,{dataKey:"value",name:"Weight Distribution",fill:"url(#radarGradient)",fillOpacity:.85,stroke:Ce.distribution,strokeWidth:2.5,strokeOpacity:.9})]})})})})]})},fm=e=>!e||e.length===0?[]:[...new Set(e.map(n=>n.muscleGroup))].map(n=>{const s=e.filter(c=>c.muscleGroup===n);if(s.length<2)return{muscleGroup:n,progression:0};const a=s.sort((c,m)=>new Date(c.date).getTime()-new Date(m.date).getTime()),i=a.slice(0,Math.ceil(a.length*.3)),o=a.slice(-Math.ceil(a.length*.3)),l=i.reduce((c,m)=>c+m.weight,0)/i.length,u=o.reduce((c,m)=>c+m.weight,0)/o.length,d=l>0?(u-l)/l*100:0;return{muscleGroup:n,progression:parseFloat(d.toFixed(2))}}).sort((n,s)=>s.progression-n.progression),ci=({logs:e})=>{const t=ii(),n=x.useMemo(()=>fm(e),[e]);return!n||n.length===0?r.jsxs(A,{className:"chart-card",children:[r.jsxs(H,{className:"pb-3",children:[r.jsx(z,{className:"text-base font-semibold",children:"Weight Progression by Muscle Group"}),r.jsx(Pe,{className:"text-xs",children:"No data available."})]}),r.jsx(L,{className:"pt-0",children:r.jsx("div",{className:"chart-container flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Log workouts to see muscle group weight progression."})})})]}):r.jsxs(A,{className:"chart-card",children:[r.jsxs(H,{className:"pb-3",children:[r.jsx(z,{className:"text-base font-semibold",children:"Weight Progression by Muscle Group"}),r.jsx(Pe,{className:"text-xs",children:"Average weight progression for each muscle group over time."})]}),r.jsx(L,{className:"pt-0",children:r.jsx("div",{className:"chart-container",children:r.jsx(Fn,{width:"110%",height:"100%",children:r.jsxs(yl,{data:n,margin:{top:20,right:30,left:0,bottom:40},children:[r.jsx(ja,{vertical:!1,strokeDasharray:"3 3",strokeOpacity:t.gridOpacity,stroke:t.gridColor}),r.jsx(Dn,{dataKey:"muscleGroup",tick:{fontSize:12,fill:t.textColor},tickLine:!1,axisLine:!1,angle:-45,textAnchor:"end",height:60,interval:0}),r.jsx(Rn,{unit:"%",tick:{fontSize:12,fill:t.textColor},tickLine:!1,axisLine:!1}),r.jsx(_n,{formatter:s=>[`${s.toFixed(2)}%`,"Weight Progression"],contentStyle:On.contentStyle}),r.jsx(In,{wrapperStyle:{paddingTop:"8px"},formatter:s=>r.jsx("span",{style:{fontSize:"12px"},children:s}),iconSize:12}),r.jsx(wl,{dataKey:"progression",name:"Weight Progression Rate",radius:[4,4,0,0],barSize:30,animationDuration:1500,animationEasing:"ease-out",children:n.map((s,a)=>r.jsx(jl,{fill:s.progression>0?Ce.progression:Ce.fatigue},`cell-${a}`))})]})})})})]})},hm=()=>{const{workoutLogs:e,isLoading:t,error:n}=Re();return t?r.jsxs(A,{className:"h-[400px]",children:[r.jsx(H,{children:r.jsx(z,{className:"h-4 bg-gray-200 rounded animate-pulse"})}),r.jsx(L,{children:r.jsx("div",{className:"h-[300px] bg-gray-100 rounded animate-pulse"})})]}):n?r.jsx(A,{className:"p-6",children:r.jsx("div",{className:"text-center text-red-600",children:r.jsxs("p",{children:["Error loading progression chart: ",n]})})}):!e||e.length===0?r.jsx(A,{className:"p-8",children:r.jsxs("div",{className:"text-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[r.jsx("h3",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No Progression Data"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:"Start logging workouts to see your progression by muscle group"})]})}):r.jsx(ci,{logs:e})},pm=()=>{const{workoutLogs:e,isLoading:t,error:n}=Re();return t?r.jsxs(A,{className:"h-[400px]",children:[r.jsx(H,{children:r.jsx(z,{className:"h-4 bg-gray-200 rounded animate-pulse"})}),r.jsx(L,{children:r.jsx("div",{className:"h-[300px] bg-gray-100 rounded animate-pulse"})})]}):n?r.jsx(A,{className:"p-6",children:r.jsx("div",{className:"text-center text-red-600",children:r.jsxs("p",{children:["Error loading volume chart: ",n]})})}):!e||e.length===0?r.jsx(A,{className:"p-8",children:r.jsxs("div",{className:"text-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[r.jsx("h3",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No Volume Data"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:"Start logging workouts to see muscle group volume distribution"})]})}):r.jsx(li,{logs:e})},xm=()=>{const{workoutLogs:e,isLoading:t,error:n}=Re();return t?r.jsxs(A,{className:"h-[400px]",children:[r.jsx(H,{children:r.jsx(z,{className:"h-4 bg-gray-200 rounded animate-pulse"})}),r.jsx(L,{children:r.jsx("div",{className:"h-[300px] bg-gray-100 rounded animate-pulse"})})]}):n?r.jsx(A,{className:"p-6",children:r.jsx("div",{className:"text-center text-red-600",children:r.jsxs("p",{children:["Error loading fatigue chart: ",n]})})}):!e||e.length===0?r.jsx(A,{className:"p-8",children:r.jsxs("div",{className:"text-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[r.jsx("h3",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No Fatigue Data"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:"Start logging workouts to see fatigue progression over time"})]})}):r.jsx(oi,{logs:e})},vm=()=>{const e=()=>{window.dispatchEvent(new Event("open-add-workout-modal"))};return r.jsx(A,{className:"transition-all hover:shadow-md hover:translate-y-[-2px] duration-300 cursor-pointer",onClick:e,children:r.jsx(L,{className:"p-5",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:r.jsx(Ea,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"New Workout"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Start tracking now"})]})]})})})},ym=()=>{const e=()=>{console.log("Navigate to analytics")};return r.jsx(A,{className:"transition-all hover:shadow-md hover:translate-y-[-2px] duration-300 cursor-pointer",onClick:e,children:r.jsx(L,{className:"p-5",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-accent-light flex items-center justify-center text-accent",children:r.jsx(Wl,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Analytics"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"View detailed stats"})]})]})})})},wm=()=>{const e=()=>{console.log("Navigate to set goals")};return r.jsx(A,{className:"transition-all hover:shadow-md hover:translate-y-[-2px] duration-300 cursor-pointer",onClick:e,children:r.jsx(L,{className:"p-5",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-secondary/20 flex items-center justify-center text-foreground",children:r.jsx(we,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Set Goals"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your targets"})]})]})})})};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function di(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Ye(e,t){return typeof e=="function"?e(t):e}function ve(e,t){return n=>{t.setState(s=>({...s,[e]:Ye(n,s[e])}))}}function _r(e){return e instanceof Function}function jm(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function bm(e,t){const n=[],s=a=>{a.forEach(i=>{n.push(i);const o=t(i);o!=null&&o.length&&s(o)})};return s(e),n}function $(e,t,n){let s=[],a;return i=>{let o;n.key&&n.debug&&(o=Date.now());const l=e(i);if(!(l.length!==s.length||l.some((c,m)=>s[m]!==c)))return a;s=l;let d;if(n.key&&n.debug&&(d=Date.now()),a=t(...l),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,m=Math.round((Date.now()-d)*100)/100,f=m/16,g=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%c ${g(m,5)} /${g(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return a}}function V(e,t,n,s){return{debug:()=>{var a;return(a=e==null?void 0:e.debugAll)!=null?a:e[t]},key:!1,onChange:s}}function Sm(e,t,n,s){const a=()=>{var o;return(o=i.getValue())!=null?o:e.options.renderFallbackValue},i={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(s),renderValue:a,getContext:$(()=>[e,n,t,i],(o,l,u,d)=>({table:o,column:l,row:u,cell:d,getValue:d.getValue,renderValue:d.renderValue}),V(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(i,n,t,e)},{}),i}function Nm(e,t,n,s){var a,i;const l={...e._getDefaultColumnDef(),...t},u=l.accessorKey;let d=(a=(i=l.id)!=null?i:u?typeof String.prototype.replaceAll=="function"?u.replaceAll(".","_"):u.replace(/\./g,"_"):void 0)!=null?a:typeof l.header=="string"?l.header:void 0,c;if(l.accessorFn?c=l.accessorFn:u&&(u.includes(".")?c=f=>{let g=f;for(const p of u.split(".")){var h;g=(h=g)==null?void 0:h[p]}return g}:c=f=>f[l.accessorKey]),!d)throw new Error;let m={id:`${String(d)}`,accessorFn:c,parent:s,depth:n,columnDef:l,columns:[],getFlatColumns:$(()=>[!0],()=>{var f;return[m,...(f=m.columns)==null?void 0:f.flatMap(g=>g.getFlatColumns())]},V(e.options,"debugColumns")),getLeafColumns:$(()=>[e._getOrderColumnsFn()],f=>{var g;if((g=m.columns)!=null&&g.length){let h=m.columns.flatMap(p=>p.getLeafColumns());return f(h)}return[m]},V(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(m,e);return m}const ue="debugHeaders";function Ls(e,t,n){var s;let i={id:(s=n.id)!=null?s:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],l=u=>{u.subHeaders&&u.subHeaders.length&&u.subHeaders.map(l),o.push(u)};return l(i),o},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(i,e)}),i}const Cm={createTable:e=>{e.getHeaderGroups=$(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>{var i,o;const l=(i=s==null?void 0:s.map(m=>n.find(f=>f.id===m)).filter(Boolean))!=null?i:[],u=(o=a==null?void 0:a.map(m=>n.find(f=>f.id===m)).filter(Boolean))!=null?o:[],d=n.filter(m=>!(s!=null&&s.includes(m.id))&&!(a!=null&&a.includes(m.id)));return nr(t,[...l,...d,...u],e)},V(e.options,ue)),e.getCenterHeaderGroups=$(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>(n=n.filter(i=>!(s!=null&&s.includes(i.id))&&!(a!=null&&a.includes(i.id))),nr(t,n,e,"center")),V(e.options,ue)),e.getLeftHeaderGroups=$(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,s)=>{var a;const i=(a=s==null?void 0:s.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?a:[];return nr(t,i,e,"left")},V(e.options,ue)),e.getRightHeaderGroups=$(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,s)=>{var a;const i=(a=s==null?void 0:s.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?a:[];return nr(t,i,e,"right")},V(e.options,ue)),e.getFooterGroups=$(()=>[e.getHeaderGroups()],t=>[...t].reverse(),V(e.options,ue)),e.getLeftFooterGroups=$(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),V(e.options,ue)),e.getCenterFooterGroups=$(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),V(e.options,ue)),e.getRightFooterGroups=$(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),V(e.options,ue)),e.getFlatHeaders=$(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),V(e.options,ue)),e.getLeftFlatHeaders=$(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),V(e.options,ue)),e.getCenterFlatHeaders=$(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),V(e.options,ue)),e.getRightFlatHeaders=$(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),V(e.options,ue)),e.getCenterLeafHeaders=$(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),V(e.options,ue)),e.getLeftLeafHeaders=$(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),V(e.options,ue)),e.getRightLeafHeaders=$(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),V(e.options,ue)),e.getLeafHeaders=$(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,s)=>{var a,i,o,l,u,d;return[...(a=(i=t[0])==null?void 0:i.headers)!=null?a:[],...(o=(l=n[0])==null?void 0:l.headers)!=null?o:[],...(u=(d=s[0])==null?void 0:d.headers)!=null?u:[]].map(c=>c.getLeafHeaders()).flat()},V(e.options,ue))}};function nr(e,t,n,s){var a,i;let o=0;const l=function(f,g){g===void 0&&(g=1),o=Math.max(o,g),f.filter(h=>h.getIsVisible()).forEach(h=>{var p;(p=h.columns)!=null&&p.length&&l(h.columns,g+1)},0)};l(e);let u=[];const d=(f,g)=>{const h={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},p=[];f.forEach(v=>{const w=[...p].reverse()[0],M=v.column.depth===h.depth;let y,j=!1;if(M&&v.column.parent?y=v.column.parent:(y=v.column,j=!0),w&&(w==null?void 0:w.column)===y)w.subHeaders.push(v);else{const N=Ls(n,y,{id:[s,g,y.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${p.filter(P=>P.column===y).length}`:void 0,depth:g,index:p.length});N.subHeaders.push(v),p.push(N)}h.headers.push(v),v.headerGroup=h}),u.push(h),g>0&&d(p,g-1)},c=t.map((f,g)=>Ls(n,f,{depth:o,index:g}));d(c,o-1),u.reverse();const m=f=>f.filter(h=>h.column.getIsVisible()).map(h=>{let p=0,v=0,w=[0];h.subHeaders&&h.subHeaders.length?(w=[],m(h.subHeaders).forEach(y=>{let{colSpan:j,rowSpan:N}=y;p+=j,w.push(N)})):p=1;const M=Math.min(...w);return v=v+M,h.colSpan=p,h.rowSpan=v,{colSpan:p,rowSpan:v}});return m((a=(i=u[0])==null?void 0:i.headers)!=null?a:[]),u}const Ln=(e,t,n,s,a,i,o)=>{let l={id:t,index:s,original:n,depth:a,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:u=>{if(l._valuesCache.hasOwnProperty(u))return l._valuesCache[u];const d=e.getColumn(u);if(d!=null&&d.accessorFn)return l._valuesCache[u]=d.accessorFn(l.original,s),l._valuesCache[u]},getUniqueValues:u=>{if(l._uniqueValuesCache.hasOwnProperty(u))return l._uniqueValuesCache[u];const d=e.getColumn(u);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(l._uniqueValuesCache[u]=d.columnDef.getUniqueValues(l.original,s),l._uniqueValuesCache[u]):(l._uniqueValuesCache[u]=[l.getValue(u)],l._uniqueValuesCache[u])},renderValue:u=>{var d;return(d=l.getValue(u))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>bm(l.subRows,u=>u.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let u=[],d=l;for(;;){const c=d.getParentRow();if(!c)break;u.push(c),d=c}return u.reverse()},getAllCells:$(()=>[e.getAllLeafColumns()],u=>u.map(d=>Sm(e,l,d,d.id)),V(e.options,"debugRows")),_getAllCellsByColumnId:$(()=>[l.getAllCells()],u=>u.reduce((d,c)=>(d[c.column.id]=c,d),{}),V(e.options,"debugRows"))};for(let u=0;u<e._features.length;u++){const d=e._features[u];d==null||d.createRow==null||d.createRow(l,e)}return l},Pm={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},ui=(e,t,n)=>{var s,a;const i=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=e.getValue(t))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(i))};ui.autoRemove=e=>ke(e);const mi=(e,t,n)=>{var s;return!!(!((s=e.getValue(t))==null||(s=s.toString())==null)&&s.includes(n))};mi.autoRemove=e=>ke(e);const gi=(e,t,n)=>{var s;return((s=e.getValue(t))==null||(s=s.toString())==null?void 0:s.toLowerCase())===(n==null?void 0:n.toLowerCase())};gi.autoRemove=e=>ke(e);const fi=(e,t,n)=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(n)};fi.autoRemove=e=>ke(e);const hi=(e,t,n)=>!n.some(s=>{var a;return!((a=e.getValue(t))!=null&&a.includes(s))});hi.autoRemove=e=>ke(e)||!(e!=null&&e.length);const pi=(e,t,n)=>n.some(s=>{var a;return(a=e.getValue(t))==null?void 0:a.includes(s)});pi.autoRemove=e=>ke(e)||!(e!=null&&e.length);const xi=(e,t,n)=>e.getValue(t)===n;xi.autoRemove=e=>ke(e);const vi=(e,t,n)=>e.getValue(t)==n;vi.autoRemove=e=>ke(e);const $n=(e,t,n)=>{let[s,a]=n;const i=e.getValue(t);return i>=s&&i<=a};$n.resolveFilterValue=e=>{let[t,n]=e,s=typeof t!="number"?parseFloat(t):t,a=typeof n!="number"?parseFloat(n):n,i=t===null||Number.isNaN(s)?-1/0:s,o=n===null||Number.isNaN(a)?1/0:a;if(i>o){const l=i;i=o,o=l}return[i,o]};$n.autoRemove=e=>ke(e)||ke(e[0])&&ke(e[1]);const Oe={includesString:ui,includesStringSensitive:mi,equalsString:gi,arrIncludes:fi,arrIncludesAll:hi,arrIncludesSome:pi,equals:xi,weakEquals:vi,inNumberRange:$n};function ke(e){return e==null||e===""}const Mm={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ve("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);return typeof s=="string"?Oe.includesString:typeof s=="number"?Oe.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?Oe.equals:Array.isArray(s)?Oe.arrIncludes:Oe.weakEquals},e.getFilterFn=()=>{var n,s;return _r(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(s=t.options.filterFns)==null?void 0:s[e.columnDef.filterFn])!=null?n:Oe[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,s,a;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((s=t.options.enableColumnFilters)!=null?s:!0)&&((a=t.options.enableFilters)!=null?a:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(s=>s.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,s;return(n=(s=t.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(s=>{const a=e.getFilterFn(),i=s==null?void 0:s.find(c=>c.id===e.id),o=Ye(n,i?i.value:void 0);if($s(a,o,e)){var l;return(l=s==null?void 0:s.filter(c=>c.id!==e.id))!=null?l:[]}const u={id:e.id,value:o};if(i){var d;return(d=s==null?void 0:s.map(c=>c.id===e.id?u:c))!=null?d:[]}return s!=null&&s.length?[...s,u]:[u]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),s=a=>{var i;return(i=Ye(t,a))==null?void 0:i.filter(o=>{const l=n.find(u=>u.id===o.id);if(l){const u=l.getFilterFn();if($s(u,o.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(s)},e.resetColumnFilters=t=>{var n,s;e.setColumnFilters(t?[]:(n=(s=e.initialState)==null?void 0:s.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function $s(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const km=(e,t,n)=>n.reduce((s,a)=>{const i=a.getValue(e);return s+(typeof i=="number"?i:0)},0),Dm=(e,t,n)=>{let s;return n.forEach(a=>{const i=a.getValue(e);i!=null&&(s>i||s===void 0&&i>=i)&&(s=i)}),s},Rm=(e,t,n)=>{let s;return n.forEach(a=>{const i=a.getValue(e);i!=null&&(s<i||s===void 0&&i>=i)&&(s=i)}),s},Fm=(e,t,n)=>{let s,a;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(s===void 0?o>=o&&(s=a=o):(s>o&&(s=o),a<o&&(a=o)))}),[s,a]},_m=(e,t)=>{let n=0,s=0;if(t.forEach(a=>{let i=a.getValue(e);i!=null&&(i=+i)>=i&&(++n,s+=i)}),n)return s/n},Im=(e,t)=>{if(!t.length)return;const n=t.map(i=>i.getValue(e));if(!jm(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((i,o)=>i-o);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},Em=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Am=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Tm=(e,t)=>t.length,zr={sum:km,min:Dm,max:Rm,extent:Fm,mean:_m,median:Im,unique:Em,uniqueCount:Am,count:Tm},Om={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ve("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(s=>s!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,s;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((s=t.options.enableGrouping)!=null?s:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);if(typeof s=="number")return zr.sum;if(Object.prototype.toString.call(s)==="[object Date]")return zr.extent},e.getAggregationFn=()=>{var n,s;if(!e)throw new Error;return _r(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(s=t.options.aggregationFns)==null?void 0:s[e.columnDef.aggregationFn])!=null?n:zr[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,s;e.setGrouping(t?[]:(n=(s=e.initialState)==null?void 0:s.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const s=t.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(e._groupingValuesCache[n]=s.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,s)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var a;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function Lm(e,t,n){if(!(t!=null&&t.length)||!n)return e;const s=e.filter(i=>!t.includes(i.id));return n==="remove"?s:[...t.map(i=>e.find(o=>o.id===i)).filter(Boolean),...s]}const $m={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ve("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=$(n=>[zt(t,n)],n=>n.findIndex(s=>s.id===e.id),V(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var s;return((s=zt(t,n)[0])==null?void 0:s.id)===e.id},e.getIsLastColumn=n=>{var s;const a=zt(t,n);return((s=a[a.length-1])==null?void 0:s.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=$(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,s)=>a=>{let i=[];if(!(t!=null&&t.length))i=a;else{const o=[...t],l=[...a];for(;l.length&&o.length;){const u=o.shift(),d=l.findIndex(c=>c.id===u);d>-1&&i.push(l.splice(d,1)[0])}i=[...i,...l]}return Lm(i,n,s)},V(e.options,"debugTable"))}},Gr=()=>({left:[],right:[]}),Vm={getInitialState:e=>({columnPinning:Gr(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ve("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const s=e.getLeafColumns().map(a=>a.id).filter(Boolean);t.setColumnPinning(a=>{var i,o;if(n==="right"){var l,u;return{left:((l=a==null?void 0:a.left)!=null?l:[]).filter(m=>!(s!=null&&s.includes(m))),right:[...((u=a==null?void 0:a.right)!=null?u:[]).filter(m=>!(s!=null&&s.includes(m))),...s]}}if(n==="left"){var d,c;return{left:[...((d=a==null?void 0:a.left)!=null?d:[]).filter(m=>!(s!=null&&s.includes(m))),...s],right:((c=a==null?void 0:a.right)!=null?c:[]).filter(m=>!(s!=null&&s.includes(m)))}}return{left:((i=a==null?void 0:a.left)!=null?i:[]).filter(m=>!(s!=null&&s.includes(m))),right:((o=a==null?void 0:a.right)!=null?o:[]).filter(m=>!(s!=null&&s.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(s=>{var a,i,o;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((i=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:s,right:a}=t.getState().columnPinning,i=n.some(l=>s==null?void 0:s.includes(l)),o=n.some(l=>a==null?void 0:a.includes(l));return i?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();return a?(n=(s=t.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=$(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,s,a)=>{const i=[...s??[],...a??[]];return n.filter(o=>!i.includes(o.column.id))},V(t.options,"debugRows")),e.getLeftVisibleCells=$(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,s)=>(s??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),V(t.options,"debugRows")),e.getRightVisibleCells=$(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,s)=>(s??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),V(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,s;return e.setColumnPinning(t?Gr():(n=(s=e.initialState)==null?void 0:s.columnPinning)!=null?n:Gr())},e.getIsSomeColumnsPinned=t=>{var n;const s=e.getState().columnPinning;if(!t){var a,i;return!!((a=s.left)!=null&&a.length||(i=s.right)!=null&&i.length)}return!!((n=s[t])!=null&&n.length)},e.getLeftLeafColumns=$(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(s=>t.find(a=>a.id===s)).filter(Boolean),V(e.options,"debugColumns")),e.getRightLeafColumns=$(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(s=>t.find(a=>a.id===s)).filter(Boolean),V(e.options,"debugColumns")),e.getCenterLeafColumns=$(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const a=[...n??[],...s??[]];return t.filter(i=>!a.includes(i.id))},V(e.options,"debugColumns"))}};function Bm(e){return e||(typeof document<"u"?document:null)}const sr={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Wr=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Hm={getDefaultColumnDef:()=>sr,getInitialState:e=>({columnSizing:{},columnSizingInfo:Wr(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ve("columnSizing",e),onColumnSizingInfoChange:ve("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,s,a;const i=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:sr.minSize,(s=i??e.columnDef.size)!=null?s:sr.size),(a=e.columnDef.maxSize)!=null?a:sr.maxSize)},e.getStart=$(n=>[n,zt(t,n),t.getState().columnSizing],(n,s)=>s.slice(0,e.getIndex(n)).reduce((a,i)=>a+i.getSize(),0),V(t.options,"debugColumns")),e.getAfter=$(n=>[n,zt(t,n),t.getState().columnSizing],(n,s)=>s.slice(e.getIndex(n)+1).reduce((a,i)=>a+i.getSize(),0),V(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:s,...a}=n;return a})},e.getCanResize=()=>{var n,s;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((s=t.options.enableColumnResizing)!=null?s:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var i;n+=(i=a.column.getSize())!=null?i:0}};return s(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const s=t.getColumn(e.column.id),a=s==null?void 0:s.getCanResize();return i=>{if(!s||!a||(i.persist==null||i.persist(),Ur(i)&&i.touches&&i.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(w=>[w.column.id,w.column.getSize()]):[[s.id,s.getSize()]],u=Ur(i)?Math.round(i.touches[0].clientX):i.clientX,d={},c=(w,M)=>{typeof M=="number"&&(t.setColumnSizingInfo(y=>{var j,N;const P=t.options.columnResizeDirection==="rtl"?-1:1,b=(M-((j=y==null?void 0:y.startOffset)!=null?j:0))*P,F=Math.max(b/((N=y==null?void 0:y.startSize)!=null?N:0),-.999999);return y.columnSizingStart.forEach(W=>{let[E,C]=W;d[E]=Math.round(Math.max(C+C*F,0)*100)/100}),{...y,deltaOffset:b,deltaPercentage:F}}),(t.options.columnResizeMode==="onChange"||w==="end")&&t.setColumnSizing(y=>({...y,...d})))},m=w=>c("move",w),f=w=>{c("end",w),t.setColumnSizingInfo(M=>({...M,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=Bm(n),h={moveHandler:w=>m(w.clientX),upHandler:w=>{g==null||g.removeEventListener("mousemove",h.moveHandler),g==null||g.removeEventListener("mouseup",h.upHandler),f(w.clientX)}},p={moveHandler:w=>(w.cancelable&&(w.preventDefault(),w.stopPropagation()),m(w.touches[0].clientX),!1),upHandler:w=>{var M;g==null||g.removeEventListener("touchmove",p.moveHandler),g==null||g.removeEventListener("touchend",p.upHandler),w.cancelable&&(w.preventDefault(),w.stopPropagation()),f((M=w.touches[0])==null?void 0:M.clientX)}},v=zm()?{passive:!1}:!1;Ur(i)?(g==null||g.addEventListener("touchmove",p.moveHandler,v),g==null||g.addEventListener("touchend",p.upHandler,v)):(g==null||g.addEventListener("mousemove",h.moveHandler,v),g==null||g.addEventListener("mouseup",h.upHandler,v)),t.setColumnSizingInfo(w=>({...w,startOffset:u,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:s.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Wr():(n=e.initialState.columnSizingInfo)!=null?n:Wr())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0}}};let ar=null;function zm(){if(typeof ar=="boolean")return ar;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return ar=e,ar}function Ur(e){return e.type==="touchstart"}const Gm={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ve("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(s=>({...s,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,s;const a=e.columns;return(n=a.length?a.some(i=>i.getIsVisible()):(s=t.getState().columnVisibility)==null?void 0:s[e.id])!=null?n:!0},e.getCanHide=()=>{var n,s;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((s=t.options.enableHiding)!=null?s:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=$(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),V(t.options,"debugRows")),e.getVisibleCells=$(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],V(t.options,"debugRows"))},createTable:e=>{const t=(n,s)=>$(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),V(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var s;e.setColumnVisibility(n?{}:(s=e.initialState.columnVisibility)!=null?s:{})},e.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((a,i)=>({...a,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;e.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function zt(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Wm={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Um={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ve("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const s=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,s,a,i;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=t.options.enableGlobalFilter)!=null?s:!0)&&((a=t.options.enableFilters)!=null?a:!0)&&((i=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Oe.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:s}=e.options;return _r(s)?s:s==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[s])!=null?t:Oe[s]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},qm={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ve("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var s,a;if(!t){e._queue(()=>{t=!0});return}if((s=(a=e.options.autoResetAll)!=null?a:e.options.autoResetExpanded)!=null?s:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=s=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(s),e.toggleAllRowsExpanded=s=>{s??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=s=>{var a,i;e.setExpanded(s?{}:(a=(i=e.initialState)==null?void 0:i.expanded)!=null?a:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const s=e.getState().expanded;return s===!0||Object.values(s).some(Boolean)},e.getIsAllRowsExpanded=()=>{const s=e.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||e.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},e.getExpandedDepth=()=>{let s=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const o=i.split(".");s=Math.max(s,o.length)}),s},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(s=>{var a;const i=s===!0?!0:!!(s!=null&&s[e.id]);let o={};if(s===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{o[l]=!0}):o=s,n=(a=n)!=null?a:!i,!i&&n)return{...o,[e.id]:!0};if(i&&!n){const{[e.id]:l,...u}=o;return u}return s})},e.getIsExpanded=()=>{var n;const s=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:s===!0||s!=null&&s[e.id])},e.getCanExpand=()=>{var n,s,a;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((s=t.options.enableExpanding)!=null?s:!0)&&!!((a=e.subRows)!=null&&a.length)},e.getIsAllParentsExpanded=()=>{let n=!0,s=e;for(;n&&s.parentId;)s=t.getRow(s.parentId,!0),n=s.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},pn=0,xn=10,qr=()=>({pageIndex:pn,pageSize:xn}),Ym={getInitialState:e=>({...e,pagination:{...qr(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ve("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var s,a;if(!t){e._queue(()=>{t=!0});return}if((s=(a=e.options.autoResetAll)!=null?a:e.options.autoResetPageIndex)!=null?s:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=s=>{const a=i=>Ye(s,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(a)},e.resetPagination=s=>{var a;e.setPagination(s?qr():(a=e.initialState.pagination)!=null?a:qr())},e.setPageIndex=s=>{e.setPagination(a=>{let i=Ye(s,a.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...a,pageIndex:i}})},e.resetPageIndex=s=>{var a,i;e.setPageIndex(s?pn:(a=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?a:pn)},e.resetPageSize=s=>{var a,i;e.setPageSize(s?xn:(a=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?a:xn)},e.setPageSize=s=>{e.setPagination(a=>{const i=Math.max(1,Ye(s,a.pageSize)),o=a.pageSize*a.pageIndex,l=Math.floor(o/i);return{...a,pageIndex:l,pageSize:i}})},e.setPageCount=s=>e.setPagination(a=>{var i;let o=Ye(s,(i=e.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),e.getPageOptions=$(()=>[e.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((i,o)=>o)),a},V(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:s}=e.getState().pagination,a=e.getPageCount();return a===-1?!0:a===0?!1:s<a-1},e.previousPage=()=>e.setPageIndex(s=>s-1),e.nextPage=()=>e.setPageIndex(s=>s+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var s;return(s=e.options.pageCount)!=null?s:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var s;return(s=e.options.rowCount)!=null?s:e.getPrePaginationRowModel().rows.length}}},Yr=()=>({top:[],bottom:[]}),Km={getInitialState:e=>({rowPinning:Yr(),...e}),getDefaultOptions:e=>({onRowPinningChange:ve("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,s,a)=>{const i=s?e.getLeafRows().map(u=>{let{id:d}=u;return d}):[],o=a?e.getParentRows().map(u=>{let{id:d}=u;return d}):[],l=new Set([...o,e.id,...i]);t.setRowPinning(u=>{var d,c;if(n==="bottom"){var m,f;return{top:((m=u==null?void 0:u.top)!=null?m:[]).filter(p=>!(l!=null&&l.has(p))),bottom:[...((f=u==null?void 0:u.bottom)!=null?f:[]).filter(p=>!(l!=null&&l.has(p))),...Array.from(l)]}}if(n==="top"){var g,h;return{top:[...((g=u==null?void 0:u.top)!=null?g:[]).filter(p=>!(l!=null&&l.has(p))),...Array.from(l)],bottom:((h=u==null?void 0:u.bottom)!=null?h:[]).filter(p=>!(l!=null&&l.has(p)))}}return{top:((d=u==null?void 0:u.top)!=null?d:[]).filter(p=>!(l!=null&&l.has(p))),bottom:((c=u==null?void 0:u.bottom)!=null?c:[]).filter(p=>!(l!=null&&l.has(p)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=t.options;return typeof s=="function"?s(e):(n=s??a)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:s,bottom:a}=t.getState().rowPinning,i=n.some(l=>s==null?void 0:s.includes(l)),o=n.some(l=>a==null?void 0:a.includes(l));return i?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();if(!a)return-1;const i=(n=a==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:l}=o;return l});return(s=i==null?void 0:i.indexOf(e.id))!=null?s:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,s;return e.setRowPinning(t?Yr():(n=(s=e.initialState)==null?void 0:s.rowPinning)!=null?n:Yr())},e.getIsSomeRowsPinned=t=>{var n;const s=e.getState().rowPinning;if(!t){var a,i;return!!((a=s.top)!=null&&a.length||(i=s.bottom)!=null&&i.length)}return!!((n=s[t])!=null&&n.length)},e._getPinnedRows=(t,n,s)=>{var a;return((a=e.options.keepPinnedRows)==null||a?(n??[]).map(o=>{const l=e.getRow(o,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(o=>t.find(l=>l.id===o))).filter(Boolean).map(o=>({...o,position:s}))},e.getTopRows=$(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),V(e.options,"debugRows")),e.getBottomRows=$(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),V(e.options,"debugRows")),e.getCenterRows=$(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,s)=>{const a=new Set([...n??[],...s??[]]);return t.filter(i=>!a.has(i.id))},V(e.options,"debugRows"))}},Xm={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ve("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const s={...n},a=e.getPreGroupedRowModel().flatRows;return t?a.forEach(i=>{i.getCanSelect()&&(s[i.id]=!0)}):a.forEach(i=>{delete s[i.id]}),s})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const s=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),a={...n};return e.getRowModel().rows.forEach(i=>{vn(a,i.id,s,!0,e)}),a}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=$(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Kr(e,n):{rows:[],flatRows:[],rowsById:{}},V(e.options,"debugTable")),e.getFilteredSelectedRowModel=$(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Kr(e,n):{rows:[],flatRows:[],rowsById:{}},V(e.options,"debugTable")),e.getGroupedSelectedRowModel=$(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Kr(e,n):{rows:[],flatRows:[],rowsById:{}},V(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let s=!!(t.length&&Object.keys(n).length);return s&&t.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=e.getState();let s=!!t.length;return s&&t.some(a=>!n[a.id])&&(s=!1),s},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,s)=>{const a=e.getIsSelected();t.setRowSelection(i=>{var o;if(n=typeof n<"u"?n:!a,e.getCanSelect()&&a===n)return i;const l={...i};return vn(l,e.id,n,(o=s==null?void 0:s.selectChildren)!=null?o:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Vn(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return yn(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return yn(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return s=>{var a;n&&e.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},vn=(e,t,n,s,a)=>{var i;const o=a.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[t]=!0)):delete e[t],s&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>vn(e,l.id,n,s,a))};function Kr(e,t){const n=e.getState().rowSelection,s=[],a={},i=function(o,l){return o.map(u=>{var d;const c=Vn(u,n);if(c&&(s.push(u),a[u.id]=u),(d=u.subRows)!=null&&d.length&&(u={...u,subRows:i(u.subRows)}),c)return u}).filter(Boolean)};return{rows:i(t.rows),flatRows:s,rowsById:a}}function Vn(e,t){var n;return(n=t[e.id])!=null?n:!1}function yn(e,t,n){var s;if(!((s=e.subRows)!=null&&s.length))return!1;let a=!0,i=!1;return e.subRows.forEach(o=>{if(!(i&&!a)&&(o.getCanSelect()&&(Vn(o,t)?i=!0:a=!1),o.subRows&&o.subRows.length)){const l=yn(o,t);l==="all"?i=!0:(l==="some"&&(i=!0),a=!1)}}),a?"all":i?"some":!1}const wn=/([0-9]+)/gm,Qm=(e,t,n)=>yi(Ze(e.getValue(n)).toLowerCase(),Ze(t.getValue(n)).toLowerCase()),Jm=(e,t,n)=>yi(Ze(e.getValue(n)),Ze(t.getValue(n))),Zm=(e,t,n)=>Bn(Ze(e.getValue(n)).toLowerCase(),Ze(t.getValue(n)).toLowerCase()),eg=(e,t,n)=>Bn(Ze(e.getValue(n)),Ze(t.getValue(n))),tg=(e,t,n)=>{const s=e.getValue(n),a=t.getValue(n);return s>a?1:s<a?-1:0},rg=(e,t,n)=>Bn(e.getValue(n),t.getValue(n));function Bn(e,t){return e===t?0:e>t?1:-1}function Ze(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function yi(e,t){const n=e.split(wn).filter(Boolean),s=t.split(wn).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),i=s.shift(),o=parseInt(a,10),l=parseInt(i,10),u=[o,l].sort();if(isNaN(u[0])){if(a>i)return 1;if(i>a)return-1;continue}if(isNaN(u[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}return n.length-s.length}const Ot={alphanumeric:Qm,alphanumericCaseSensitive:Jm,text:Zm,textCaseSensitive:eg,datetime:tg,basic:rg},ng={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ve("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const i=a==null?void 0:a.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return Ot.datetime;if(typeof i=="string"&&(s=!0,i.split(wn).length>1))return Ot.alphanumeric}return s?Ot.text:Ot.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,s;if(!e)throw new Error;return _r(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(s=t.options.sortingFns)==null?void 0:s[e.columnDef.sortingFn])!=null?n:Ot[e.columnDef.sortingFn]},e.toggleSorting=(n,s)=>{const a=e.getNextSortingOrder(),i=typeof n<"u"&&n!==null;t.setSorting(o=>{const l=o==null?void 0:o.find(g=>g.id===e.id),u=o==null?void 0:o.findIndex(g=>g.id===e.id);let d=[],c,m=i?n:a==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&s?l?c="toggle":c="add":o!=null&&o.length&&u!==o.length-1?c="replace":l?c="toggle":c="replace",c==="toggle"&&(i||a||(c="remove")),c==="add"){var f;d=[...o,{id:e.id,desc:m}],d.splice(0,d.length-((f=t.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?d=o.map(g=>g.id===e.id?{...g,desc:m}:g):c==="remove"?d=o.filter(g=>g.id!==e.id):d=[{id:e.id,desc:m}];return d})},e.getFirstSortDir=()=>{var n,s;return((n=(s=e.columnDef.sortDescFirst)!=null?s:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var s,a;const i=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==i&&((s=t.options.enableSortingRemoval)==null||s)&&(!(n&&(a=t.options.enableMultiRemove)!=null)||a)?!1:o==="desc"?"asc":"desc":i},e.getCanSort=()=>{var n,s;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((s=t.options.enableSorting)!=null?s:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,s;return(n=(s=e.columnDef.enableMultiSort)!=null?s:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const s=(n=t.getState().sorting)==null?void 0:n.find(a=>a.id===e.id);return s?s.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,s;return(n=(s=t.getState().sorting)==null?void 0:s.findIndex(a=>a.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return s=>{n&&(s.persist==null||s.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(s):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,s;e.setSorting(t?[]:(n=(s=e.initialState)==null?void 0:s.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},sg=[Cm,Gm,$m,Vm,Pm,Mm,Wm,Um,ng,Om,qm,Ym,Km,Xm,Hm];function ag(e){var t,n;const s=[...sg,...(t=e._features)!=null?t:[]];let a={_features:s};const i=a._features.reduce((f,g)=>Object.assign(f,g.getDefaultOptions==null?void 0:g.getDefaultOptions(a)),{}),o=f=>a.options.mergeOptions?a.options.mergeOptions(i,f):{...i,...f};let u={...{},...(n=e.initialState)!=null?n:{}};a._features.forEach(f=>{var g;u=(g=f.getInitialState==null?void 0:f.getInitialState(u))!=null?g:u});const d=[];let c=!1;const m={_features:s,options:{...i,...e},initialState:u,_queue:f=>{d.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();c=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{a.setState(a.initialState)},setOptions:f=>{const g=Ye(f,a.options);a.options=o(g)},getState:()=>a.options.state,setState:f=>{a.options.onStateChange==null||a.options.onStateChange(f)},_getRowId:(f,g,h)=>{var p;return(p=a.options.getRowId==null?void 0:a.options.getRowId(f,g,h))!=null?p:`${h?[h.id,g].join("."):g}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(f,g)=>{let h=(g?a.getPrePaginationRowModel():a.getRowModel()).rowsById[f];if(!h&&(h=a.getCoreRowModel().rowsById[f],!h))throw new Error;return h},_getDefaultColumnDef:$(()=>[a.options.defaultColumn],f=>{var g;return f=(g=f)!=null?g:{},{header:h=>{const p=h.header.column.columnDef;return p.accessorKey?p.accessorKey:p.accessorFn?p.id:null},cell:h=>{var p,v;return(p=(v=h.renderValue())==null||v.toString==null?void 0:v.toString())!=null?p:null},...a._features.reduce((h,p)=>Object.assign(h,p.getDefaultColumnDef==null?void 0:p.getDefaultColumnDef()),{}),...f}},V(e,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:$(()=>[a._getColumnDefs()],f=>{const g=function(h,p,v){return v===void 0&&(v=0),h.map(w=>{const M=Nm(a,w,v,p),y=w;return M.columns=y.columns?g(y.columns,M,v+1):[],M})};return g(f)},V(e,"debugColumns")),getAllFlatColumns:$(()=>[a.getAllColumns()],f=>f.flatMap(g=>g.getFlatColumns()),V(e,"debugColumns")),_getAllFlatColumnsById:$(()=>[a.getAllFlatColumns()],f=>f.reduce((g,h)=>(g[h.id]=h,g),{}),V(e,"debugColumns")),getAllLeafColumns:$(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(f,g)=>{let h=f.flatMap(p=>p.getLeafColumns());return g(h)},V(e,"debugColumns")),getColumn:f=>a._getAllFlatColumnsById()[f]};Object.assign(a,m);for(let f=0;f<a._features.length;f++){const g=a._features[f];g==null||g.createTable==null||g.createTable(a)}return a}function wi(){return e=>$(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,i,o){i===void 0&&(i=0);const l=[];for(let d=0;d<a.length;d++){const c=Ln(e,e._getRowId(a[d],d,o),a[d],d,i,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,l.push(c),e.options.getSubRows){var u;c.originalSubRows=e.options.getSubRows(a[d],d),(u=c.originalSubRows)!=null&&u.length&&(c.subRows=s(c.originalSubRows,i+1,c))}}return l};return n.rows=s(t),n},V(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function ig(e){const t=[],n=s=>{var a;t.push(s),(a=s.subRows)!=null&&a.length&&s.getIsExpanded()&&s.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function og(e,t,n){return n.options.filterFromLeafRows?lg(e,t,n):cg(e,t,n)}function lg(e,t,n){var s;const a=[],i={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,l=function(u,d){d===void 0&&(d=0);const c=[];for(let f=0;f<u.length;f++){var m;let g=u[f];const h=Ln(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(h.columnFilters=g.columnFilters,(m=g.subRows)!=null&&m.length&&d<o){if(h.subRows=l(g.subRows,d+1),g=h,t(g)&&!h.subRows.length){c.push(g),i[g.id]=g,a.push(g);continue}if(t(g)||h.subRows.length){c.push(g),i[g.id]=g,a.push(g);continue}}else g=h,t(g)&&(c.push(g),i[g.id]=g,a.push(g))}return c};return{rows:l(e),flatRows:a,rowsById:i}}function cg(e,t,n){var s;const a=[],i={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,l=function(u,d){d===void 0&&(d=0);const c=[];for(let f=0;f<u.length;f++){let g=u[f];if(t(g)){var m;if((m=g.subRows)!=null&&m.length&&d<o){const p=Ln(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);p.subRows=l(g.subRows,d+1),g=p}c.push(g),a.push(g),i[g.id]=g}}return c};return{rows:l(e),flatRows:a,rowsById:i}}function ji(){return e=>$(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,s)=>{if(!t.rows.length||!(n!=null&&n.length)&&!s){for(let f=0;f<t.flatRows.length;f++)t.flatRows[f].columnFilters={},t.flatRows[f].columnFiltersMeta={};return t}const a=[],i=[];(n??[]).forEach(f=>{var g;const h=e.getColumn(f.id);if(!h)return;const p=h.getFilterFn();p&&a.push({id:f.id,filterFn:p,resolvedValue:(g=p.resolveFilterValue==null?void 0:p.resolveFilterValue(f.value))!=null?g:f.value})});const o=(n??[]).map(f=>f.id),l=e.getGlobalFilterFn(),u=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());s&&l&&u.length&&(o.push("__global__"),u.forEach(f=>{var g;i.push({id:f.id,filterFn:l,resolvedValue:(g=l.resolveFilterValue==null?void 0:l.resolveFilterValue(s))!=null?g:s})}));let d,c;for(let f=0;f<t.flatRows.length;f++){const g=t.flatRows[f];if(g.columnFilters={},a.length)for(let h=0;h<a.length;h++){d=a[h];const p=d.id;g.columnFilters[p]=d.filterFn(g,p,d.resolvedValue,v=>{g.columnFiltersMeta[p]=v})}if(i.length){for(let h=0;h<i.length;h++){c=i[h];const p=c.id;if(c.filterFn(g,p,c.resolvedValue,v=>{g.columnFiltersMeta[p]=v})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const m=f=>{for(let g=0;g<o.length;g++)if(f.columnFilters[o[g]]===!1)return!1;return!0};return og(t.rows,m,e)},V(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function bi(e){return t=>$(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,s)=>{if(!s.rows.length)return s;const{pageSize:a,pageIndex:i}=n;let{rows:o,flatRows:l,rowsById:u}=s;const d=a*i,c=d+a;o=o.slice(d,c);let m;t.options.paginateExpandedRows?m={rows:o,flatRows:l,rowsById:u}:m=ig({rows:o,flatRows:l,rowsById:u}),m.flatRows=[];const f=g=>{m.flatRows.push(g),g.subRows.length&&g.subRows.forEach(f)};return m.rows.forEach(f),m},V(t.options,"debugTable"))}function Si(){return e=>$(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const s=e.getState().sorting,a=[],i=s.filter(u=>{var d;return(d=e.getColumn(u.id))==null?void 0:d.getCanSort()}),o={};i.forEach(u=>{const d=e.getColumn(u.id);d&&(o[u.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const l=u=>{const d=u.map(c=>({...c}));return d.sort((c,m)=>{for(let g=0;g<i.length;g+=1){var f;const h=i[g],p=o[h.id],v=p.sortUndefined,w=(f=h==null?void 0:h.desc)!=null?f:!1;let M=0;if(v){const y=c.getValue(h.id),j=m.getValue(h.id),N=y===void 0,P=j===void 0;if(N||P){if(v==="first")return N?-1:1;if(v==="last")return N?1:-1;M=N&&P?0:N?v:-v}}if(M===0&&(M=p.sortingFn(c,m,h.id)),M!==0)return w&&(M*=-1),p.invertSorting&&(M*=-1),M}return c.index-m.index}),d.forEach(c=>{var m;a.push(c),(m=c.subRows)!=null&&m.length&&(c.subRows=l(c.subRows))}),d};return{rows:l(n.rows),flatRows:a,rowsById:n.rowsById}},V(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function vr(e,t){return e?dg(e)?x.createElement(e,t):e:null}function dg(e){return ug(e)||typeof e=="function"||mg(e)}function ug(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function mg(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function Ni(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=x.useState(()=>({current:ag(t)})),[s,a]=x.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...e,state:{...s,...e.state},onStateChange:o=>{a(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}const Vs={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function Ci(e){const[t,n]=x.useState(!1);return x.useEffect(()=>{const s=window.innerWidth;n(s>=Vs[e]);const a=window.matchMedia(`(min-width: ${Vs[e]}px)`);n(a.matches);const i=o=>{n(o.matches)};return a.addEventListener("change",i),()=>{a.removeEventListener("change",i)}},[e]),t}function Pi(){const e=x.useRef(null),[t,n]=x.useState(!1),[s,a]=x.useState(!1),i=()=>{if(e.current){const{scrollWidth:l,clientWidth:u}=e.current;a(l>u)}},o=()=>{if(!e.current)return;const{scrollLeft:l,scrollWidth:u,clientWidth:d}=e.current;n(l+d>=u-5)};return x.useEffect(()=>{const l=new ResizeObserver(()=>{i(),o()});return e.current&&(l.observe(e.current),i()),()=>{l.disconnect()}},[]),{tableRef:e,hasScrolled:t,isScrollable:s,handleScroll:o}}const Ue=di(),gg=({value:e,onChange:t,debounce:n=300,...s})=>{const[a,i]=x.useState(e);return x.useEffect(()=>{i(e)},[e]),x.useEffect(()=>{const o=setTimeout(()=>{t(a)},n);return()=>clearTimeout(o)},[a,t,n]),r.jsx(G,{...s,value:a,onChange:o=>i(o.target.value)})},Mi=()=>{const{workoutLogs:e,isLoading:t,error:n,isDataFetched:s,fetchWorkoutLogs:a,removeWorkoutLog:i}=Re(),[o,l]=x.useState([]),[u,d]=x.useState(""),c=!Ci("sm"),{tableRef:m,hasScrolled:f,isScrollable:g,handleScroll:h}=Pi(),{convertAndFormatWeight:p,getWeightUnit:v}=br();x.useEffect(()=>{s||a()},[a,s]);const w=x.useCallback(N=>{const P=new CustomEvent("open-add-workout-modal",{detail:N});window.dispatchEvent(P)},[]),M=x.useCallback(async(N,P,b)=>{if(window.confirm(`Are you sure you want to delete the log for ${P} on ${b}?`))try{await i(N)}catch(F){console.error("Failed to delete log:",F),alert("Failed to delete log. See console for details.")}},[i]),y=x.useMemo(()=>[Ue.accessor("date",{header:"Date",cell:N=>N.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),Ue.accessor("muscleGroup",{header:"Muscle Group",cell:N=>N.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),Ue.accessor("exercise",{header:"Exercise",cell:N=>N.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),Ue.accessor("weight",{header:`Weight (${v()})`,cell:N=>p(N.getValue()),enableSorting:!0,meta:{responsivePriority:1}}),Ue.accessor("reps",{header:"Reps",cell:N=>N.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),Ue.accessor("rating",{header:"Rating",cell:N=>N.getValue(),enableSorting:!0,meta:{responsivePriority:3}}),Ue.accessor("restTime",{header:"Rest Time",cell:N=>N.getValue()?`${N.getValue()}s`:"-",enableSorting:!0,meta:{responsivePriority:3}}),Ue.display({id:"actions",header:"Actions",cell:({row:N})=>r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>{w(N.original)},className:"h-8 w-8 p-0",children:r.jsx(Kt,{className:"h-4 w-4"})}),r.jsx(R,{variant:"destructive",size:"sm",onClick:()=>{M(N.original.id,N.original.exercise,N.original.date)},className:"h-8 w-8 p-0",children:r.jsx(mt,{className:"h-4 w-4"})})]}),meta:{responsivePriority:1}})],[p,v,M,w]),j=Ni({data:e,columns:y,state:{sorting:o,globalFilter:u},onSortingChange:l,onGlobalFilterChange:d,getCoreRowModel:wi(),getSortedRowModel:Si(),getFilteredRowModel:ji(),getPaginationRowModel:bi(),getRowId:N=>N.id,initialState:{pagination:{pageSize:10}}});return t?r.jsx("div",{className:"p-4",children:"Loading workout logs..."}):n?r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",n]}):r.jsxs("div",{className:"w-full h-full flex flex-col",children:[r.jsx("div",{className:"px-4 py-3 border-b flex-shrink-0",children:r.jsx("h3",{className:"text-lg font-semibold",children:"Workout Logs"})}),r.jsx("div",{className:"p-3 border-b flex-shrink-0",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{htmlFor:"globalFilterInput",className:"text-xs font-medium",children:"Filter Table"}),r.jsx(gg,{id:"globalFilterInput",type:"text",value:u??"",onChange:N=>d(String(N)),placeholder:"Search across all fields...",className:"h-9 text-sm"})]})}),r.jsxs("div",{className:oe("relative mobile-optimized table-scroll-container flex-1 min-h-0",f&&"scrolled-right"),children:[c&&g&&!f&&r.jsx("div",{className:"scroll-indicator"}),r.jsx(ba,{ref:m,onScroll:h,className:"scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary/20 hover:scrollbar-thumb-primary/30 h-full",children:r.jsxs(Sa,{className:"w-full text-sm",children:[r.jsx(Na,{children:j.getHeaderGroups().map(N=>r.jsx(Ct,{children:N.headers.map(P=>{const b=P.column.columnDef.meta,F=(b==null?void 0:b.responsivePriority)||999,W=oe("px-3 py-3 ",F>1&&"hidden sm:table-cell",F>2&&"hidden md:table-cell",F>3&&"hidden lg:table-cell");return r.jsx(Ca,{className:W,children:P.isPlaceholder?null:r.jsxs("div",{className:`${P.column.getCanSort()?"cursor-pointer select-none":""} flex items-center`,onClick:P.column.getToggleSortingHandler(),title:P.column.getCanSort()?"Sort":void 0,children:[vr(P.column.columnDef.header,P.getContext()),{asc:r.jsx(_a,{className:"ml-1 h-4 w-4"}),desc:r.jsx(Ra,{className:"ml-1 h-4 w-4"})}[P.column.getIsSorted()]??null]})},P.id)})},N.id))}),r.jsx(Pa,{children:j.getRowModel().rows.length>0?j.getRowModel().rows.map(N=>r.jsx(Ct,{"data-state":N.getIsSelected()&&"selected",className:"hover:bg-muted/50 border-b",children:N.getVisibleCells().map(P=>{const b=P.column.columnDef.meta,F=(b==null?void 0:b.responsivePriority)||999,W=oe("px-3 py-2",F>1&&"hidden sm:table-cell",F>2&&"hidden md:table-cell",F>3&&"hidden lg:table-cell");return r.jsx(ur,{className:W,children:vr(P.column.columnDef.cell,P.getContext())},P.id)})},N.id)):r.jsx(Ct,{children:r.jsx(ur,{colSpan:y.length,className:"h-24 text-center",children:"No results."})})})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 border-t gap-3 flex-shrink-0",children:[r.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:["Page ",j.getState().pagination.pageIndex+1," of ",j.getPageCount()," ","(",j.getFilteredRowModel().rows.length," row(s))"]}),r.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-center",children:[r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>j.previousPage(),disabled:!j.getCanPreviousPage(),className:"h-9 px-3",children:[r.jsx(ia,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>j.nextPage(),disabled:!j.getCanNextPage(),className:"h-9 px-3",children:[r.jsx("span",{className:"hidden sm:inline",children:"Next"}),r.jsx(Mn,{className:"h-4 w-4 ml-1"})]})]})]})]})},fg=()=>r.jsx(A,{className:"w-full h-full flex flex-col",children:r.jsx(L,{className:"p-0 flex-1 flex flex-col min-h-0",children:r.jsx(Mi,{})})}),hg=()=>{const e=Fo(),{workoutLogs:t,exercises:n,templates:s,dailyMetrics:a,loading:i,errors:o,dataFetched:l,fetchWorkoutLogs:u,fetchExercises:d,fetchTemplates:c,fetchAllData:m,addWorkoutLog:f,editWorkoutLog:g,removeWorkoutLog:h,getExercisesByMuscleGroup:p,getAllUniqueExerciseNames:v}=e;x.useEffect(()=>{(async()=>{t.length===0&&!i.workoutLogs&&await u(),n.length===0&&!i.exercises&&await d(),s.length===0&&!i.templates&&await c()})()},[t.length,n.length,s.length,i.workoutLogs,i.exercises,i.templates,u,d,c]);const w=i.workoutLogs||!1,M=i.exercises||!1,y=i.templates||!1,j=w||M||y,N=o.workoutLogs||null,P=o.exercises||null,b=o.templates||null,F=N||P||b,W=l.workoutLogs||l.exercises||l.templates;return{workoutLogs:t||[],exercises:n||[],workoutTemplates:s||[],dailyMetrics:a||[],isLoading:j,isWorkoutLogsLoading:w,isExercisesLoading:M,isTemplatesLoading:y,error:F,workoutLogsError:N,exercisesError:P,templatesError:b,isDataFetched:W,fetchWorkoutLogs:u,fetchExercises:d,fetchTemplates:c,refreshAllData:m,createWorkoutLog:async Q=>{try{const _=await f(Q);return{success:!!_,error:_?null:"Failed to create workout log"}}catch(_){return{success:!1,error:_ instanceof Error?_.message:"Unknown error"}}},updateWorkoutLog:async(Q,_)=>{try{const re=t.find(le=>le.id===Q);return re?(await g({...re,..._}),{success:!0}):{success:!1,error:"Workout log not found"}}catch(re){return{success:!1,error:re instanceof Error?re.message:"Unknown error"}}},deleteWorkoutLog:async Q=>{try{return await h(Q),{success:!0}}catch(_){return{success:!1,error:_ instanceof Error?_.message:"Unknown error"}}},getUniqueExercises:()=>{const Q=t.map(_=>_.exercise);return[...new Set(Q)].filter(Boolean).sort()},getUniqueMuscleGroups:()=>{const Q=t.map(_=>_.muscleGroup);return[...new Set(Q)].filter(Boolean).sort()},getExercisesByMuscleGroup:Q=>n.filter(_=>_.muscleGroup.toLowerCase()===Q.toLowerCase()),getWorkoutLogsByMuscleGroup:Q=>t.filter(_=>_.muscleGroup.toLowerCase()===Q.toLowerCase()),getWorkoutLogsByDateRange:(Q,_)=>t.filter(re=>{const le=new Date(re.date),k=new Date(Q),X=new Date(_);return le>=k&&le<=X})}},pg=({value:e,onChange:t,debounce:n=300,...s})=>{const[a,i]=I.useState(e);return I.useEffect(()=>{i(e)},[e]),I.useEffect(()=>{const o=setTimeout(()=>{t(a)},n);return()=>clearTimeout(o)},[a,t,n]),r.jsx(G,{...s,value:a,onChange:o=>i(o.target.value)})},pe=di(),xg=()=>{const{dailyMetrics:e,workoutLogs:t,isLoading:n,error:s,isWorkoutLogsLoading:a,isDataFetched:i}=hg();I.useEffect(()=>{console.log("[WorkoutSummaryTable] Data state changed:"),console.log("- dailyMetrics length:",(e==null?void 0:e.length)||0),console.log("- workoutLogs length:",(t==null?void 0:t.length)||0),console.log("- isLoading:",n),console.log("- isWorkoutLogsLoading:",a),console.log("- isDataFetched:",i),console.log("- error:",s),(e==null?void 0:e.length)>0&&console.log("- Sample daily metric:",e[0]),(t==null?void 0:t.length)>0&&console.log("- Sample workout log:",t[0])},[e,t,n,a,i,s]);const o=!Ci("sm"),{tableRef:l,hasScrolled:u,isScrollable:d,handleScroll:c}=Pi(),{convertAndFormatWeight:m,getWeightUnit:f}=br(),[g,h]=I.useState([{id:"date",desc:!0}]),[p,v]=I.useState(""),w=x.useMemo(()=>e.map(j=>{let N="Invalid Date";try{const P=typeof j.date=="string"?j.date:String(j.date);if(P&&P.toLowerCase()!=="invalid date"&&P.length>0){const b=new Date(P.includes("T")?P:P.replace(/-/g,"/"));isNaN(b.getTime())||(N=ae(b,"yyyy-MM-dd"))}}catch(P){console.error(`Error parsing or formatting date "${j.date}":`,P)}return{...j,date:N,muscleGroup:j.muscleGroup||"N/A",exercise:j.exercise||"N/A",howIFeel:j.howIFeel||"N/A"}}),[e]),M=x.useMemo(()=>[pe.accessor("date",{header:"Date",cell:j=>j.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),pe.accessor("muscleGroup",{header:"Muscle",cell:j=>j.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),pe.accessor("exercise",{header:"Exercise",cell:j=>j.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),pe.accessor("totalVolume",{header:`Volume (${f()})`,cell:j=>m(j.getValue()),enableSorting:!0,meta:{responsivePriority:2}}),pe.accessor("totalSets",{header:"Sets",cell:j=>j.getValue(),enableSorting:!0,meta:{responsivePriority:1}}),pe.accessor("totalReps",{header:"Reps",cell:j=>j.getValue(),enableSorting:!0,meta:{responsivePriority:3}}),pe.accessor("averageReps",{header:"Avg Reps",cell:j=>j.getValue().toFixed(1),enableSorting:!0,meta:{responsivePriority:4}}),pe.accessor("averageWeight",{header:`Avg Wt (${f()})`,cell:j=>m(j.getValue()),enableSorting:!0,meta:{responsivePriority:3}}),pe.accessor("averageFatigue",{header:"Avg Fatigue",cell:j=>j.getValue().toFixed(1),enableSorting:!0,meta:{responsivePriority:4}}),pe.accessor("maxWeight",{header:`Max Wt (${f()})`,cell:j=>m(j.getValue()),enableSorting:!0,meta:{responsivePriority:3}}),pe.accessor("intensity",{header:"Int(%)",cell:j=>j.getValue().toFixed(1),enableSorting:!0,meta:{responsivePriority:4}}),pe.accessor("fatigue",{header:"Fatigue (%)",cell:j=>j.getValue().toFixed(1),enableSorting:!0,meta:{responsivePriority:1}}),pe.accessor("howIFeel",{header:"Feel",cell:j=>j.getValue(),enableSorting:!0,meta:{responsivePriority:5}}),pe.accessor("progressionRate",{header:"Progress",cell:j=>{const N=j.getValue();if(N==="N/A")return r.jsxs("span",{className:"text-blue-500 flex items-center whitespace-nowrap",children:[r.jsx(Gt,{className:"mr-1 h-4 w-4 flex-shrink-0"})," ",r.jsx("span",{children:"N/A"})]});const P=typeof N=="string"?parseFloat(N):N;return P>0?r.jsxs("span",{className:"text-green-500 flex items-center whitespace-nowrap",children:[r.jsx(Ia,{className:"mr-1 h-4 w-4 flex-shrink-0"})," ",r.jsx("span",{children:N})]}):P<0?r.jsxs("span",{className:"text-red-500 flex items-center whitespace-nowrap",children:[r.jsx(Fa,{className:"mr-1 h-4 w-4 flex-shrink-0"})," ",r.jsx("span",{children:N})]}):r.jsxs("span",{className:"text-gray-500 flex items-center whitespace-nowrap",children:[r.jsx(Gt,{className:"mr-1 h-4 w-4 flex-shrink-0"})," ",r.jsx("span",{children:N})]})},enableSorting:!0,meta:{responsivePriority:1}})],[m,f]),y=Ni({data:w,columns:M,state:{sorting:g,globalFilter:p},onSortingChange:h,onGlobalFilterChange:v,getCoreRowModel:wi(),getSortedRowModel:Si(),getFilteredRowModel:ji(),getPaginationRowModel:bi(),getRowId:j=>j.id,initialState:{pagination:{pageSize:o?5:10}}});return I.useEffect(()=>{y.setPageSize(o?5:10)},[o,y]),n?r.jsx("div",{className:"p-4",children:"Loading workout summary..."}):s?r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",s]}):w.length===0?r.jsx("div",{className:"p-4",children:"No data available. Log workouts to see summary."}):r.jsxs("div",{className:"w-full h-full flex flex-col",children:[r.jsx("div",{className:"px-4 py-3 border-b flex-shrink-0",children:r.jsx("h3",{className:"text-lg font-semibold",children:"Workout Summary"})}),r.jsx("div",{className:"p-3 border-b flex-shrink-0",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{htmlFor:"summaryGlobalFilterInput",className:"text-xs font-medium",children:"Filter Table"}),r.jsx(pg,{id:"summaryGlobalFilterInput",type:"text",value:p??"",onChange:j=>v(String(j)),placeholder:"Search across all fields...",className:"h-9 text-sm"})]})}),r.jsxs("div",{className:oe("relative mobile-optimized table-scroll-container flex-1 min-h-0",u&&"scrolled-right"),children:[o&&d&&!u&&r.jsx("div",{className:"scroll-indicator"}),r.jsx(ba,{ref:l,onScroll:c,className:"scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary/20 hover:scrollbar-thumb-primary/30 h-full",children:r.jsxs(Sa,{className:"w-full text-sm",children:[r.jsx(Na,{children:y.getHeaderGroups().map(j=>r.jsx(Ct,{children:j.headers.map(N=>{const P=N.column.columnDef.meta,b=(P==null?void 0:P.responsivePriority)||999,F=oe("px-3 py-3 ",P==null?void 0:P.className,b>1&&"hidden sm:table-cell",b>2&&"hidden md:table-cell",b>3&&"hidden lg:table-cell",b>4&&"hidden xl:table-cell");return r.jsx(Ca,{className:F,children:N.isPlaceholder?null:r.jsxs("div",{className:oe("flex items-center",N.column.getCanSort()?"cursor-pointer select-none":""),onClick:N.column.getToggleSortingHandler(),title:N.column.getCanSort()?"Sort":void 0,children:[vr(N.column.columnDef.header,N.getContext()),{asc:r.jsx(_a,{className:"ml-1 h-4 w-4"}),desc:r.jsx(Ra,{className:"ml-1 h-4 w-4"})}[N.column.getIsSorted()]??null]})},N.id)})},j.id))}),r.jsx(Pa,{children:y.getRowModel().rows.length>0?y.getRowModel().rows.map(j=>r.jsx(Ct,{"data-state":j.getIsSelected()&&"selected",className:"hover:bg-muted/50 border-b",children:j.getVisibleCells().map(N=>{const P=N.column.columnDef.meta,b=(P==null?void 0:P.responsivePriority)||999,F=oe("px-3 py-2",b>1&&"hidden sm:table-cell",b>2&&"hidden md:table-cell",b>3&&"hidden lg:table-cell",b>4&&"hidden xl:table-cell");return r.jsx(ur,{className:F,children:vr(N.column.columnDef.cell,N.getContext())},N.id)})},j.id)):r.jsx(Ct,{children:r.jsx(ur,{colSpan:M.length,className:"h-24 text-center",children:"No results found."})})})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 border-t gap-3 flex-shrink-0",children:[r.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left mb-2 sm:mb-0",children:["Page ",y.getState().pagination.pageIndex+1," of ",y.getPageCount()," ","(",y.getFilteredRowModel().rows.length," row(s) found)"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>y.previousPage(),disabled:!y.getCanPreviousPage(),className:"h-8 w-8 p-0 sm:h-auto sm:w-auto sm:px-3 sm:py-1",children:[r.jsx(ia,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline ml-1",children:"Previous"})]}),r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>y.nextPage(),disabled:!y.getCanNextPage(),className:"h-8 w-8 p-0 sm:h-auto sm:w-auto sm:px-3 sm:py-1",children:[r.jsx("span",{className:"hidden sm:inline mr-1",children:"Next"}),r.jsx(Mn,{className:"h-4 w-4"})]})]})]})]})},vg=()=>r.jsx(A,{className:"w-full h-full flex flex-col",children:r.jsx(L,{className:"p-0 flex-1 flex flex-col min-h-0",children:r.jsx(xg,{})})}),yg=()=>{const[e,t]=x.useState([]),[n,s]=x.useState(!1),[a,i]=x.useState(!0),[o,l]=x.useState(null),{setCurrentView:u}=Nn();x.useEffect(()=>{d()},[]);const d=async()=>{try{i(!0),l(null);const v=await al.todos.getAll();if(v.success&&v.data){const w=v.data.data.sort((M,y)=>M.isCompleted!==y.isCompleted?M.isCompleted?1:-1:new Date(y.createdAt).getTime()-new Date(M.createdAt).getTime());t(w)}else l(v.error||"Failed to load tasks")}catch(v){console.error("Failed to load todos:",v),l("Failed to load tasks")}finally{i(!1)}},c=v=>{t(w=>[v,...w]),l(null)},m=v=>{t(w=>w.map(M=>M.id===v.id?v:M))},f=v=>{t(w=>w.filter(M=>M.id!==v))},g=e.filter(v=>!v.isCompleted),h=e.filter(v=>v.isCompleted),p=n?e:g;return a?r.jsxs(A,{className:"min-h-[300px]",children:[r.jsx(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsxs(z,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Tasks"]})}),r.jsx(L,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})})})]}):o?r.jsxs(A,{className:"min-h-[300px] border-red-200",children:[r.jsx(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsxs(z,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Tasks"]})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-6",children:[r.jsx("p",{className:"text-sm text-red-600 mb-3",children:o}),r.jsx(R,{size:"sm",onClick:d,variant:"outline",children:"Try Again"})]})})]}):r.jsxs(A,{className:"min-h-[300px]",children:[r.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsxs(z,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Tasks",g.length>0&&r.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-1.5 py-0.5 rounded-full",children:g.length})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[h.length>0&&r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>s(!n),className:"h-8 w-8 p-0",title:n?"Hide completed":"Show completed",children:n?r.jsx(ln,{className:"h-4 w-4"}):r.jsx(Vt,{className:"h-4 w-4"})}),r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>u("todos"),className:"h-8 w-8 p-0",title:"View all tasks",children:r.jsx(Gt,{className:"h-4 w-4"})})]})]}),r.jsxs(L,{className:"space-y-3",children:[r.jsx(il,{onTaskAdded:c,compact:!0}),p.length===0?r.jsxs("div",{className:"text-center py-6",children:[r.jsx(tr,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n?"No tasks found":g.length===0?"No tasks yet":"No active tasks"}),!n&&g.length===0&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Add your first task above"})]}):r.jsx("div",{className:"space-y-2",children:p.map(v=>{const w=ol(v);return r.jsx(ll,{task:v,onTaskUpdated:m,onTaskDeleted:f,compact:!0},w.id)})}),!n&&h.length>0&&r.jsx("div",{className:"text-center pt-2 border-t",children:r.jsxs(R,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"text-xs text-muted-foreground hover:text-foreground",children:[h.length," completed task",h.length===1?"":"s"]})})]})]})},wg=()=>r.jsxs(R,{onClick:()=>window.dispatchEvent(new CustomEvent("open-add-workout-modal")),className:"w-full sm:w-auto bg-primary hover:bg-primary/90 text-primary-foreground shadow-md transition-all duration-300 ease-in-out hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 rounded-lg px-4 py-2 flex items-center justify-center sm:justify-start group",children:[r.jsx(Ea,{className:"h-5 w-5 mr-2 transition-transform duration-300 group-hover:scale-110"}),"Add Workout"]}),jg=({logs:e})=>{const{appStore:t}=Cn(),{setCurrentView:n}=t,{settings:s}=da(),a=x.useMemo(()=>{if(!e||e.length===0)return[];const o=Ma(e,void 0,s),l=Sl(e,s);return Nl(o,l)},[e,s]),i=x.useMemo(()=>{const o=a.filter(d=>d.type==="warning"),l=a.filter(d=>d.type==="positive"),u=a.filter(d=>d.type==="info");return[...o,...l,...u].slice(0,3)},[a]);return!e||e.length===0?r.jsxs(A,{className:"h-full",children:[r.jsxs(H,{className:"pb-2",children:[r.jsx(z,{className:"text-base font-semibold",children:"Muscle Recovery Insights"}),r.jsx(Pe,{className:"text-xs",children:"Log workouts to receive personalized recovery insights"})]}),r.jsx(L,{className:"flex items-center justify-center h-32",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"No workout data available"})})]}):a.length===0?r.jsxs(A,{className:"h-full",children:[r.jsxs(H,{className:"pb-2",children:[r.jsx(z,{className:"text-base font-semibold",children:"Muscle Recovery Insights"}),r.jsx(Pe,{className:"text-xs",children:"Log more workouts to generate personalized insights"})]}),r.jsx(L,{className:"flex items-center justify-center h-32",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Not enough data for insights yet"})})]}):r.jsxs(A,{className:"h-full",children:[r.jsxs(H,{className:"pb-2",children:[r.jsx(z,{className:"text-base font-semibold",children:"Muscle Recovery Insights"}),r.jsx(Pe,{className:"text-xs",children:"Personalized insights to optimize recovery and training"})]}),r.jsx(L,{className:"space-y-3",children:i.map((o,l)=>r.jsx("div",{className:`p-3 rounded-md 
              ${o.type==="warning"?"bg-red-500/10":o.type==="positive"?"bg-green-500/10":"bg-blue-500/10"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[o.type==="warning"?r.jsx(Cl,{className:"h-4 w-4 mt-0.5 text-red-500 shrink-0"}):o.type==="positive"?r.jsx(ka,{className:"h-4 w-4 mt-0.5 text-green-500 shrink-0"}):r.jsx(Pl,{className:"h-4 w-4 mt-0.5 text-blue-500 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:o.muscleGroup}),r.jsx("p",{className:"text-xs",children:o.insight}),r.jsx("p",{className:`text-xs mt-1 font-medium
                  ${o.type==="warning"?"text-red-500":o.type==="positive"?"text-green-500":"text-blue-500"}`,children:o.suggestion})]})]})},l))}),a.length>3&&r.jsx(Nr,{className:"pt-0",children:r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>n("muscleFatigue"),className:"w-full text-xs text-primary hover:text-primary hover:bg-primary/5 border-primary/20",children:["View all insights",r.jsx(Gt,{className:"ml-2 h-3 w-3"})]})})]})},bg=()=>{const{workoutLogs:e}=Re();return r.jsx(jg,{logs:e})},Xr=({children:e,delay:t=0,duration:n=.5,className:s})=>r.jsx(An.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:n,delay:t,type:"spring",stiffness:100},className:s,children:e}),Sg=({children:e,staggerChildren:t=.1,delayChildren:n=0,className:s})=>r.jsx(An.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:n,staggerChildren:t}}},className:s,children:e}),Qr=({children:e,className:t})=>r.jsx(An.div,{variants:{hidden:{opacity:0,y:15},visible:{opacity:1,y:0}},className:t,children:e}),Jr=""+new URL("Abdominals-CD1xuCve.png",import.meta.url).href,ot=""+new URL("back-wings-r1hjOhcB.png",import.meta.url).href,Bs=""+new URL("back (4)-CRGtwsH_.png",import.meta.url).href,Ng=""+new URL("biceps-DYTX4SuY.png",import.meta.url).href,Hs=""+new URL("calf-CGpriwAc.png",import.meta.url).href,Zr=""+new URL("chest-C9l9Y4-i.png",import.meta.url).href,zs=""+new URL("forearm-BLbz3DXD.png",import.meta.url).href,en=""+new URL("Hip-wcRJM92E.png",import.meta.url).href,ir=""+new URL("leg-Dax75EQt.png",import.meta.url).href,Cg=""+new URL("neck-Bfryw1B6.png",import.meta.url).href,or=""+new URL("shoulder-DOEfngY7.png",import.meta.url).href,tn=""+new URL("shoulder (1)-B7NnlA_Z.png",import.meta.url).href,rn=""+new URL("trapezius-OToMOEjh.png",import.meta.url).href,Pg=""+new URL("triceps-C3gxC62r.png",import.meta.url).href,nn={abdominals:Jr,abs:Jr,core:Jr,back:ot,lats:ot,"latissimus dorsi":ot,rhomboids:Bs,"middle back":Bs,"lower back":ot,"upper back":rn,trapezius:rn,traps:rn,biceps:Ng,triceps:Pg,forearms:zs,forearm:zs,shoulders:or,shoulder:or,deltoids:or,delts:or,"anterior deltoid":tn,"posterior deltoid":tn,"lateral deltoid":tn,chest:Zr,pectorals:Zr,pecs:Zr,legs:ir,quadriceps:ir,quads:ir,hamstrings:ir,glutes:en,gluteus:en,hips:en,calves:Hs,calf:Hs,neck:Cg,"full body":ot,cardio:ot},Gs=e=>{const t=e.toLowerCase().trim();if(nn[t])return nn[t];for(const[n,s]of Object.entries(nn))if(n.includes(t)||t.includes(n))return s;return ot},Mg=({logs:e})=>{const{appStore:t}=Cn(),{setCurrentView:n}=t,{settings:s}=da(),a=x.useMemo(()=>Ma(e,void 0,s),[e,s]),i=x.useMemo(()=>Ml(a),[a]),o=x.useMemo(()=>kl(a),[a]);return!e||e.length===0?r.jsxs(A,{className:"h-full",children:[r.jsxs(H,{className:"pb-2",children:[r.jsxs(z,{className:"text-base font-semibold flex items-center",children:[r.jsx(we,{className:"h-4 w-4 mr-2 text-primary"}),"Muscle Fatigue"]}),r.jsx(Pe,{className:"text-xs",children:"Log workouts to view muscle fatigue data"})]}),r.jsx(L,{className:"pb-4",children:r.jsx("div",{className:"flex items-center justify-center h-24",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"No workout data"})})})]}):r.jsxs(A,{className:"h-full",children:[r.jsxs(H,{className:"pb-2",children:[r.jsxs(z,{className:"text-base font-semibold flex items-center",children:[r.jsx(we,{className:"h-4 w-4 mr-2 text-primary"}),"Muscle Fatigue"]}),r.jsx(Pe,{className:"text-xs",children:"Train fresh muscles, rest fatigued ones"})]}),r.jsxs(L,{children:["        ",r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-green-500 mb-2",children:"Ready to Train:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.length>0?i.map(l=>r.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20",children:[r.jsx("img",{src:Gs(l),alt:l,className:"w-12 h-12 object-contain"}),r.jsx("span",{children:l})]},l)):r.jsx("span",{className:"text-xs text-muted-foreground",children:"No muscle groups ready"})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-500 mb-2",children:"Needs Rest:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:o.length>0?o.map(l=>r.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium bg-red-500/10 text-red-500 border border-red-500/20",children:[r.jsx("img",{src:Gs(l),alt:l,className:"w-12 h-12 object-contain opacity-75"}),r.jsx("span",{children:l})]},l)):r.jsx("span",{className:"text-xs text-muted-foreground",children:"No muscle groups need rest"})})]})]})]}),r.jsx(Nr,{className:"pt-0",children:r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>n("muscleFatigue"),className:"w-full text-xs text-primary hover:text-primary hover:bg-primary/5 border-primary/20",children:["View detailed fatigue data",r.jsx(Gt,{className:"ml-2 h-3 w-3"})]})})]})},kg=()=>{const e=_o(),{activeWorkout:t,completeWorkout:n,cancelWorkout:s}=ta();if(!t)return null;const a=()=>{if(!t||!t.exercises)return 0;const f=t.exercises;let g=0,h=0;return f.forEach(p=>{g+=p.sets,h+=p.setsCompleted||0}),g===0?0:Math.round(h/g*100)},i=()=>{const f=new Date(t.startTime),h=new Date().getTime()-f.getTime(),p=Math.floor(h/6e4),v=Math.floor(p/60);return v>0?`${v}h ${p%60}m`:`${p}m`},o=()=>t.exercises.find(g=>(g.setsCompleted||0)<g.sets),l=()=>{e.push("/workout")},u=async()=>{(await n()).success},d=()=>{window.confirm("Are you sure you want to cancel this workout? All progress will be lost.")&&s()},c=o(),m=a();return r.jsxs(A,{className:"border border-primary/20 shadow-sm hover:shadow-md transition-shadow",children:[r.jsx(H,{className:"bg-primary/5 pb-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(z,{className:"text-lg font-medium flex items-center",children:[r.jsx(aa,{className:"h-5 w-5 mr-2 text-primary"}),"Active Workout"]}),r.jsx(ie,{variant:"outline",className:"bg-primary/10 text-primary",children:"In Progress"})]})}),r.jsx(L,{className:"pt-4",children:r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:t.templateName}),r.jsx("div",{className:"text-muted-foreground text-sm",children:t.description})]}),r.jsxs("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[r.jsx(lr,{className:"h-4 w-4"}),r.jsxs("span",{children:["Started ",i()," ago"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),r.jsxs("span",{className:"text-sm font-medium",children:[m,"%"]})]}),r.jsx(Lt,{value:m})]}),c?r.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Next Exercise:"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:c.name}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.sets," sets  ",c.reps," reps"]})]}),r.jsx(ie,{children:c.muscleGroup})]})]}):r.jsx("div",{className:"bg-primary/10 p-3 rounded-md",children:r.jsx("div",{className:"text-center text-sm font-medium",children:"All exercises completed! You can finish your workout."})})]})}),r.jsxs(Nr,{className:"flex flex-col md:flex-row gap-2",children:[r.jsxs(R,{variant:"default",className:"w-full md:w-auto",onClick:l,children:[r.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Continue"]}),r.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[r.jsxs(R,{variant:"outline",className:"flex-1",onClick:u,children:[r.jsx(ka,{className:"h-4 w-4 mr-2"}),"Finish"]}),r.jsxs(R,{variant:"ghost",className:"flex-1 text-destructive hover:text-destructive",onClick:d,children:[r.jsx(oa,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]})};class Dg{constructor(){Kn(this,"healthFolderId");this.healthFolderId=Io.drive.folderId}setHealthFolderId(t){this.healthFolderId=t}getHealthFolderId(){return this.healthFolderId}async ensureHealthFolder(){var t;try{if(!await nt())throw new Error("No valid authentication token available");if(ye.client.drive||await new Promise((i,o)=>{ye.client.load("drive","v3").then(i).catch(o)}),this.healthFolderId&&this.healthFolderId!=="18oce2L5-EfDo6rY1-zzAdjTXHfZnjtnx")try{const i=await ye.client.drive.files.get({fileId:this.healthFolderId,fields:"id, name, mimeType"});if(i.result&&i.result.mimeType==="application/vnd.google-apps.folder")return this.healthFolderId}catch(i){console.warn("Configured health folder not found, creating new one:",i)}try{const i=await ye.client.drive.files.list({q:"name='Health Documents' and mimeType='application/vnd.google-apps.folder' and trashed=false",fields:"files(id, name)"});if(!i||!i.result||!Array.isArray(i.result.files))throw console.error("Drive API folder list response:",i),new Error("Drive API folder list response is malformed or missing");if(i.result.files.length>0){const o=i.result.files[0].id;return this.healthFolderId=o,console.log("Found existing health folder with ID:",o),o}}catch(i){throw console.error("Error listing health folders:",i),new Error("Failed to list health folders: "+(i instanceof Error?i.message:String(i)))}const s={name:"Health Documents",mimeType:"application/vnd.google-apps.folder",description:"Health tracking documents and reports"},a=await ye.client.drive.files.create({resource:s,fields:"id"});if(!((t=a.result)!=null&&t.id))throw console.error("Drive API create folder response:",a),new Error("Failed to create health folder");return this.healthFolderId=a.result.id,console.log("Created health folder with ID:",this.healthFolderId),this.healthFolderId}catch(n){throw console.error("Error ensuring health folder:",n),new Error(`Failed to create/access health folder: ${n instanceof Error?n.message:"Unknown error"}`)}}async createFamilyMemberFolder(t){var n;try{const s=await this.ensureHealthFolder(),a=await ye.client.drive.files.list({q:`name='${t}' and parents in '${s}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id, name)"});if(a.result.files&&a.result.files.length>0)return a.result.files[0].id;const i={name:t,mimeType:"application/vnd.google-apps.folder",parents:[s],description:`Health documents for ${t}`},o=await ye.client.drive.files.create({resource:i,fields:"id"});if(!((n=o.result)!=null&&n.id))throw new Error("Failed to create family member folder");return o.result.id}catch(s){throw console.error("Error creating family member folder:",s),new Error(`Failed to create folder for ${t}: ${s instanceof Error?s.message:"Unknown error"}`)}}async uploadHealthDocument(t,n,s=!1,a,i){try{const o=await nt();if(!o)throw new Error("No valid authentication token available");let l;s&&a?l=await this.createFamilyMemberFolder(a):l=await this.ensureHealthFolder();const u={name:n,parents:[l],description:i||"Health document uploaded via Health Tracker"},d=new FormData;d.append("metadata",new Blob([JSON.stringify(u)],{type:"application/json"})),d.append("file",t);const c=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,webViewLink,webContentLink,mimeType,size",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:d});if(!c.ok){const f=await c.text();throw new Error(`Upload failed: ${c.status} ${c.statusText} - ${f}`)}const m=await c.json();return{fileId:m.id,fileName:m.name,fileUrl:m.webViewLink,mimeType:m.mimeType,size:parseInt(m.size)||t.size}}catch(o){throw console.error("Error uploading health document:",o),new Error(`Failed to upload document: ${o instanceof Error?o.message:"Unknown error"}`)}}async listHealthDocuments(t){try{if(!await nt())throw new Error("No valid authentication token available");let s;return t?s=await this.createFamilyMemberFolder(t):s=await this.ensureHealthFolder(),(await ye.client.drive.files.list({q:`parents in '${s}' and trashed=false`,fields:"files(id, name, mimeType, size, createdTime, modifiedTime, webViewLink, webContentLink, parents)",orderBy:"modifiedTime desc"})).result.files||[]}catch(n){throw console.error("Error listing health documents:",n),new Error(`Failed to list documents: ${n instanceof Error?n.message:"Unknown error"}`)}}async downloadHealthDocument(t,n){try{const s=await nt();if(!s)throw new Error("No valid authentication token available");const i=(await ye.client.drive.files.get({fileId:t,fields:"mimeType, name"})).result.mimeType,o=i==null?void 0:i.includes("application/vnd.google-apps");let l;if(o){let f="application/pdf";i!=null&&i.includes("spreadsheet")?f="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":i!=null&&i.includes("document")?f="application/vnd.openxmlformats-officedocument.wordprocessingml.document":i!=null&&i.includes("presentation")&&(f="application/vnd.openxmlformats-officedocument.presentationml.presentation"),l=`https://www.googleapis.com/drive/v3/files/${t}/export?mimeType=${encodeURIComponent(f)}`}else l=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`;const u=await fetch(l,{headers:{Authorization:`Bearer ${s}`}});if(!u.ok)throw new Error(`Download failed: ${u.status} ${u.statusText}`);const d=await u.blob(),c=URL.createObjectURL(d),m=document.createElement("a");m.href=c,m.download=n,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c)}catch(s){throw console.error("Error downloading health document:",s),new Error(`Failed to download document: ${s instanceof Error?s.message:"Unknown error"}`)}}async deleteHealthDocument(t){try{if(!await nt())throw new Error("No valid authentication token available");await ye.client.drive.files.delete({fileId:t})}catch(n){throw console.error("Error deleting health document:",n),new Error(`Failed to delete document: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateDocumentMetadata(t,n){try{if(!await nt())throw new Error("No valid authentication token available");await ye.client.drive.files.update({fileId:t,resource:n})}catch(s){throw console.error("Error updating document metadata:",s),new Error(`Failed to update document: ${s instanceof Error?s.message:"Unknown error"}`)}}async shareDocument(t,n,s="reader"){try{if(!await nt())throw new Error("No valid authentication token available");await ye.client.drive.permissions.create({fileId:t,resource:{role:s,type:"user",emailAddress:n}})}catch(a){throw console.error("Error sharing document:",a),new Error(`Failed to share document: ${a instanceof Error?a.message:"Unknown error"}`)}}async getHealthFolderIdAsync(){return await this.ensureHealthFolder()}}const yt=new Dg,yr=e=>(typeof e=="string"&&(e=new Date(e)),e.toISOString().split("T")[0]),Rg=(e=new Date)=>{const t=[],n=new Date(e);n.setDate(e.getDate()-e.getDay());for(let s=0;s<7;s++){const a=new Date(n);a.setDate(n.getDate()+s),t.push(yr(a))}return t},ki=(e,t)=>e.filter(s=>s.date===t).reduce((s,a)=>({calories:s.calories+a.calories,protein:s.protein+a.protein,carbs:s.carbs+a.carbs,fat:s.fat+a.fat,fiber:s.fiber+a.fiber}),{calories:0,protein:0,carbs:0,fat:0,fiber:0}),Fg=(e,t)=>({calories:t.dailyCalories>0?e.calories/t.dailyCalories*100:0,protein:t.protein>0?e.protein/t.protein*100:0,carbs:t.carbs>0?e.carbs/t.carbs*100:0,fat:t.fat>0?e.fat/t.fat*100:0,fiber:t.fiber>0?e.fiber/t.fiber*100:0}),_g=(e,t,n=7)=>{const s=e.filter(o=>o.type===t).sort((o,l)=>new Date(l.timestamp).getTime()-new Date(o.timestamp).getTime()).slice(0,n);if(s.length<2)return 0;const a=s[0].value,i=s[s.length-1].value;return(a-i)/i*100},Ig=(e,t=7)=>{const n=new Date;n.setDate(n.getDate()-t);const s=e.filter(l=>new Date(l.timestamp)>=n);if(s.length===0)return{totalSessions:0,totalMinutes:0,averageDuration:0,averageMoodImprovement:0,averageStressReduction:0,streak:0};const a=s.reduce((l,u)=>l+u.duration,0),i=s.map(l=>l.moodAfter-l.moodBefore),o=s.map(l=>l.stressBefore-l.stressAfter);return{totalSessions:s.length,totalMinutes:a,averageDuration:a/s.length,averageMoodImprovement:i.reduce((l,u)=>l+u,0)/i.length,averageStressReduction:o.reduce((l,u)=>l+u,0)/o.length,streak:Eg(e)}},Eg=e=>{if(e.length===0)return 0;const t=e.sort((o,l)=>new Date(l.date).getTime()-new Date(o.date).getTime()).map(o=>o.date),n=[...new Set(t)];let s=0,i=yr(new Date);for(const o of n)if(o===i){s++;const l=new Date(i);l.setDate(l.getDate()-1),i=yr(l)}else break;return s},Ag=(e,t,n,s)=>s.map(a=>{const i=ki(e,a),o=t.filter(c=>c.date===a),l=n.filter(c=>c.date===a),u=c=>{const m=o.find(f=>f.type===c);return m?m.value:void 0},d=l.reduce((c,m)=>c+m.duration,0);return{date:a,weight:u("weight"),bodyFat:u("body_fat"),muscleMass:u("muscle_mass"),waterIntake:u("water_intake"),steps:u("steps"),sleepHours:u("sleep_hours"),meditationMinutes:d||void 0,calories:i.calories||void 0,protein:i.protein||void 0,carbs:i.carbs||void 0,fat:i.fat||void 0}}),te=e=>e!=null&&e.message?e.message:typeof e=="string"?e:"An unexpected error occurred. Please try again.",Tg=e=>{const t=[];return e.date||t.push("Date is required"),e.meal||t.push("Meal type is required"),e.food||t.push("Food name is required"),(!e.calories||e.calories<0)&&t.push("Valid calories amount is required"),e.protein&&e.protein<0&&t.push("Protein cannot be negative"),e.carbs&&e.carbs<0&&t.push("Carbs cannot be negative"),e.fat&&e.fat<0&&t.push("Fat cannot be negative"),e.fiber&&e.fiber<0&&t.push("Fiber cannot be negative"),t},Og=e=>{const t=[];return e.date||t.push("Date is required"),e.type||t.push("Health metric type is required"),(!e.value||e.value<0)&&t.push("Valid value is required"),t},Lg=e=>{const t=[];return e.date||t.push("Date is required"),e.type||t.push("Meditation type is required"),(!e.duration||e.duration<=0)&&t.push("Valid duration is required"),e.moodBefore!==void 0&&(e.moodBefore<1||e.moodBefore>10)&&t.push("Mood before must be between 1-10"),e.moodAfter!==void 0&&(e.moodAfter<1||e.moodAfter>10)&&t.push("Mood after must be between 1-10"),e.stressBefore!==void 0&&(e.stressBefore<1||e.stressBefore>10)&&t.push("Stress before must be between 1-10"),e.stressAfter!==void 0&&(e.stressAfter<1||e.stressAfter>10)&&t.push("Stress after must be between 1-10"),t},$g=e=>({id:String(e.ID||e.id||""),name:String(e.Name||e.name||""),relationship:String(e.Relationship||e.relationship||"self"),email:e.Email||e.email?String(e.Email||e.email):void 0,phone:e.Phone||e.phone?String(e.Phone||e.phone):void 0,dateOfBirth:e.DateOfBirth||e.dateOfBirth?String(e.DateOfBirth||e.dateOfBirth):void 0,emergencyContact:!!(e.EmergencyContact||e.emergencyContact),notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,avatar:e.Avatar||e.avatar?String(e.Avatar||e.avatar):void 0,createdAt:String(e.CreatedAt||e.createdAt||new Date().toISOString()),updatedAt:String(e.UpdatedAt||e.updatedAt||new Date().toISOString())}),Ws=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),title:String(e.Title||e.title||""),description:e.Description||e.description?String(e.Description||e.description):void 0,fileName:String(e.FileName||e.fileName||""),fileType:String(e.FileType||e.fileType||""),fileSize:Number(e.FileSize||e.fileSize||0),category:String(e.Category||e.category||"other"),uploadDate:String(e.UploadDate||e.uploadDate||new Date().toISOString()),driveFileId:e.DriveFileID||e.driveFileId?String(e.DriveFileID||e.driveFileId):void 0,driveUrl:e.DriveURL||e.driveUrl?String(e.DriveURL||e.driveUrl):void 0,tags:e.Tags||e.tags?String(e.Tags||e.tags).split(",").map(t=>t.trim()).filter(Boolean):void 0,isConfidential:!!(e.IsConfidential||e.isConfidential)}),Vg=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),driveSettings:{folderId:String(e.DriveFolderID||e.driveFolderId||""),autoUpload:!!(e.DriveAutoUpload||e.driveAutoUpload),maxFileSize:Number(e.DriveMaxFileSize||e.driveMaxFileSize||10),allowedFileTypes:e.DriveAllowedFileTypes||e.driveAllowedFileTypes?String(e.DriveAllowedFileTypes||e.driveAllowedFileTypes).split(",").map(t=>t.trim()).filter(Boolean):["application/pdf","image/jpeg","image/png"]},spreadsheetSettings:{spreadsheetId:String(e.SpreadsheetID||e.spreadsheetId||""),autoSync:!!(e.SpreadsheetAutoSync||e.spreadsheetAutoSync||!0),syncInterval:Number(e.SpreadsheetSyncInterval||e.spreadsheetSyncInterval||15)},notificationSettings:{emailReminders:!!(e.NotificationEmailReminders||e.notificationEmailReminders),reminderFrequency:String(e.NotificationReminderFrequency||e.notificationReminderFrequency||"weekly"),healthGoalAlerts:!!(e.NotificationHealthGoalAlerts||e.notificationHealthGoalAlerts||!0)},createdAt:String(e.CreatedAt||e.createdAt||new Date().toISOString()),updatedAt:String(e.UpdatedAt||e.updatedAt||new Date().toISOString())}),Bg=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),date:String(e.Date||e.date||""),meal:String(e.Meal||e.meal||""),food:String(e.Food||e.food||""),calories:Number(e.Calories||e.calories||0),protein:Number(e.Protein||e.protein||0),carbs:Number(e.Carbs||e.carbs||0),fat:Number(e.Fat||e.fat||0),fiber:Number(e.Fiber||e.fiber||0),notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,timestamp:String(e.Timestamp||e.timestamp||new Date().toISOString())}),Hg=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),date:String(e.Date||e.date||""),meal:String(e.Meal||e.meal||""),recipeName:String(e.RecipeName||e.recipeName||""),ingredients:String(e.Ingredients||e.ingredients||""),instructions:String(e.Instructions||e.instructions||""),prepTime:Number(e.PrepTime||e.prepTime||0),cookTime:Number(e.CookTime||e.cookTime||0),servings:Number(e.Servings||e.servings||0),calories:Number(e.Calories||e.calories||0),protein:Number(e.Protein||e.protein||0),carbs:Number(e.Carbs||e.carbs||0),fat:Number(e.Fat||e.fat||0),tags:e.Tags?String(e.Tags).split(",").map(t=>t.trim()):[],notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,timestamp:String(e.Timestamp||e.timestamp||new Date().toISOString())}),zg=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),date:String(e.Date||e.date||""),type:String(e.Type||e.type||""),value:Number(e.Value||e.value||0),unit:String(e.Unit||e.unit||""),notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,timestamp:String(e.Timestamp||e.timestamp||new Date().toISOString())}),Gg=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),date:String(e.Date||e.date||""),type:String(e.Type||e.type||""),duration:Number(e.Duration||e.duration||0),moodBefore:Number(e.MoodBefore||e.moodBefore||0),moodAfter:Number(e.MoodAfter||e.moodAfter||0),stressBefore:Number(e.StressBefore||e.stressBefore||0),stressAfter:Number(e.StressAfter||e.stressAfter||0),guided:!!(e.Guided||e.guided),notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,timestamp:String(e.Timestamp||e.timestamp||new Date().toISOString())}),Wg=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),date:String(e.Date||e.date||""),time:String(e.Time||e.time||""),bloodPressureSystolic:e.BloodPressureSystolic||e.bloodPressureSystolic?Number(e.BloodPressureSystolic||e.bloodPressureSystolic):void 0,bloodPressureDiastolic:e.BloodPressureDiastolic||e.bloodPressureDiastolic?Number(e.BloodPressureDiastolic||e.bloodPressureDiastolic):void 0,heartRate:e.HeartRate||e.heartRate?Number(e.HeartRate||e.heartRate):void 0,temperature:e.Temperature||e.temperature?Number(e.Temperature||e.temperature):void 0,respiratoryRate:e.RespiratoryRate||e.respiratoryRate?Number(e.RespiratoryRate||e.respiratoryRate):void 0,oxygenSaturation:e.OxygenSaturation||e.oxygenSaturation?Number(e.OxygenSaturation||e.oxygenSaturation):void 0,notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,timestamp:String(e.Timestamp||e.timestamp||new Date().toISOString())}),Ug=e=>({id:String(e.ID||e.id||""),personId:String(e.PersonID||e.personId||""),date:String(e.Date||e.date||""),time:String(e.Time||e.time||""),weight:e.Weight||e.weight?Number(e.Weight||e.weight):void 0,height:e.Height||e.height?Number(e.Height||e.height):void 0,bodyFat:e.BodyFat||e.bodyFat?Number(e.BodyFat||e.bodyFat):void 0,muscleMass:e.MuscleMass||e.muscleMass?Number(e.MuscleMass||e.muscleMass):void 0,bmi:e.BMI||e.bmi?Number(e.BMI||e.bmi):void 0,waist:e.Waist||e.waist?Number(e.Waist||e.waist):void 0,chest:e.Chest||e.chest?Number(e.Chest||e.chest):void 0,hips:e.Hips||e.hips?Number(e.Hips||e.hips):void 0,neck:e.Neck||e.neck?Number(e.Neck||e.neck):void 0,notes:e.Notes||e.notes?String(e.Notes||e.notes):void 0,timestamp:String(e.Timestamp||e.timestamp||new Date().toISOString())}),tt=Zs()(ea((e,t)=>({nutritionEntries:[],mealPlans:[],healthEntries:[],meditationEntries:[],vitalSigns:[],bodyMeasurements:[],people:[],healthDocuments:[],healthConfigs:[],currentPersonId:"self",nutritionGoals:{personId:"self",dailyCalories:2e3,protein:150,carbs:250,fat:65,fiber:25,water:8},isLoading:!1,error:null,lastSyncTime:null,isInitialized:!1,dataCache:{lastFetch:null,isValid:!1},pendingActions:[],setNutritionGoals:n=>e({nutritionGoals:n}),setCurrentPersonId:n=>{e({currentPersonId:n});const{people:s,nutritionGoals:a}=t();s.find(o=>o.id===n)&&a.personId!==n&&e({nutritionGoals:{...a,personId:n}})},addPerson:async n=>{e({isLoading:!0,error:null});try{const s={...n,id:`person-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},a={ID:s.id,Name:s.name,Relationship:s.relationship,Email:s.email||"",Phone:s.phone||"",DateOfBirth:s.dateOfBirth||"",EmergencyContact:s.emergencyContact||!1,Notes:s.notes||"",Avatar:s.avatar||"",CreatedAt:s.createdAt,UpdatedAt:s.updatedAt},i=await Te("family_members",a);return i.success?(e(o=>({people:[...o.people,s],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to save person",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},updatePerson:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().people,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Person not found",isLoading:!1}),!1;const l={...a[i],...s,updatedAt:new Date().toISOString()},u={ID:l.id,Name:l.name,Relationship:l.relationship,Email:l.email||"",Phone:l.phone||"",DateOfBirth:l.dateOfBirth||"",EmergencyContact:l.emergencyContact||!1,Notes:l.notes||"",Avatar:l.avatar||"",CreatedAt:l.createdAt,UpdatedAt:l.updatedAt},d=await Ge("family_members",i+2,u);return d.success?(e(c=>({people:c.people.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update person",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deletePerson:async n=>{e({isLoading:!0,error:null});try{const a=t().people.findIndex(o=>o.id===n);if(a===-1)return e({error:"Person not found",isLoading:!1}),!1;const i=await ze("family_members",a+2);return i.success?(e(o=>({people:o.people.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete person",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},uploadDocument:async(n,s)=>{var a;e({isLoading:!0,error:null});try{const{currentPersonId:i,healthConfigs:o,people:l}=t();let u=yt.getHealthFolderId();const d=o.find(h=>h.personId===i);if(d&&d.driveSettings.folderId)u=d.driveSettings.folderId,yt.setHealthFolderId(u);else{const h=l.find(p=>p.id===i);h&&h.relationship!=="self"&&(u=await yt.createFamilyMemberFolder(h.name))}const c=await yt.uploadHealthDocument(s,n.fileName,i!=="self",(a=l.find(h=>h.id===i))==null?void 0:a.name,n.description),m={...n,id:`doc-${Date.now()}`,uploadDate:new Date().toISOString(),driveFileId:c.fileId,driveUrl:c.fileUrl,fileSize:c.size},f={ID:m.id,PersonID:m.personId,Title:m.title,Description:m.description||"",FileName:m.fileName,FileType:m.fileType,FileSize:m.fileSize,Category:m.category,UploadDate:m.uploadDate,DriveFileID:m.driveFileId||"",DriveURL:m.driveUrl||"",Tags:m.tags?m.tags.join(","):"",IsConfidential:m.isConfidential};return(await Te("health_documents",f)).success?(e(h=>({healthDocuments:[...h.healthDocuments,m],isLoading:!1,lastSyncTime:Date.now()})),!0):(e(h=>({healthDocuments:[...h.healthDocuments,m],error:"Document uploaded but metadata save failed. Document is still accessible.",isLoading:!1})),!0)}catch(i){const o=te(i);return e({error:o,isLoading:!1}),!1}},deleteDocument:async n=>{e({isLoading:!0,error:null});try{const s=t().healthDocuments,a=s.findIndex(l=>l.id===n);if(a===-1)return e({error:"Document not found",isLoading:!1}),!1;const i=s[a];if(i.driveFileId)try{await yt.deleteHealthDocument(i.driveFileId)}catch(l){console.error("Error deleting from Drive:",l)}const o=await ze("health_documents",a+2);return o.success?(e(l=>({healthDocuments:l.healthDocuments.filter(u=>u.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:o.error||"Failed to delete document",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},saveHealthConfig:async n=>{e({isLoading:!0,error:null});try{const s={...n,id:`config-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},a={ID:s.id,PersonID:s.personId,DriveFolderID:s.driveSettings.folderId,DriveAutoUpload:s.driveSettings.autoUpload,DriveMaxFileSize:s.driveSettings.maxFileSize,DriveAllowedFileTypes:s.driveSettings.allowedFileTypes.join(","),SpreadsheetID:s.spreadsheetSettings.spreadsheetId,SpreadsheetAutoSync:s.spreadsheetSettings.autoSync,SpreadsheetSyncInterval:s.spreadsheetSettings.syncInterval,NotificationEmailReminders:s.notificationSettings.emailReminders,NotificationReminderFrequency:s.notificationSettings.reminderFrequency,NotificationHealthGoalAlerts:s.notificationSettings.healthGoalAlerts,CreatedAt:s.createdAt,UpdatedAt:s.updatedAt},i=await Te("health_configs",a);return i.success?(e(o=>({healthConfigs:[...o.healthConfigs,s],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to save health configuration",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},updateHealthConfig:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().healthConfigs,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Configuration not found",isLoading:!1}),!1;const o=a[i],l={...o,...s,driveSettings:{...o.driveSettings,...s.driveSettings||{}},spreadsheetSettings:{...o.spreadsheetSettings,...s.spreadsheetSettings||{}},notificationSettings:{...o.notificationSettings,...s.notificationSettings||{}},updatedAt:new Date().toISOString()},u={ID:l.id,PersonID:l.personId,DriveFolderID:l.driveSettings.folderId,DriveAutoUpload:l.driveSettings.autoUpload,DriveMaxFileSize:l.driveSettings.maxFileSize,DriveAllowedFileTypes:l.driveSettings.allowedFileTypes.join(","),SpreadsheetID:l.spreadsheetSettings.spreadsheetId,SpreadsheetAutoSync:l.spreadsheetSettings.autoSync,SpreadsheetSyncInterval:l.spreadsheetSettings.syncInterval,NotificationEmailReminders:l.notificationSettings.emailReminders,NotificationReminderFrequency:l.notificationSettings.reminderFrequency,NotificationHealthGoalAlerts:l.notificationSettings.healthGoalAlerts,CreatedAt:l.createdAt,UpdatedAt:l.updatedAt},d=await Ge("health_configs",i+2,u);return d.success?(e(c=>({healthConfigs:c.healthConfigs.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update health configuration",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},addNutritionEntry:async n=>{const s=Tg(n);if(s.length>0)return e({error:s.join(", ")}),!1;e({isLoading:!0,error:null});try{const a={...n,id:`nutrition-${Date.now()}`,timestamp:new Date().toISOString()},i=await Te("Nutrition_Log",{ID:a.id,PersonID:a.personId,Date:a.date,Meal:a.meal,Food:a.food,Calories:a.calories,Protein:a.protein,Carbs:a.carbs,Fat:a.fat,Fiber:a.fiber,Notes:a.notes||"",Timestamp:a.timestamp});if(i.success)return e(o=>({nutritionEntries:[...o.nutritionEntries,a],isLoading:!1,lastSyncTime:Date.now()})),!0;{const o={id:`pending-${Date.now()}`,type:"create",category:"nutrition",data:n,timestamp:Date.now()};return e(l=>({pendingActions:[...l.pendingActions,o],error:i.error||"Failed to save nutrition entry. Will retry when online.",isLoading:!1})),!1}}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},updateNutritionEntryAction:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().nutritionEntries,i=a.findIndex(d=>d.id===n);if(i===-1)return e({error:"Entry not found",isLoading:!1}),!1;const l={...a[i],...s,timestamp:new Date().toISOString()},u=await Ge("Nutrition_Log",i+2,{ID:l.id,PersonID:l.personId,Date:l.date,Meal:l.meal,Food:l.food,Calories:l.calories,Protein:l.protein,Carbs:l.carbs,Fat:l.fat,Fiber:l.fiber,Notes:l.notes||"",Timestamp:l.timestamp});return u.success?(e(d=>({nutritionEntries:d.nutritionEntries.map(c=>c.id===n?l:c),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:u.error||"Failed to update nutrition entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deleteNutritionEntryAction:async n=>{e({isLoading:!0,error:null});try{const a=t().nutritionEntries.findIndex(o=>o.id===n);if(a===-1)return e({error:"Entry not found",isLoading:!1}),!1;const i=await ze("Nutrition_Log",a+2);return i.success?(e(o=>({nutritionEntries:o.nutritionEntries.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete nutrition entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},addMealPlan:async n=>{e({isLoading:!0,error:null});try{const s={...n,id:`meal-${Date.now()}`,timestamp:new Date().toISOString()},a={ID:s.id,PersonID:s.personId,Date:s.date,Meal:s.meal,RecipeName:s.recipeName,Ingredients:s.ingredients,Instructions:s.instructions,PrepTime:s.prepTime,CookTime:s.cookTime,Servings:s.servings,Calories:s.calories,Protein:s.protein,Carbs:s.carbs,Fat:s.fat,Tags:s.tags?s.tags.join(","):"",Notes:s.notes||"",Timestamp:s.timestamp},i=await Te("Meal_Plans",a);return i.success?(e(o=>({mealPlans:[...o.mealPlans,s],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to save meal plan",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},updateMealPlanAction:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().mealPlans,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Meal plan not found",isLoading:!1}),!1;const l={...a[i],...s,timestamp:new Date().toISOString()},u={ID:l.id,PersonID:l.personId,Date:l.date,Meal:l.meal,RecipeName:l.recipeName,Ingredients:l.ingredients,Instructions:l.instructions,PrepTime:l.prepTime,CookTime:l.cookTime,Servings:l.servings,Calories:l.calories,Protein:l.protein,Carbs:l.carbs,Fat:l.fat,Tags:l.tags?l.tags.join(","):"",Notes:l.notes||"",Timestamp:l.timestamp},d=await Ge("Meal_Plans",i+2,u);return d.success?(e(c=>({mealPlans:c.mealPlans.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update meal plan",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deleteMealPlanAction:async n=>{e({isLoading:!0,error:null});try{const a=t().mealPlans.findIndex(o=>o.id===n);if(a===-1)return e({error:"Meal plan not found",isLoading:!1}),!1;const i=await ze("Meal_Plans",a+2);return i.success?(e(o=>({mealPlans:o.mealPlans.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete meal plan",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},addHealthEntry:async n=>{const s=Og(n);if(s.length>0)return e({error:s.join(", ")}),!1;e({isLoading:!0,error:null});try{const a={...n,id:`health-${Date.now()}`,timestamp:new Date().toISOString()},i={ID:a.id,PersonID:a.personId,Date:a.date,Type:a.type,Value:a.value,Unit:a.unit,Notes:a.notes||"",Timestamp:a.timestamp},o=await Te("Health_Tracking",i);return o.success?(e(l=>({healthEntries:[...l.healthEntries,a],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:o.error||"Failed to save health entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},updateHealthEntryAction:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().healthEntries,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Health entry not found",isLoading:!1}),!1;const l={...a[i],...s,timestamp:new Date().toISOString()},u={ID:l.id,PersonID:l.personId,Date:l.date,Type:l.type,Value:l.value,Unit:l.unit,Notes:l.notes||"",Timestamp:l.timestamp},d=await Ge("Health_Tracking",i+2,u);return d.success?(e(c=>({healthEntries:c.healthEntries.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update health entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deleteHealthEntryAction:async n=>{e({isLoading:!0,error:null});try{const a=t().healthEntries.findIndex(o=>o.id===n);if(a===-1)return e({error:"Health entry not found",isLoading:!1}),!1;const i=await ze("Health_Tracking",a+2);return i.success?(e(o=>({healthEntries:o.healthEntries.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete health entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},addMeditationEntry:async n=>{const s=Lg(n);if(s.length>0)return e({error:s.join(", ")}),!1;e({isLoading:!0,error:null});try{const a={...n,id:`meditation-${Date.now()}`,timestamp:new Date().toISOString()},i={ID:a.id,PersonID:a.personId,Date:a.date,Type:a.type,Duration:a.duration,MoodBefore:a.moodBefore,MoodAfter:a.moodAfter,StressBefore:a.stressBefore,StressAfter:a.stressAfter,Guided:a.guided,Notes:a.notes||"",Timestamp:a.timestamp},o=await Te("Meditation_Log",i);return o.success?(e(l=>({meditationEntries:[...l.meditationEntries,a],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:o.error||"Failed to save meditation entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},updateMeditationEntryAction:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().meditationEntries,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Meditation entry not found",isLoading:!1}),!1;const l={...a[i],...s,timestamp:new Date().toISOString()},u={ID:l.id,PersonID:l.personId,Date:l.date,Type:l.type,Duration:l.duration,MoodBefore:l.moodBefore,MoodAfter:l.moodAfter,StressBefore:l.stressBefore,StressAfter:l.stressAfter,Guided:l.guided,Notes:l.notes||"",Timestamp:l.timestamp},d=await Ge("Meditation_Log",i+2,u);return d.success?(e(c=>({meditationEntries:c.meditationEntries.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update meditation entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deleteMeditationEntryAction:async n=>{e({isLoading:!0,error:null});try{const a=t().meditationEntries.findIndex(o=>o.id===n);if(a===-1)return e({error:"Meditation entry not found",isLoading:!1}),!1;const i=await ze("Meditation_Log",a+2);return i.success?(e(o=>({meditationEntries:o.meditationEntries.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete meditation entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},addVitalSigns:async n=>{e({isLoading:!0,error:null});try{const s={...n,id:`vitals-${Date.now()}`,timestamp:new Date().toISOString()},a={ID:s.id,PersonID:s.personId,Date:s.date,Time:s.time,BloodPressureSystolic:s.bloodPressureSystolic||"",BloodPressureDiastolic:s.bloodPressureDiastolic||"",HeartRate:s.heartRate||"",Temperature:s.temperature||"",RespiratoryRate:s.respiratoryRate||"",OxygenSaturation:s.oxygenSaturation||"",Notes:s.notes||"",Timestamp:s.timestamp},i=await Te("Vital_Signs",a);return i.success?(e(o=>({vitalSigns:[...o.vitalSigns,s],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to save vital signs entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},updateVitalSignsAction:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().vitalSigns,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Vital signs entry not found",isLoading:!1}),!1;const l={...a[i],...s,timestamp:new Date().toISOString()},u={ID:l.id,PersonID:l.personId,Date:l.date,Time:l.time,BloodPressureSystolic:l.bloodPressureSystolic||"",BloodPressureDiastolic:l.bloodPressureDiastolic||"",HeartRate:l.heartRate||"",Temperature:l.temperature||"",RespiratoryRate:l.respiratoryRate||"",OxygenSaturation:l.oxygenSaturation||"",Notes:l.notes||"",Timestamp:l.timestamp},d=await Ge("Vital_Signs",i+2,u);return d.success?(e(c=>({vitalSigns:c.vitalSigns.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update vital signs entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deleteVitalSignsAction:async n=>{e({isLoading:!0,error:null});try{const a=t().vitalSigns.findIndex(o=>o.id===n);if(a===-1)return e({error:"Vital signs entry not found",isLoading:!1}),!1;const i=await ze("Vital_Signs",a+2);return i.success?(e(o=>({vitalSigns:o.vitalSigns.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete vital signs entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},addBodyMeasurement:async n=>{e({isLoading:!0,error:null});try{const s={...n,id:`measurement-${Date.now()}`,timestamp:new Date().toISOString()},a={ID:s.id,PersonID:s.personId,Date:s.date,Time:s.time,Weight:s.weight||"",Height:s.height||"",BodyFat:s.bodyFat||"",MuscleMass:s.muscleMass||"",BMI:s.bmi||"",Waist:s.waist||"",Chest:s.chest||"",Hips:s.hips||"",Neck:s.neck||"",Notes:s.notes||"",Timestamp:s.timestamp},i=await Te("Body_Measurements",a);return i.success?(e(o=>({bodyMeasurements:[...o.bodyMeasurements,s],isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to save body measurement entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},updateBodyMeasurementAction:async(n,s)=>{e({isLoading:!0,error:null});try{const a=t().bodyMeasurements,i=a.findIndex(c=>c.id===n);if(i===-1)return e({error:"Body measurement entry not found",isLoading:!1}),!1;const l={...a[i],...s,timestamp:new Date().toISOString()},u={ID:l.id,PersonID:l.personId,Date:l.date,Time:l.time,Weight:l.weight||"",Height:l.height||"",BodyFat:l.bodyFat||"",MuscleMass:l.muscleMass||"",BMI:l.bmi||"",Waist:l.waist||"",Chest:l.chest||"",Hips:l.hips||"",Neck:l.neck||"",Notes:l.notes||"",Timestamp:l.timestamp},d=await Ge("Body_Measurements",i+2,u);return d.success?(e(c=>({bodyMeasurements:c.bodyMeasurements.map(m=>m.id===n?l:m),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:d.error||"Failed to update body measurement entry",isLoading:!1}),!1)}catch(a){const i=te(a);return e({error:i,isLoading:!1}),!1}},deleteBodyMeasurementAction:async n=>{e({isLoading:!0,error:null});try{const a=t().bodyMeasurements.findIndex(o=>o.id===n);if(a===-1)return e({error:"Body measurement entry not found",isLoading:!1}),!1;const i=await ze("Body_Measurements",a+2);return i.success?(e(o=>({bodyMeasurements:o.bodyMeasurements.filter(l=>l.id!==n),isLoading:!1,lastSyncTime:Date.now()})),!0):(e({error:i.error||"Failed to delete body measurement entry",isLoading:!1}),!1)}catch(s){const a=te(s);return e({error:a,isLoading:!1}),!1}},fetchAllHealthData:async()=>{const{dataCache:n,isLoading:s,isInitialized:a}=t();if(s)return;const i=5*60*1e3,o=Date.now();if(!(n.isValid&&n.lastFetch&&o-n.lastFetch<i&&a)){e({isLoading:!0,error:null});try{const[l,u,d,c,m,f,g,h,p]=await Promise.allSettled([Fe("Nutrition_Log"),Fe("Meal_Plans"),Fe("Health_Tracking"),Fe("Meditation_Log"),Fe("family_members"),Fe("Vital_Signs"),Fe("Body_Measurements"),Fe("health_documents"),Fe("health_configs")]),v={isLoading:!1,lastSyncTime:o,isInitialized:!0,dataCache:{lastFetch:o,isValid:!0}};l.status==="fulfilled"&&l.value.success&&l.value.data&&(v.nutritionEntries=l.value.data.map(Bg)),u.status==="fulfilled"&&u.value.success&&u.value.data&&(v.mealPlans=u.value.data.map(Hg)),d.status==="fulfilled"&&d.value.success&&d.value.data&&(v.healthEntries=d.value.data.map(zg)),c.status==="fulfilled"&&c.value.success&&c.value.data&&(v.meditationEntries=c.value.data.map(Gg)),m.status==="fulfilled"&&m.value.success&&m.value.data&&(v.people=m.value.data.map($g)),f.status==="fulfilled"&&f.value.success&&f.value.data&&(v.vitalSigns=f.value.data.map(Wg)),g.status==="fulfilled"&&g.value.success&&g.value.data&&(v.bodyMeasurements=g.value.data.map(Ug)),h.status==="fulfilled"&&h.value.success&&h.value.data&&(v.healthDocuments=h.value.data.map(Ws)),p.status==="fulfilled"&&p.value.success&&p.value.data&&(v.healthConfigs=p.value.data.map(Vg));const w=[l,u,d,c,m,f,g,h,p].filter(M=>M.status==="rejected");w.length>0&&(v.error=`Failed to fetch some health data: ${w.length} failed requests`,v.dataCache={lastFetch:o,isValid:!1}),e(v)}catch(l){const u=te(l);e({error:u,isLoading:!1,dataCache:{lastFetch:o,isValid:!1}})}}},forceRefreshData:async()=>{e({dataCache:{lastFetch:null,isValid:!1}}),await t().fetchAllHealthData()},invalidateCache:()=>{e({dataCache:{lastFetch:null,isValid:!1}})},syncPendingActions:async()=>{const{pendingActions:n}=t();if(n.length===0)return;e({isLoading:!0});const s=[];for(const a of n)try{let i=!1;switch(a.category){case"nutrition":a.type==="create"&&(i=await t().addNutritionEntry(a.data));break;case"meal":a.type==="create"&&(i=await t().addMealPlan(a.data));break;case"health":a.type==="create"&&(i=await t().addHealthEntry(a.data));break;case"meditation":a.type==="create"&&(i=await t().addMeditationEntry(a.data));break;case"vitals":a.type==="create"&&(i=await t().addVitalSigns(a.data));break;case"measurements":a.type==="create"&&(i=await t().addBodyMeasurement(a.data));break}i&&s.push(a.id)}catch(i){console.error("Failed to sync pending action:",a,i)}e(a=>({pendingActions:a.pendingActions.filter(i=>!s.includes(i.id)),isLoading:!1})),s.length>0&&t().fetchAllHealthData()},getDailyNutrition:n=>{const{nutritionEntries:s}=t();return ki(s,n)},getNutritionProgress:n=>{const{nutritionGoals:s}=t(),a=t().getDailyNutrition(n);return Fg(a,s)},getHealthTrend:(n,s=7)=>{const{healthEntries:a}=t();return _g(a,n,s)},getMeditationStats:(n=7)=>{const{meditationEntries:s}=t();return Ig(s,n)},getWeeklyHealthSummary:n=>{const{nutritionEntries:s,healthEntries:a,meditationEntries:i}=t(),o=Rg(n);return Ag(s,a,i,o)},clearError:()=>e({error:null}),setError:n=>e({error:n}),getPersonDocuments:n=>{const{healthDocuments:s,currentPersonId:a}=t(),i=n||a;return s.filter(o=>o.personId===i)},refreshDocuments:async()=>{e({isLoading:!0,error:null});try{const n=await Fe("health_documents");if(n.success&&n.data){const s=n.data.map(Ws);e({healthDocuments:s,isLoading:!1,lastSyncTime:Date.now()})}else e({error:n.error||"Failed to fetch documents",isLoading:!1})}catch(n){const s=te(n);e({error:s,isLoading:!1})}},downloadDocument:async n=>{const{healthDocuments:s}=t(),a=s.find(i=>i.id===n);if(!a||!a.driveFileId){e({error:"Document not found or no file ID available"});return}try{await yt.downloadHealthDocument(a.driveFileId,a.fileName)}catch(i){const o=te(i);e({error:`Failed to download document: ${o}`})}},getPersonConfig:n=>{const{healthConfigs:s,currentPersonId:a}=t(),i=n||a;return s.find(o=>o.personId===i)}}),{name:"health-store",partialize:e=>({nutritionEntries:e.nutritionEntries,mealPlans:e.mealPlans,healthEntries:e.healthEntries,meditationEntries:e.meditationEntries,vitalSigns:e.vitalSigns,bodyMeasurements:e.bodyMeasurements,people:e.people,nutritionGoals:e.nutritionGoals,currentPersonId:e.currentPersonId,pendingActions:e.pendingActions,lastSyncTime:e.lastSyncTime,isInitialized:e.isInitialized})})),qg=()=>{const{setCurrentView:e}=Nn(),{nutritionGoals:t,getDailyNutrition:n,getNutritionProgress:s,getHealthTrend:a,getMeditationStats:i,fetchAllHealthData:o,isLoading:l,error:u,clearError:d}=tt(),c=yr(new Date),m=x.useRef(!1),f=x.useRef(0);x.useEffect(()=>{const y=Date.now(),j=y-5*60*1e3;(!m.current||f.current<j)&&(m.current=!0,f.current=y,o())},[]);const g=n(c),h=s(c),p=a("weight"),v=a("heart_rate"),w=i(7),M=y=>y>2?r.jsx(Pt,{className:"h-4 w-4 text-green-500"}):y<-2?r.jsx(Mc,{className:"h-4 w-4 text-red-500"}):r.jsx(vc,{className:"h-4 w-4 text-gray-500"});return u?r.jsxs(A,{children:[r.jsx(H,{className:"flex flex-row items-center justify-between",children:r.jsxs(z,{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5 text-red-500"}),"Health Overview"]})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx("p",{className:"text-red-500 mb-2",children:u}),r.jsx(R,{onClick:()=>{d(),o()},size:"sm",children:"Retry"})]})})]}):r.jsxs(A,{children:[r.jsxs(H,{className:"flex flex-row items-center justify-between",children:[r.jsxs(z,{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5 text-red-500"}),"Health Overview"]}),l&&r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})]}),r.jsxs(L,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[r.jsx(Qn,{className:"h-5 w-5 mx-auto mb-1 text-blue-600"}),r.jsx("div",{className:"text-lg font-semibold text-blue-700",children:g.calories}),r.jsx("div",{className:"text-xs text-blue-600",children:"Calories"})]}),r.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[r.jsx(Fc,{className:"h-5 w-5 mx-auto mb-1 text-green-600"}),r.jsxs("div",{className:"text-lg font-semibold text-green-700 flex items-center justify-center gap-1",children:[Math.abs(p).toFixed(1),"%",M(p)]}),r.jsx("div",{className:"text-xs text-green-600",children:"Weight"})]}),r.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded-lg",children:[r.jsx(Nt,{className:"h-5 w-5 mx-auto mb-1 text-purple-600"}),r.jsx("div",{className:"text-lg font-semibold text-purple-700",children:w.totalSessions}),r.jsx("div",{className:"text-xs text-purple-600",children:"Sessions"})]}),r.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded-lg",children:[r.jsx(we,{className:"h-5 w-5 mx-auto mb-1 text-orange-600"}),r.jsxs("div",{className:"text-lg font-semibold text-orange-700 flex items-center justify-center gap-1",children:[Math.abs(v).toFixed(1),"%",M(v)]}),r.jsx("div",{className:"text-xs text-orange-600",children:"Heart Rate"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Today's Nutrition"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{children:"Calories"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[g.calories," / ",t.dailyCalories]})]}),r.jsx(Lt,{value:Math.min(h.calories,100),className:"h-2"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Protein"}),r.jsxs("span",{children:[g.protein,"g"]})]}),r.jsx(Lt,{value:Math.min(h.protein,100),className:"h-1 mt-1"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Carbs"}),r.jsxs("span",{children:[g.carbs,"g"]})]}),r.jsx(Lt,{value:Math.min(h.carbs,100),className:"h-1 mt-1"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Fat"}),r.jsxs("span",{children:[g.fat,"g"]})]}),r.jsx(Lt,{value:Math.min(h.fat,100),className:"h-1 mt-1"})]})]})]}),w.totalSessions>0&&r.jsxs("div",{className:"flex items-center justify-between p-2 bg-indigo-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nt,{className:"h-4 w-4 text-indigo-600"}),r.jsx("span",{className:"text-sm font-medium",children:"Meditation Streak"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ie,{variant:"secondary",children:[w.streak," days"]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[w.totalMinutes,"min this week"]})]})]}),"        ",r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t",children:[r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>e("nutrition"),className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"h-4 w-4"}),"Log Food"]}),r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>e("health-tracking"),className:"flex items-center gap-2",children:[r.jsx(we,{className:"h-4 w-4"}),"Log Health"]})]}),r.jsxs(R,{variant:"ghost",size:"sm",onClick:()=>e("meditation"),className:"w-full flex items-center gap-2",children:[r.jsx(Nt,{className:"h-4 w-4"}),"Start Meditation"]})]})]})},Yg=()=>{const{cards:e}=za(),{activeWorkout:t}=ta(),{workoutLogs:n}=Re(),s=x.useMemo(()=>({MuscleFatigueCard:()=>r.jsx(Mg,{logs:n}),ActiveWorkoutCard:()=>t?r.jsx(kg,{}):null,TotalWorkoutsCard:()=>r.jsx(Lc,{}),WeeklyAverageCard:()=>r.jsx($c,{}),WeightLiftedCard:()=>r.jsx(Vc,{}),PersonalRecordsCard:()=>r.jsx(Bc,{}),ProgressCard:()=>r.jsx(bg,{}),HealthDashboardWidget:()=>r.jsx(qg,{}),TodoCard:()=>r.jsx(yg,{}),NewWorkoutActionCard:()=>r.jsx(vm,{}),AnalyticsActionCard:()=>r.jsx(ym,{}),SetGoalsActionCard:()=>r.jsx(wm,{}),ProgressionByMuscleCard:()=>r.jsx(hm,{}),MuscleGroupVolumeCard:()=>r.jsx(pm,{}),FatigueProgressionCard:()=>r.jsx(xm,{}),WorkoutLogTableCard:()=>r.jsx(fg,{}),WorkoutSummaryCard:()=>r.jsx(vg,{})}),[n,t]),a=x.useMemo(()=>e.filter(u=>u.component==="ActiveWorkoutCard"&&!t?!1:u.isVisible),[e,t]),i=x.useMemo(()=>a.reduce((d,c)=>(d[c.category]||(d[c.category]=[]),d[c.category].push(c),d),{}),[a]),o=u=>{const d=s[u.component];if(!d)return console.warn(`Component ${u.component} not found in componentMap`),null;const c=d();return c?r.jsx("div",{className:"w-full",children:c},u.id):null},l=(u,d)=>{const c=d.some(g=>g.component==="WorkoutSummaryCard"),m=d.some(g=>g.component==="WorkoutLogTableCard");if(c&&m)return"grid-cols-1 lg:grid-cols-2";if(c||m)return"grid-cols-1";const f=d.length;switch(u){case"stat":return f<=2?"grid-cols-1 md:grid-cols-2":"grid-cols-2 md:grid-cols-4";case"action":return"grid-cols-1 md:grid-cols-3";case"chart":return"grid-cols-1 lg:grid-cols-2";case"content":return f===1?"grid-cols-1":"grid-cols-1 md:grid-cols-2";case"health":return"grid-cols-1";default:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}};return a.length===0?r.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-medium mb-2",children:"No visible cards"}),r.jsx("p",{className:"text-sm",children:'Use the "Manage Cards" button above to show cards'})]})}):r.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([u,d])=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:[u," (",d.length,")"]}),r.jsx("div",{className:`grid gap-4 ${l(u,d)} ${d.some(c=>c.component==="WorkoutSummaryCard")&&d.some(c=>c.component==="WorkoutLogTableCard")?"grid-rows-1 min-h-[600px]":""}`,children:d.map(o).filter(Boolean)})]},u))})},Us=()=>r.jsxs(Sg,{className:"flex flex-col gap-2 sm:gap-4 md:gap-6 px-2 sm:px-0",children:[r.jsx(Qr,{children:r.jsx(Xr,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-3 p-2 sm:p-3 md:p-4",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-foreground",children:"Dashboard"}),r.jsx(wg,{})]})})}),r.jsx(Qr,{children:r.jsx(Xr,{delay:.05,children:r.jsx(Oc,{})})}),r.jsx(Qr,{children:r.jsx(Xr,{delay:.1,children:r.jsx("div",{className:"relative",children:r.jsx(Yg,{})})})})]}),Kg=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight mb-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Workouts"}),r.jsx("p",{className:"text-muted-foreground",children:"Track and manage your workout history"}),r.jsx(Mi,{})]}),Xg=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight mb-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Schedule"}),r.jsx("p",{className:"text-muted-foreground",children:"Plan your upcoming workout sessions"}),r.jsx(A,{children:r.jsx(L,{className:"p-6",children:r.jsx("p",{children:"Schedule feature coming soon..."})})})]}),Qg=()=>{const{workoutLogs:e}=Re();return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight mb-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Statistics"}),r.jsx("p",{className:"text-muted-foreground",children:"View detailed analytics of your progress"}),r.jsx(mm,{workoutLogs:e})]})},Jg=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight mb-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Profile"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your user profile and preferences"}),r.jsx(A,{children:r.jsx(L,{className:"p-6",children:r.jsx("p",{children:"Profile feature coming soon..."})})})]}),Zg=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight mb-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Settings"}),r.jsx("p",{className:"text-muted-foreground",children:"Configure your app settings"}),r.jsx(A,{children:r.jsx(L,{className:"p-6",children:r.jsx("p",{children:"Settings feature content goes here..."})})})]}),ef=()=>{const[e,t]=x.useState(!1),[n,s]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState(ae(new Date,"yyyy-MM-dd")),[u,d]=x.useState(""),[c,m]=x.useState({id:"",personId:"self",date:o,meal:"breakfast",food:"",calories:0,protein:0,carbs:0,fat:0,fiber:0,notes:"",timestamp:new Date().toISOString()}),f={calories:2e3,protein:150,carbs:250,fat:65,fiber:25},{nutritionEntries:g,isLoading:h,isInitialized:p,fetchAllHealthData:v,addNutritionEntry:w,updateNutritionEntryAction:M,deleteNutritionEntryAction:y}=tt(),j=x.useMemo(()=>g.filter(D=>D.date===o),[g,o]);x.useEffect(()=>{p||v()},[p,v]),x.useEffect(()=>{t(h)},[h]);const N=()=>j.reduce((D,Y)=>({calories:D.calories+Y.calories,protein:D.protein+Y.protein,carbs:D.carbs+Y.carbs,fat:D.fat+Y.fat,fiber:D.fiber+Y.fiber}),{calories:0,protein:0,carbs:0,fat:0,fiber:0}),P=async D=>{D.preventDefault(),t(!0);try{a!=null&&a.id?(await M(a.id,c),B.success("Nutrition entry updated successfully!")):(await w(c),B.success("Nutrition entry added successfully!")),W()}catch(Y){console.error("Error saving nutrition entry:",Y),B.error("Failed to save nutrition entry. Please try again.")}finally{t(!1)}},b=D=>{i(D),m(D),s(!0)},F=async D=>{if(confirm("Are you sure you want to delete this entry?")){t(!0);try{D.id&&(await y(D.id),B.success("Nutrition entry deleted successfully!"))}catch(Y){console.error("Error deleting nutrition entry:",Y),B.error("Failed to delete nutrition entry. Please try again.")}finally{t(!1)}}},W=()=>{m({id:"",personId:"self",date:o,meal:"breakfast",food:"",calories:0,protein:0,carbs:0,fat:0,fiber:0,notes:"",timestamp:new Date().toISOString()}),i(null),s(!1)},E=j.filter(D=>D.food.toLowerCase().includes(u.toLowerCase())),C=N(),T=D=>{switch(D){case"breakfast":return"bg-orange-100 text-orange-800";case"lunch":return"bg-green-100 text-green-800";case"dinner":return"bg-blue-100 text-blue-800";case"snack":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},q=(D,Y)=>Math.min(D/Y*100,100);return r.jsxs("div",{className:"p-2 sm:p-4 md:p-6 space-y-4 md:space-y-6 min-h-[80vh]",children:[r.jsx(Tn,{icon:gs,title:"Nutrition Tracking",date:o,onDateChange:l,action:r.jsxs(R,{onClick:()=>s(!0),"aria-label":"Add Food Entry",children:[r.jsx(Mt,{className:"h-4 w-4"})," Add Food Entry"]})}),r.jsxs(Cr,{defaultValue:"overview",className:"w-full",children:[r.jsxs(Pr,{className:"grid w-full grid-cols-3",children:[r.jsx(ge,{value:"overview",children:"Overview"}),r.jsx(ge,{value:"entries",children:"Food Entries"}),r.jsx(ge,{value:"analytics",children:"Analytics"})]}),r.jsxs(fe,{value:"overview",className:"space-y-6",children:[r.jsxs(A,{children:[r.jsx(H,{children:r.jsxs(z,{className:"flex items-center gap-2",children:[r.jsx(Pt,{className:"h-5 w-5"}),"Daily Nutrition Summary"]})}),r.jsx(L,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(C).map(([D,Y])=>{const Z=f[D],de=q(Y,Z);return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"capitalize font-medium",children:D}),r.jsxs("span",{className:"text-gray-600",children:[Math.round(Y),"/",Z,D==="calories"?"":"g"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${de}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(de),"% of goal"]})]},D)})})})]}),r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"Today's Food Entries"})}),r.jsx(L,{children:E.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(gs,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No food entries"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start tracking your nutrition by adding your first food entry."})]}):r.jsx("div",{className:"space-y-4",children:E.map((D,Y)=>r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ie,{className:T(D.meal),children:D.meal.charAt(0).toUpperCase()+D.meal.slice(1)}),r.jsx("h3",{className:"font-medium",children:D.food})]}),r.jsxs("div",{className:"mt-2 text-sm text-gray-600 grid grid-cols-2 md:grid-cols-5 gap-2",children:[r.jsxs("span",{children:[D.calories," cal"]}),r.jsxs("span",{children:[D.protein,"g protein"]}),r.jsxs("span",{children:[D.carbs,"g carbs"]}),r.jsxs("span",{children:[D.fat,"g fat"]}),r.jsxs("span",{children:[D.fiber,"g fiber"]})]}),D.notes&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:D.notes})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>b(D),children:r.jsx(Kt,{className:"h-4 w-4"})}),"                        ",r.jsx(R,{variant:"outline",size:"sm",onClick:()=>F(D),children:r.jsx(mt,{className:"h-4 w-4"})})]})]},Y))})})]})]}),r.jsx(fe,{value:"entries",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"All Food Entries"})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(kt,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Food Entries"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View and manage all your food entries across different dates."})]})})]})}),r.jsx(fe,{value:"analytics",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"Nutrition Analytics"})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Pt,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nutrition Analytics"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Track your nutrition trends and patterns over time."})]})})]})})]}),n&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(A,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsx(H,{children:r.jsx(z,{children:a?"Edit Food Entry":"Add Food Entry"})}),r.jsx(L,{children:r.jsxs("form",{onSubmit:P,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"meal",children:"Meal"}),"                  ",r.jsxs(Ke,{value:c.meal,onValueChange:D=>m({...c,meal:D}),children:[r.jsx(Xe,{children:r.jsx(Qe,{placeholder:"Select meal"})}),r.jsxs(Je,{children:[r.jsx(ce,{value:"breakfast",children:"Breakfast"}),r.jsx(ce,{value:"lunch",children:"Lunch"}),r.jsx(ce,{value:"dinner",children:"Dinner"}),r.jsx(ce,{value:"snack",children:"Snack"})]})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"food",children:"Food"}),r.jsx(G,{id:"food",value:c.food,onChange:D=>m({...c,food:D.target.value}),placeholder:"e.g., Grilled Chicken Breast",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"calories",children:"Calories"}),r.jsx(G,{id:"calories",type:"number",value:c.calories,onChange:D=>m({...c,calories:Number(D.target.value)}),min:"0",required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"protein",children:"Protein (g)"}),r.jsx(G,{id:"protein",type:"number",step:"0.1",value:c.protein,onChange:D=>m({...c,protein:Number(D.target.value)}),min:"0",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"carbs",children:"Carbs (g)"}),r.jsx(G,{id:"carbs",type:"number",step:"0.1",value:c.carbs,onChange:D=>m({...c,carbs:Number(D.target.value)}),min:"0",required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"fat",children:"Fat (g)"}),r.jsx(G,{id:"fat",type:"number",step:"0.1",value:c.fat,onChange:D=>m({...c,fat:Number(D.target.value)}),min:"0",required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"fiber",children:"Fiber (g)"}),r.jsx(G,{id:"fiber",type:"number",step:"0.1",value:c.fiber,onChange:D=>m({...c,fiber:Number(D.target.value)}),min:"0"})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"notes",children:"Notes (optional)"}),r.jsx(Ee,{id:"notes",value:c.notes,onChange:D=>m({...c,notes:D.target.value}),placeholder:"Any additional notes about this food...",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(R,{type:"submit",disabled:e,className:"flex-1",children:e?"Saving...":a?"Update Entry":"Add Entry"}),r.jsx(R,{type:"button",variant:"outline",onClick:W,children:"Cancel"})]})]})})]})})]})},tf=()=>{const[e,t]=x.useState([]),[n,s]=x.useState([]),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[u,d]=x.useState(null),[c,m]=x.useState(It(new Date)),[f,g]=x.useState("planner"),[h,p]=x.useState({date:ae(new Date,"yyyy-MM-dd"),meal:"breakfast",recipeName:"",ingredients:"",instructions:"",prepTime:0,cookTime:0,servings:1,calories:0,protein:0,carbs:0,fat:0,tags:[],notes:""}),v=Array.from({length:7},(C,T)=>xt(c,T)),w=["breakfast","lunch","dinner","snack"];x.useEffect(()=>{(async()=>{i(!0);try{const T=await Xn(),q=ae(c,"yyyy-MM-dd"),D=ae(xt(c,6),"yyyy-MM-dd"),Y=T.map((Z,de)=>({...Z,rowIndex:de+2})).filter(Z=>Z.date>=q&&Z.date<=D);t(Y)}catch(T){console.error("Error loading meal plans:",T),B.error("Failed to load meal plans. Please try again.")}finally{i(!1)}})(),y()},[c]);const M=async()=>{i(!0);try{const C=await Xn(),T=ae(c,"yyyy-MM-dd"),q=ae(xt(c,6),"yyyy-MM-dd"),D=C.map((Y,Z)=>({...Y,rowIndex:Z+2})).filter(Y=>Y.date>=T&&Y.date<=q);t(D)}catch(C){console.error("Error loading meal plans:",C),B.error("Failed to load meal plans. Please try again.")}finally{i(!1)}},y=async()=>{try{s([{id:"1",name:"Overnight Oats",ingredients:"1 cup rolled oats, 1 cup milk, 1 tbsp chia seeds, 1 tbsp honey, 1/2 cup berries",instructions:"Mix all ingredients in a jar. Refrigerate overnight. Enjoy cold in the morning.",prepTime:5,cookTime:0,servings:1,calories:350,protein:15,carbs:55,fat:8,tags:["healthy","quick","meal-prep"],category:"breakfast"},{id:"2",name:"Grilled Chicken Salad",ingredients:"6oz chicken breast, 2 cups mixed greens, 1/4 cup cherry tomatoes, 1/4 avocado, 2 tbsp olive oil vinaigrette",instructions:"Grill chicken breast. Assemble salad with greens, tomatoes, and avocado. Top with sliced chicken and dressing.",prepTime:10,cookTime:15,servings:1,calories:450,protein:40,carbs:12,fat:25,tags:["healthy","high-protein","gluten-free"],category:"lunch"}])}catch(C){console.error("Error loading templates:",C)}},j=async C=>{C.preventDefault(),i(!0);try{u!=null&&u.rowIndex?(await Ao(u.rowIndex,h),B.success("Meal plan updated successfully!")):(await To(h),B.success("Meal plan added successfully!")),F(),M()}catch(T){console.error("Error saving meal plan:",T),B.error("Failed to save meal plan. Please try again.")}finally{i(!1)}},N=C=>{d(C),p(C),l(!0)},P=async C=>{if(confirm("Are you sure you want to delete this meal plan?")){i(!0);try{await Eo(C),B.success("Meal plan deleted successfully!"),M()}catch(T){console.error("Error deleting meal plan:",T),B.error("Failed to delete meal plan. Please try again.")}finally{i(!1)}}},b=C=>{p({date:ae(new Date,"yyyy-MM-dd"),meal:C.category,recipeName:C.name,ingredients:C.ingredients,instructions:C.instructions,prepTime:C.prepTime,cookTime:C.cookTime,servings:C.servings,calories:C.calories,protein:C.protein,carbs:C.carbs,fat:C.fat,tags:C.tags,notes:""}),l(!0)},F=()=>{p({date:ae(new Date,"yyyy-MM-dd"),meal:"breakfast",recipeName:"",ingredients:"",instructions:"",prepTime:0,cookTime:0,servings:1,calories:0,protein:0,carbs:0,fat:0,tags:[],notes:""}),d(null),l(!1)},W=(C,T)=>{const q=ae(C,"yyyy-MM-dd");return e.find(D=>D.date===q&&D.meal===T)},E=C=>{switch(C){case"breakfast":return"bg-orange-100 text-orange-800 border-orange-200";case"lunch":return"bg-green-100 text-green-800 border-green-200";case"dinner":return"bg-blue-100 text-blue-800 border-blue-200";case"snack":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Meal Planning"}),r.jsx("p",{className:"text-gray-600",children:"Plan your meals and track your recipes"})]}),"        ",r.jsxs("div",{className:"flex gap-2",children:["          ",r.jsxs(R,{variant:"outline",onClick:()=>B.info("Template feature coming soon!"),className:"flex items-center gap-2",children:[r.jsx(Bo,{className:"h-4 w-4"}),"Templates"]}),r.jsxs(R,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"h-4 w-4"}),"Add Meal"]})]})]}),r.jsxs(Cr,{value:f,onValueChange:g,className:"w-full",children:[r.jsxs(Pr,{className:"grid w-full grid-cols-3",children:[r.jsx(ge,{value:"planner",children:"Weekly Planner"}),r.jsx(ge,{value:"templates",children:"Recipe Templates"}),r.jsx(ge,{value:"shopping",children:"Shopping List"})]}),r.jsxs(fe,{value:"planner",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(R,{variant:"outline",onClick:()=>m(xt(c,-7)),children:"Previous Week"}),r.jsxs("h2",{className:"text-xl font-semibold",children:["Week of ",ae(c,"MMM d")," - ",ae(xt(c,6),"MMM d, yyyy")]}),r.jsx(R,{variant:"outline",onClick:()=>m(xt(c,7)),children:"Next Week"})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-4",children:v.map(C=>r.jsxs(A,{className:"min-h-[400px]",children:[r.jsx(H,{className:"pb-2",children:r.jsxs(z,{className:"text-center text-sm",children:[ae(C,"EEE"),r.jsx("br",{}),r.jsx("span",{className:"text-lg",children:ae(C,"d")})]})}),r.jsx(L,{className:"space-y-2",children:w.map(T=>{const q=W(C,T);return r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:T}),q?r.jsxs("div",{className:`p-2 rounded-lg border ${E(T)}`,children:[r.jsx("div",{className:"font-medium text-xs truncate",children:q.recipeName}),r.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[r.jsx(lr,{className:"h-3 w-3"}),q.prepTime+q.cookTime,"min"]}),r.jsxs("div",{className:"text-xs text-gray-600",children:[q.calories," cal"]}),r.jsxs("div",{className:"flex gap-1 mt-1",children:[r.jsx(R,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>N(q),children:r.jsx(Kt,{className:"h-3 w-3"})}),r.jsx(R,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>q.rowIndex&&P(q.rowIndex),children:r.jsx(mt,{className:"h-3 w-3"})})]})]}):r.jsx(R,{variant:"ghost",className:"w-full h-12 border-2 border-dashed border-gray-300 text-gray-500 hover:border-gray-400",onClick:()=>{p({...h,date:ae(C,"yyyy-MM-dd"),meal:T}),l(!0)},children:r.jsx(Mt,{className:"h-4 w-4"})})]},T)})})]},ae(C,"yyyy-MM-dd")))})]}),r.jsx(fe,{value:"templates",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(C=>r.jsxs(A,{className:"hover:shadow-md transition-shadow",children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx(z,{className:"text-lg",children:C.name}),r.jsx(ie,{className:E(C.category),variant:"outline",children:C.category})]}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>b(C),children:r.jsx(ec,{className:"h-4 w-4"})})]})}),r.jsx(L,{children:r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(lr,{className:"h-4 w-4"}),C.prepTime+C.cookTime,"min"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(bt,{className:"h-4 w-4"}),C.servings," serving",C.servings>1?"s":""]})]}),r.jsxs("div",{className:"text-gray-600",children:[C.calories," calories | ",C.protein,"g protein"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.tags.map(T=>r.jsx(ie,{variant:"secondary",className:"text-xs",children:T},T))})]})})]},C.id))})}),r.jsx(fe,{value:"shopping",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"Shopping List"})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Kl,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Shopping List"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Generate shopping lists based on your weekly meal plans."})]})})]})})]}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(A,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(H,{children:r.jsx(z,{children:u?"Edit Meal Plan":"Add Meal Plan"})}),r.jsx(L,{children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"date",children:"Date"}),r.jsx(G,{id:"date",type:"date",value:h.date,onChange:C=>p({...h,date:C.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"meal",children:"Meal"}),r.jsxs(Ke,{value:h.meal,onValueChange:C=>p({...h,meal:C}),children:[r.jsx(Xe,{children:r.jsx(Qe,{})}),r.jsxs(Je,{children:[r.jsx(ce,{value:"breakfast",children:"Breakfast"}),r.jsx(ce,{value:"lunch",children:"Lunch"}),r.jsx(ce,{value:"dinner",children:"Dinner"}),r.jsx(ce,{value:"snack",children:"Snack"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"recipeName",children:"Recipe Name"}),r.jsx(G,{id:"recipeName",value:h.recipeName,onChange:C=>p({...h,recipeName:C.target.value}),placeholder:"e.g., Grilled Chicken with Vegetables",required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"ingredients",children:"Ingredients"}),r.jsx(Ee,{id:"ingredients",value:h.ingredients,onChange:C=>p({...h,ingredients:C.target.value}),placeholder:"List all ingredients with quantities...",rows:3,required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"instructions",children:"Instructions"}),r.jsx(Ee,{id:"instructions",value:h.instructions,onChange:C=>p({...h,instructions:C.target.value}),placeholder:"Step-by-step cooking instructions...",rows:4,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"prepTime",children:"Prep Time (min)"}),r.jsx(G,{id:"prepTime",type:"number",value:h.prepTime,onChange:C=>p({...h,prepTime:Number(C.target.value)}),min:"0"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"cookTime",children:"Cook Time (min)"}),r.jsx(G,{id:"cookTime",type:"number",value:h.cookTime,onChange:C=>p({...h,cookTime:Number(C.target.value)}),min:"0"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"servings",children:"Servings"}),r.jsx(G,{id:"servings",type:"number",value:h.servings,onChange:C=>p({...h,servings:Number(C.target.value)}),min:"1",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"calories",children:"Calories"}),r.jsx(G,{id:"calories",type:"number",value:h.calories,onChange:C=>p({...h,calories:Number(C.target.value)}),min:"0"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"protein",children:"Protein (g)"}),r.jsx(G,{id:"protein",type:"number",step:"0.1",value:h.protein,onChange:C=>p({...h,protein:Number(C.target.value)}),min:"0"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"carbs",children:"Carbs (g)"}),r.jsx(G,{id:"carbs",type:"number",step:"0.1",value:h.carbs,onChange:C=>p({...h,carbs:Number(C.target.value)}),min:"0"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"fat",children:"Fat (g)"}),r.jsx(G,{id:"fat",type:"number",step:"0.1",value:h.fat,onChange:C=>p({...h,fat:Number(C.target.value)}),min:"0"})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"notes",children:"Notes (optional)"}),r.jsx(Ee,{id:"notes",value:h.notes,onChange:C=>p({...h,notes:C.target.value}),placeholder:"Any additional notes...",rows:2})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(R,{type:"submit",disabled:a,className:"flex-1",children:a?"Saving...":u?"Update Meal":"Add Meal"}),r.jsx(R,{type:"button",variant:"outline",onClick:F,children:"Cancel"})]})]})})]})})]})},sn=({children:e,className:t=""})=>r.jsx("div",{className:`flex items-center justify-center rounded-full bg-gray-200 ${t}`,children:e}),an=({children:e,className:t=""})=>r.jsx("span",{className:`text-sm font-medium text-gray-600 ${t}`,children:e}),qs=({src:e,alt:t})=>e?r.jsx("img",{src:e,alt:t,className:"h-full w-full rounded-full object-cover"}):null,rf=({onAddPerson:e,showAddButton:t=!0,className:n=""})=>{const{people:s,currentPersonId:a,setCurrentPersonId:i}=tt(),o=s.find(d=>d.id===a)||{name:"Self",relationship:"self",avatar:void 0},l=d=>d.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2),u=d=>{switch(d){case"self":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"family":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"friend":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}};return r.jsxs("div",{className:`flex items-center gap-3 ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Tracking for:"})]}),r.jsxs(Ke,{value:a,onValueChange:i,children:[r.jsx(Xe,{className:"w-48",children:r.jsx(Qe,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(sn,{className:"h-6 w-6",children:[r.jsx(qs,{src:o.avatar}),r.jsx(an,{className:"text-xs",children:l(o.name)})]}),r.jsx("span",{children:o.name}),r.jsx(ie,{variant:"secondary",className:`text-xs ${u(o.relationship)}`,children:o.relationship})]})})}),r.jsxs(Je,{children:[!s.find(d=>d.id==="self")&&r.jsx(ce,{value:"self",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sn,{className:"h-6 w-6",children:r.jsx(an,{className:"text-xs",children:"SE"})}),r.jsx("span",{children:"Self"}),r.jsx(ie,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"self"})]})}),s.filter(d=>d.id&&d.id.trim()!=="").map(d=>r.jsx(ce,{value:d.id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(sn,{className:"h-6 w-6",children:[r.jsx(qs,{src:d.avatar}),r.jsx(an,{className:"text-xs",children:l(d.name)})]}),r.jsx("span",{children:d.name}),r.jsx(ie,{variant:"secondary",className:`text-xs ${u(d.relationship)}`,children:d.relationship})]})},d.id))]})]}),t&&r.jsxs(R,{variant:"outline",size:"sm",onClick:e,className:"flex items-center gap-1",children:[r.jsx(Mt,{className:"h-4 w-4"}),"Add Person"]})]})},nf=({children:e,className:t=""})=>r.jsx("div",{className:`flex items-center justify-center rounded-full bg-gray-200 ${t}`,children:e}),sf=({children:e,className:t=""})=>r.jsx("span",{className:`text-sm font-medium text-gray-600 ${t}`,children:e}),af=({src:e,alt:t})=>e?r.jsx("img",{src:e,alt:t,className:"h-full w-full rounded-full object-cover"}):null,of=({people:e,onPersonAdd:t,onPersonUpdate:n,onPersonDelete:s})=>{const[a,i]=x.useState(!1),[o,l]=x.useState(!1),[u,d]=x.useState(null),[c,m]=x.useState({name:"",relationship:"family",email:"",phone:"",dateOfBirth:"",emergencyContact:!1,notes:"",avatar:""}),f=()=>{m({name:"",relationship:"family",email:"",phone:"",dateOfBirth:"",emergencyContact:!1,notes:"",avatar:""})},g=()=>{f(),d(null),l(!0)},h=y=>{m({name:y.name,relationship:y.relationship,email:y.email||"",phone:y.phone||"",dateOfBirth:y.dateOfBirth||"",emergencyContact:y.emergencyContact||!1,notes:y.notes||"",avatar:y.avatar||""}),d(y),l(!0)},p=async()=>{if(!c.name.trim())return;const y={name:c.name,relationship:c.relationship,...c.email&&{email:c.email},...c.phone&&{phone:c.phone},...c.dateOfBirth&&{dateOfBirth:c.dateOfBirth},...c.notes&&{notes:c.notes},...c.avatar&&{avatar:c.avatar},...c.emergencyContact&&{emergencyContact:c.emergencyContact}};let j=!1;u?j=await n(u.id,y):j=await t(y),j&&(l(!1),d(null),f())},v=async y=>{confirm("Are you sure you want to remove this person? This cannot be undone.")&&await s(y)},w=y=>y.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2),M=y=>{switch(y){case"self":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"family":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"friend":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}};return r.jsxs(r.Fragment,{children:[r.jsxs(R,{onClick:()=>i(!0),children:[r.jsx(bt,{className:"h-4 w-4 mr-2"}),"Manage People"]}),r.jsx(Jn,{open:a,onOpenChange:i,children:r.jsxs(Zn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(es,{children:[r.jsxs(ts,{className:"flex items-center gap-2",children:[r.jsx(bt,{className:"h-5 w-5"}),"Manage People"]}),r.jsx(rs,{children:"Add and manage family members and friends for health tracking."})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["People (",e.length,")"]}),r.jsxs(R,{onClick:g,className:"flex items-center gap-2",children:[r.jsx(bt,{className:"h-4 w-4"}),"Add Person"]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(y=>r.jsxs(A,{children:[r.jsx(H,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(nf,{className:"h-10 w-10",children:[r.jsx(af,{src:y.avatar}),r.jsx(sf,{children:w(y.name)})]}),r.jsxs("div",{children:[r.jsx(z,{className:"text-base",children:y.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(ie,{variant:"secondary",className:`text-xs ${M(y.relationship)}`,children:y.relationship}),y.emergencyContact&&r.jsxs(ie,{variant:"destructive",className:"text-xs",children:[r.jsx(bl,{className:"h-3 w-3 mr-1"}),"Emergency"]})]})]})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>h(y),children:r.jsx(Il,{className:"h-4 w-4"})}),r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>v(y.id),children:r.jsx(mt,{className:"h-4 w-4"})})]})]})}),r.jsx(L,{className:"pt-0",children:r.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[y.email&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pc,{className:"h-4 w-4"}),y.email]}),y.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ho,{className:"h-4 w-4"}),y.phone]}),y.dateOfBirth&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-4 w-4"}),y.dateOfBirth]}),y.notes&&r.jsx("p",{className:"text-xs mt-2 line-clamp-2",children:y.notes})]})})]},y.id))}),e.length===0&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(bt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No people added yet"}),r.jsx("p",{className:"text-sm",children:"Add family members and friends to track their health data"})]})]}),r.jsxs(ns,{children:["            ",r.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Close"})]})]})}),r.jsx(Jn,{open:o,onOpenChange:l,children:r.jsxs(Zn,{children:[r.jsxs(es,{children:[r.jsx(ts,{children:u?"Edit Person":"Add New Person"}),r.jsx(rs,{children:u?"Update the person's information":"Add a family member or friend to track their health data"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(O,{htmlFor:"name",children:"Name *"}),r.jsx(G,{id:"name",value:c.name,onChange:y=>m({...c,name:y.target.value}),placeholder:"Enter name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(O,{htmlFor:"relationship",children:"Relationship"}),r.jsxs(Ke,{value:c.relationship,onValueChange:y=>m({...c,relationship:y}),children:[r.jsx(Xe,{children:r.jsx(Qe,{})}),r.jsxs(Je,{children:[r.jsx(ce,{value:"family",children:"Family"}),r.jsx(ce,{value:"friend",children:"Friend"}),r.jsx(ce,{value:"self",children:"Self"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(O,{htmlFor:"email",children:"Email"}),r.jsx(G,{id:"email",type:"email",value:c.email,onChange:y=>m({...c,email:y.target.value}),placeholder:"email@example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(O,{htmlFor:"phone",children:"Phone"}),r.jsx(G,{id:"phone",value:c.phone,onChange:y=>m({...c,phone:y.target.value}),placeholder:"Phone number"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(O,{htmlFor:"dateOfBirth",children:"Date of Birth"}),r.jsx(G,{id:"dateOfBirth",type:"date",value:c.dateOfBirth,onChange:y=>m({...c,dateOfBirth:y.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(O,{htmlFor:"notes",children:"Notes"}),r.jsx(Ee,{id:"notes",value:c.notes,onChange:y=>m({...c,notes:y.target.value}),placeholder:"Additional notes...",rows:3})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"emergencyContact",checked:c.emergencyContact,onChange:y=>m({...c,emergencyContact:y.target.checked}),className:"rounded"}),r.jsx(O,{htmlFor:"emergencyContact",children:"Emergency Contact"})]})]}),r.jsxs(ns,{children:[r.jsx(R,{variant:"outline",onClick:()=>{l(!1),d(null),f()},children:"Cancel"}),r.jsxs(R,{onClick:p,disabled:!c.name.trim(),children:[u?"Update":"Add"," Person"]})]})]})})]})},lf=()=>{const{currentPersonId:e,getPersonConfig:t,saveHealthConfig:n,updateHealthConfig:s,people:a}=tt(),i=a.find(p=>p.id===e),o=t(),[l,u]=x.useState((o==null?void 0:o.driveSettings.folderId)||""),[d,c]=x.useState(!1),[m,f]=x.useState(!1);x.useEffect(()=>{const p=t();u((p==null?void 0:p.driveSettings.folderId)||"")},[e,t]);const g=async()=>{if(!l.trim()){B.error("Please enter a valid folder ID");return}f(!0);try{let p=!1;o?p=await s(o.id,{driveSettings:{...o.driveSettings,folderId:l.trim()}}):p=await n({personId:e,driveSettings:{folderId:l.trim(),autoUpload:!1,maxFileSize:10,allowedFileTypes:["application/pdf","image/jpeg","image/png","image/gif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},spreadsheetSettings:{spreadsheetId:"",autoSync:!0,syncInterval:15},notificationSettings:{emailReminders:!1,reminderFrequency:"weekly",healthGoalAlerts:!0}}),p?(B.success("Folder configuration saved successfully!"),c(!1)):B.error("Failed to save folder configuration")}catch(p){B.error("Error saving configuration"),console.error("Error saving folder configuration:",p)}finally{f(!1)}},h=()=>{u((o==null?void 0:o.driveSettings.folderId)||""),c(!1)};return r.jsxs(A,{children:[r.jsx(H,{children:r.jsxs(z,{className:"flex items-center gap-2",children:[r.jsx(sa,{className:"h-5 w-5"}),"Document Storage Configuration"]})}),r.jsx(L,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Aa,{className:"h-4 w-4 text-gray-500"}),r.jsxs("span",{className:"text-sm font-medium",children:[(i==null?void 0:i.name)||"Self","'s Documents Folder"]})]}),!d&&r.jsx(R,{variant:"outline",size:"sm",onClick:()=>c(!0),children:"Configure"})]}),d&&r.jsxs("div",{className:"space-y-4 pt-2",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"folderId",children:"Google Drive Folder ID"}),r.jsx(G,{id:"folderId",value:l,onChange:p=>u(p.target.value),placeholder:"Enter the Google Drive folder ID",className:"mt-1"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["This folder will be used to store all health documents for ",(i==null?void 0:i.name)||"you","."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{onClick:g,disabled:m,size:"sm",className:"flex items-center gap-2",children:[r.jsx(El,{className:"h-4 w-4"}),m?"Saving...":"Save"]}),r.jsx(R,{variant:"outline",onClick:h,disabled:m,size:"sm",children:"Cancel"})]})]}),!d&&l&&r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Folder ID:"}),r.jsx("code",{className:"ml-2 px-2 py-1 bg-gray-100 rounded text-xs",children:l})]}),!d&&!l&&r.jsx("div",{className:"text-sm text-gray-500 italic",children:"No folder configured. Documents will be stored in the default health folder."})]})})]})},Ys=10*1024*1024,cf=["application/pdf","image/jpeg","image/png","image/gif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"],df=[{value:"medical-record",label:"Medical Record"},{value:"lab-result",label:"Lab Result"},{value:"prescription",label:"Prescription"},{value:"insurance",label:"Insurance"},{value:"report",label:"Report"},{value:"other",label:"Other"}],uf=()=>{const{currentPersonId:e,uploadDocument:t,people:n}=tt(),s=n.find(P=>P.id===e),a=x.useRef(null),[i,o]=x.useState(null),[l,u]=x.useState(""),[d,c]=x.useState(""),[m,f]=x.useState("other"),[g,h]=x.useState(""),[p,v]=x.useState(!1),[w,M]=x.useState(!1),y=P=>{var F;const b=(F=P.target.files)==null?void 0:F[0];if(b){if(b.size>Ys){B.error(`File size must be less than ${Ys/(1024*1024)}MB`);return}if(!cf.includes(b.type)){B.error("Invalid file type. Please upload PDF, Word, Excel, images, or text files.");return}if(o(b),!l){const W=b.name.split(".").slice(0,-1).join(".");u(W)}}},j=()=>{o(null),a.current&&(a.current.value="")},N=async()=>{if(!i){B.error("Please select a file to upload");return}if(!l.trim()){B.error("Please enter a title for the document");return}M(!0);try{const P={personId:e,title:l.trim(),fileName:i.name,fileType:i.type,fileSize:i.size,category:m,tags:g.split(",").map(F=>F.trim()).filter(Boolean),isConfidential:p,...d.trim()&&{description:d.trim()}};await t(P,i)?(B.success("Document uploaded successfully!"),o(null),u(""),c(""),f("other"),h(""),v(!1),a.current&&(a.current.value="")):B.error("Failed to upload document"),M(!1)}catch(P){console.error("Upload error:",P),B.error("Error uploading document"),M(!1)}};return r.jsxs(A,{children:[r.jsx(H,{children:r.jsxs(z,{className:"flex items-center gap-2",children:[r.jsx(ms,{className:"h-5 w-5"}),"Upload Health Document"]})}),r.jsx(L,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"file",children:"Select File"}),r.jsxs("div",{className:"mt-2",children:[r.jsx("input",{ref:a,id:"file",type:"file",onChange:y,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt",className:"hidden"}),i?r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dn,{className:"h-4 w-4 text-gray-600"}),r.jsx("span",{className:"text-sm font-medium",children:i.name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",(i.size/1024).toFixed(2)," KB)"]})]}),r.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:j,children:r.jsx(oa,{className:"h-4 w-4"})})]}):r.jsxs(R,{type:"button",variant:"outline",onClick:()=>{var P;return(P=a.current)==null?void 0:P.click()},className:"w-full",children:[r.jsx(dn,{className:"h-4 w-4 mr-2"}),"Choose File"]})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"title",children:"Title *"}),r.jsx(G,{id:"title",value:l,onChange:P=>u(P.target.value),placeholder:"Enter document title",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"category",children:"Category"}),r.jsxs(Ke,{value:m,onValueChange:f,children:[r.jsx(Xe,{className:"mt-1",children:r.jsx(Qe,{placeholder:"Select category"})}),r.jsx(Je,{children:df.map(P=>r.jsx(ce,{value:P.value,children:P.label},P.value))})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"description",children:"Description"}),r.jsx(Ee,{id:"description",value:d,onChange:P=>c(P.target.value),placeholder:"Add a description (optional)",rows:3,className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"tags",children:"Tags"}),r.jsx(G,{id:"tags",value:g,onChange:P=>h(P.target.value),placeholder:"Enter tags separated by commas",className:"mt-1"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"e.g., blood test, 2024, cholesterol"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{id:"confidential",type:"checkbox",checked:p,onChange:P=>v(P.target.checked),className:"rounded border-gray-300"}),r.jsx(O,{htmlFor:"confidential",className:"font-normal cursor-pointer",children:"Mark as confidential"})]}),r.jsx(R,{onClick:N,disabled:!i||!l.trim()||w,className:"w-full",children:w?r.jsxs(r.Fragment,{children:[r.jsx(gc,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Upload Document"]})}),s&&s.relationship!=="self"&&r.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["This document will be uploaded to ",s.name,"'s folder"]})]})})]})};var jn=["Enter"," "],mf=["ArrowDown","PageUp","Home"],Di=["ArrowUp","PageDown","End"],gf=[...mf,...Di],ff={ltr:[...jn,"ArrowRight"],rtl:[...jn,"ArrowLeft"]},hf={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zt="Menu",[qt,pf,xf]=zo(Zt),[gt,Ri]=Pn(Zt,[xf,la,Da]),Ir=la(),Fi=Da(),[vf,ft]=gt(Zt),[yf,er]=gt(Zt),_i=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:i,modal:o=!0}=e,l=Ir(t),[u,d]=x.useState(null),c=x.useRef(!1),m=ca(i),f=Go(a);return x.useEffect(()=>{const g=()=>{c.current=!0,document.addEventListener("pointerdown",h,{capture:!0,once:!0}),document.addEventListener("pointermove",h,{capture:!0,once:!0})},h=()=>c.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",h,{capture:!0}),document.removeEventListener("pointermove",h,{capture:!0})}},[]),r.jsx(Wo,{...l,children:r.jsx(vf,{scope:t,open:n,onOpenChange:m,content:u,onContentChange:d,children:r.jsx(yf,{scope:t,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:c,dir:f,modal:o,children:s})})})};_i.displayName=Zt;var wf="MenuAnchor",Hn=x.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Ir(n);return r.jsx(Uo,{...a,...s,ref:t})});Hn.displayName=wf;var zn="MenuPortal",[jf,Ii]=gt(zn,{forceMount:void 0}),Ei=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,i=ft(zn,t);return r.jsx(jf,{scope:t,forceMount:n,children:r.jsx(Sr,{present:n||i.open,children:r.jsx(qo,{asChild:!0,container:a,children:s})})})};Ei.displayName=zn;var je="MenuContent",[bf,Gn]=gt(je),Ai=x.forwardRef((e,t)=>{const n=Ii(je,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=ft(je,e.__scopeMenu),o=er(je,e.__scopeMenu);return r.jsx(qt.Provider,{scope:e.__scopeMenu,children:r.jsx(Sr,{present:s||i.open,children:r.jsx(qt.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(Sf,{...a,ref:t}):r.jsx(Nf,{...a,ref:t})})})})}),Sf=x.forwardRef((e,t)=>{const n=ft(je,e.__scopeMenu),s=x.useRef(null),a=ut(t,s);return x.useEffect(()=>{const i=s.current;if(i)return Yo(i)},[]),r.jsx(Wn,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ne(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Nf=x.forwardRef((e,t)=>{const n=ft(je,e.__scopeMenu);return r.jsx(Wn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Cf=Oo("MenuContent.ScrollLock"),Wn=x.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:c,onFocusOutside:m,onInteractOutside:f,onDismiss:g,disableOutsideScroll:h,...p}=e,v=ft(je,n),w=er(je,n),M=Ir(n),y=Fi(n),j=pf(n),[N,P]=x.useState(null),b=x.useRef(null),F=ut(t,b,v.onContentChange),W=x.useRef(0),E=x.useRef(""),C=x.useRef(0),T=x.useRef(null),q=x.useRef("right"),D=x.useRef(0),Y=h?Qo:x.Fragment,Z=h?{as:Cf,allowPinchZoom:!0}:void 0,de=_=>{var Ae,Et;const re=E.current+_,le=j().filter(Ne=>!Ne.disabled),k=document.activeElement,X=(Ae=le.find(Ne=>Ne.ref.current===k))==null?void 0:Ae.textValue,Se=le.map(Ne=>Ne.textValue),ht=Of(Se,re,X),rt=(Et=le.find(Ne=>Ne.textValue===ht))==null?void 0:Et.ref.current;(function Ne(S){E.current=S,window.clearTimeout(W.current),S!==""&&(W.current=window.setTimeout(()=>Ne(""),1e3))})(re),rt&&setTimeout(()=>rt.focus())};x.useEffect(()=>()=>window.clearTimeout(W.current),[]),Xo();const Q=x.useCallback(_=>{var le,k;return q.current===((le=T.current)==null?void 0:le.side)&&$f(_,(k=T.current)==null?void 0:k.area)},[]);return r.jsx(bf,{scope:n,searchRef:E,onItemEnter:x.useCallback(_=>{Q(_)&&_.preventDefault()},[Q]),onItemLeave:x.useCallback(_=>{var re;Q(_)||((re=b.current)==null||re.focus(),P(null))},[Q]),onTriggerLeave:x.useCallback(_=>{Q(_)&&_.preventDefault()},[Q]),pointerGraceTimerRef:C,onPointerGraceIntentChange:x.useCallback(_=>{T.current=_},[]),children:r.jsx(Y,{...Z,children:r.jsx(Jo,{asChild:!0,trapped:a,onMountAutoFocus:ne(i,_=>{var re;_.preventDefault(),(re=b.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(Zo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:c,onFocusOutside:m,onInteractOutside:f,onDismiss:g,children:r.jsx(_l,{asChild:!0,...y,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:P,onEntryFocus:ne(u,_=>{w.isUsingKeyboardRef.current||_.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(el,{role:"menu","aria-orientation":"vertical","data-state":Qi(v.open),"data-radix-menu-content":"",dir:w.dir,...M,...p,ref:F,style:{outline:"none",...p.style},onKeyDown:ne(p.onKeyDown,_=>{const le=_.target.closest("[data-radix-menu-content]")===_.currentTarget,k=_.ctrlKey||_.altKey||_.metaKey,X=_.key.length===1;le&&(_.key==="Tab"&&_.preventDefault(),!k&&X&&de(_.key));const Se=b.current;if(_.target!==Se||!gf.includes(_.key))return;_.preventDefault();const rt=j().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);Di.includes(_.key)&&rt.reverse(),Af(rt)}),onBlur:ne(e.onBlur,_=>{_.currentTarget.contains(_.target)||(window.clearTimeout(W.current),E.current="")}),onPointerMove:ne(e.onPointerMove,Yt(_=>{const re=_.target,le=D.current!==_.clientX;if(_.currentTarget.contains(re)&&le){const k=_.clientX>D.current?"right":"left";q.current=k,D.current=_.clientX}}))})})})})})})});Ai.displayName=je;var Pf="MenuGroup",Un=x.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(et.div,{role:"group",...s,ref:t})});Un.displayName=Pf;var Mf="MenuLabel",Ti=x.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(et.div,{...s,ref:t})});Ti.displayName=Mf;var wr="MenuItem",Ks="menu.itemSelect",Er=x.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,i=x.useRef(null),o=er(wr,e.__scopeMenu),l=Gn(wr,e.__scopeMenu),u=ut(t,i),d=x.useRef(!1),c=()=>{const m=i.current;if(!n&&m){const f=new CustomEvent(Ks,{bubbles:!0,cancelable:!0});m.addEventListener(Ks,g=>s==null?void 0:s(g),{once:!0}),Ko(m,f),f.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(Oi,{...a,ref:u,disabled:n,onClick:ne(e.onClick,c),onPointerDown:m=>{var f;(f=e.onPointerDown)==null||f.call(e,m),d.current=!0},onPointerUp:ne(e.onPointerUp,m=>{var f;d.current||(f=m.currentTarget)==null||f.click()}),onKeyDown:ne(e.onKeyDown,m=>{const f=l.searchRef.current!=="";n||f&&m.key===" "||jn.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Er.displayName=wr;var Oi=x.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...i}=e,o=Gn(wr,n),l=Fi(n),u=x.useRef(null),d=ut(t,u),[c,m]=x.useState(!1),[f,g]=x.useState("");return x.useEffect(()=>{const h=u.current;h&&g((h.textContent??"").trim())},[i.children]),r.jsx(qt.ItemSlot,{scope:n,disabled:s,textValue:a??f,children:r.jsx(Fl,{asChild:!0,...l,focusable:!s,children:r.jsx(et.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:d,onPointerMove:ne(e.onPointerMove,Yt(h=>{s?o.onItemLeave(h):(o.onItemEnter(h),h.defaultPrevented||h.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ne(e.onPointerLeave,Yt(h=>o.onItemLeave(h))),onFocus:ne(e.onFocus,()=>m(!0)),onBlur:ne(e.onBlur,()=>m(!1))})})})}),kf="MenuCheckboxItem",Li=x.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(zi,{scope:e.__scopeMenu,checked:n,children:r.jsx(Er,{role:"menuitemcheckbox","aria-checked":jr(n)?"mixed":n,...a,ref:t,"data-state":Yn(n),onSelect:ne(a.onSelect,()=>s==null?void 0:s(jr(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Li.displayName=kf;var $i="MenuRadioGroup",[Df,Rf]=gt($i,{value:void 0,onValueChange:()=>{}}),Vi=x.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,i=ca(s);return r.jsx(Df,{scope:e.__scopeMenu,value:n,onValueChange:i,children:r.jsx(Un,{...a,ref:t})})});Vi.displayName=$i;var Bi="MenuRadioItem",Hi=x.forwardRef((e,t)=>{const{value:n,...s}=e,a=Rf(Bi,e.__scopeMenu),i=n===a.value;return r.jsx(zi,{scope:e.__scopeMenu,checked:i,children:r.jsx(Er,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":Yn(i),onSelect:ne(s.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});Hi.displayName=Bi;var qn="MenuItemIndicator",[zi,Ff]=gt(qn,{checked:!1}),Gi=x.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,i=Ff(qn,n);return r.jsx(Sr,{present:s||jr(i.checked)||i.checked===!0,children:r.jsx(et.span,{...a,ref:t,"data-state":Yn(i.checked)})})});Gi.displayName=qn;var _f="MenuSeparator",Wi=x.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(et.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});Wi.displayName=_f;var If="MenuArrow",Ui=x.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Ir(n);return r.jsx(tl,{...a,...s,ref:t})});Ui.displayName=If;var Ef="MenuSub",[rp,qi]=gt(Ef),$t="MenuSubTrigger",Yi=x.forwardRef((e,t)=>{const n=ft($t,e.__scopeMenu),s=er($t,e.__scopeMenu),a=qi($t,e.__scopeMenu),i=Gn($t,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=i,d={__scopeMenu:e.__scopeMenu},c=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>c,[c]),x.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),r.jsx(Hn,{asChild:!0,...d,children:r.jsx(Oi,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Qi(n.open),...e,ref:ra(t,a.onTriggerChange),onClick:m=>{var f;(f=e.onClick)==null||f.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ne(e.onPointerMove,Yt(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:ne(e.onPointerLeave,Yt(m=>{var g,h;c();const f=(g=n.content)==null?void 0:g.getBoundingClientRect();if(f){const p=(h=n.content)==null?void 0:h.dataset.side,v=p==="right",w=v?-5:5,M=f[v?"left":"right"],y=f[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+w,y:m.clientY},{x:M,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:M,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ne(e.onKeyDown,m=>{var g;const f=i.searchRef.current!=="";e.disabled||f&&m.key===" "||ff[s.dir].includes(m.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),m.preventDefault())})})})});Yi.displayName=$t;var Ki="MenuSubContent",Xi=x.forwardRef((e,t)=>{const n=Ii(je,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=ft(je,e.__scopeMenu),o=er(je,e.__scopeMenu),l=qi(Ki,e.__scopeMenu),u=x.useRef(null),d=ut(t,u);return r.jsx(qt.Provider,{scope:e.__scopeMenu,children:r.jsx(Sr,{present:s||i.open,children:r.jsx(qt.Slot,{scope:e.__scopeMenu,children:r.jsx(Wn,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var m;o.isUsingKeyboardRef.current&&((m=u.current)==null||m.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:ne(e.onFocusOutside,c=>{c.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ne(e.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:ne(e.onKeyDown,c=>{var g;const m=c.currentTarget.contains(c.target),f=hf[o.dir].includes(c.key);m&&f&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),c.preventDefault())})})})})})});Xi.displayName=Ki;function Qi(e){return e?"open":"closed"}function jr(e){return e==="indeterminate"}function Yn(e){return jr(e)?"indeterminate":e?"checked":"unchecked"}function Af(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Tf(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function Of(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Tf(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function Lf(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],u=t[o],d=l.x,c=l.y,m=u.x,f=u.y;c>s!=f>s&&n<(m-d)*(s-c)/(f-c)+d&&(a=!a)}return a}function $f(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Lf(n,t)}function Yt(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Vf=_i,Bf=Hn,Hf=Ei,zf=Ai,Gf=Un,Wf=Ti,Uf=Er,qf=Li,Yf=Vi,Kf=Hi,Xf=Gi,Qf=Wi,Jf=Ui,Zf=Yi,eh=Xi,Ar="DropdownMenu",[th,np]=Pn(Ar,[Ri]),he=Ri(),[rh,Ji]=th(Ar),Zi=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,u=he(t),d=x.useRef(null),[c,m]=na({prop:a,defaultProp:i??!1,onChange:o,caller:Ar});return r.jsx(rh,{scope:t,triggerId:ss(),triggerRef:d,contentId:ss(),open:c,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(f=>!f),[m]),modal:l,children:r.jsx(Vf,{...u,open:c,onOpenChange:m,dir:s,modal:l,children:n})})};Zi.displayName=Ar;var eo="DropdownMenuTrigger",to=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,i=Ji(eo,n),o=he(n);return r.jsx(Bf,{asChild:!0,...o,children:r.jsx(et.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ra(t,i.triggerRef),onPointerDown:ne(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ne(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});to.displayName=eo;var nh="DropdownMenuPortal",ro=e=>{const{__scopeDropdownMenu:t,...n}=e,s=he(t);return r.jsx(Hf,{...s,...n})};ro.displayName=nh;var no="DropdownMenuContent",so=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ji(no,n),i=he(n),o=x.useRef(!1);return r.jsx(zf,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:ne(e.onCloseAutoFocus,l=>{var u;o.current||(u=a.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ne(e.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,c=u.button===2||d;(!a.modal||c)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});so.displayName=no;var sh="DropdownMenuGroup",ah=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Gf,{...a,...s,ref:t})});ah.displayName=sh;var ih="DropdownMenuLabel",ao=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Wf,{...a,...s,ref:t})});ao.displayName=ih;var oh="DropdownMenuItem",io=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Uf,{...a,...s,ref:t})});io.displayName=oh;var lh="DropdownMenuCheckboxItem",oo=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(qf,{...a,...s,ref:t})});oo.displayName=lh;var ch="DropdownMenuRadioGroup",dh=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Yf,{...a,...s,ref:t})});dh.displayName=ch;var uh="DropdownMenuRadioItem",lo=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Kf,{...a,...s,ref:t})});lo.displayName=uh;var mh="DropdownMenuItemIndicator",co=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Xf,{...a,...s,ref:t})});co.displayName=mh;var gh="DropdownMenuSeparator",uo=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Qf,{...a,...s,ref:t})});uo.displayName=gh;var fh="DropdownMenuArrow",hh=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Jf,{...a,...s,ref:t})});hh.displayName=fh;var ph="DropdownMenuSubTrigger",mo=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Zf,{...a,...s,ref:t})});mo.displayName=ph;var xh="DropdownMenuSubContent",go=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(eh,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});go.displayName=xh;var vh=Zi,yh=to,wh=ro,fo=so,ho=ao,po=io,xo=oo,vo=lo,yo=co,wo=uo,jo=mo,bo=go;const Xs=vh,Qs=yh,jh=x.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(jo,{ref:a,className:oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 data-[state=open]:bg-gray-100",t&&"pl-8",e),...s,children:[n,r.jsx(Mn,{className:"ml-auto h-4 w-4"})]}));jh.displayName=jo.displayName;const bh=x.forwardRef(({className:e,...t},n)=>r.jsx(bo,{ref:n,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-gray-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));bh.displayName=bo.displayName;const bn=x.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(wh,{children:r.jsx(fo,{ref:s,sideOffset:t,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));bn.displayName=fo.displayName;const jt=x.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(po,{ref:s,className:oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));jt.displayName=po.displayName;const Sh=x.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(xo,{ref:s,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(yo,{children:r.jsx(Al,{className:"h-4 w-4"})})}),t]}));Sh.displayName=xo.displayName;const Nh=x.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(vo,{ref:s,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(yo,{children:r.jsx(Jl,{className:"h-2 w-2 fill-current"})})}),t]}));Nh.displayName=vo.displayName;const So=x.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(ho,{ref:s,className:oe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));So.displayName=ho.displayName;const Sn=x.forwardRef(({className:e,...t},n)=>r.jsx(wo,{ref:n,className:oe("-mx-1 my-1 h-px bg-gray-100",e),...t}));Sn.displayName=wo.displayName;const on={"medical-record":"Medical Record","lab-result":"Lab Result",prescription:"Prescription",insurance:"Insurance",report:"Report",other:"Other"},Js={"medical-record":"bg-blue-100 text-blue-800","lab-result":"bg-purple-100 text-purple-800",prescription:"bg-green-100 text-green-800",insurance:"bg-orange-100 text-orange-800",report:"bg-pink-100 text-pink-800",other:"bg-gray-100 text-gray-800"},Ch=()=>{const{currentPersonId:e,getPersonDocuments:t,deleteDocument:n,downloadDocument:s,refreshDocuments:a,people:i,isLoading:o}=tt(),l=i.find(b=>b.id===e),u=t(),[d,c]=x.useState(""),[m,f]=x.useState("all"),[g,h]=x.useState(!1),[p,v]=x.useState(null);x.useEffect(()=>{a()},[e,a]);const w=b=>b.startsWith("image/")?r.jsx(uc,{className:"h-4 w-4"}):b.includes("pdf")?r.jsx(as,{className:"h-4 w-4 text-red-600"}):r.jsx(dn,{className:"h-4 w-4"}),M=b=>{if(b===0)return"0 Bytes";const F=1024,W=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(b)/Math.log(F));return parseFloat((b/Math.pow(F,E)).toFixed(2))+" "+W[E]},y=u.filter(b=>{var F,W;return!(d&&!b.title.toLowerCase().includes(d.toLowerCase())&&!((F=b.description)!=null&&F.toLowerCase().includes(d.toLowerCase()))&&!((W=b.tags)!=null&&W.some(E=>E.toLowerCase().includes(d.toLowerCase())))||m!=="all"&&b.category!==m||g&&!b.isConfidential)}),j=b=>{b.driveUrl?window.open(b.driveUrl,"_blank"):B.error("Document URL not available")},N=async b=>{try{await s(b)}catch{B.error("Failed to download document")}},P=async b=>{if(confirm("Are you sure you want to delete this document? This action cannot be undone.")){v(b);try{await n(b)?B.success("Document deleted successfully"):B.error("Failed to delete document")}catch{B.error("Error deleting document")}finally{v(null)}}};return r.jsxs(A,{children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(z,{className:"flex items-center gap-2",children:[r.jsx(Aa,{className:"h-5 w-5"}),(l==null?void 0:l.name)||"Your"," Health Documents (",y.length,")"]}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>a(),disabled:o,children:"Refresh"})]})}),r.jsxs(L,{children:[r.jsx("div",{className:"space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),r.jsx(G,{value:d,onChange:b=>c(b.target.value),placeholder:"Search documents...",className:"pl-10"})]}),r.jsxs(Xs,{children:[r.jsx(Qs,{asChild:!0,children:r.jsxs(R,{variant:"outline",className:"min-w-[140px]",children:[r.jsx(cc,{className:"h-4 w-4 mr-2"}),m==="all"?"All Categories":on[m]]})}),r.jsxs(bn,{children:[r.jsx(So,{children:"Filter by Category"}),r.jsx(Sn,{}),r.jsx(jt,{onClick:()=>f("all"),children:"All Categories"}),Object.entries(on).map(([b,F])=>r.jsx(jt,{onClick:()=>f(b),children:F},b))]})]}),r.jsxs(R,{variant:g?"default":"outline",onClick:()=>h(!g),className:"min-w-[140px]",children:[r.jsx(ls,{className:"h-4 w-4 mr-2"}),"Confidential Only"]})]})}),o?r.jsx("div",{className:"text-center py-8",children:r.jsxs("div",{className:"inline-flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),r.jsx("span",{className:"ml-3",children:"Loading documents..."})]})}):y.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(as,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d||m!=="all"?"Try adjusting your filters":"Upload your first health document to get started"})]}):r.jsx("div",{className:"space-y-3",children:y.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[w(b.fileType),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h4",{className:"font-medium text-sm",children:b.title}),b.isConfidential&&r.jsx(ls,{className:"h-3 w-3 text-orange-600"}),r.jsx(ie,{className:`text-xs ${Js[b.category]||Js.other}`,children:on[b.category]||"Other"})]}),b.description&&r.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:b.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(kt,{className:"h-3 w-3"}),ae(new Date(b.uploadDate),"MMM d, yyyy")]}),r.jsx("span",{children:M(b.fileSize)}),b.tags&&b.tags.length>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[b.tags.slice(0,3).map((F,W)=>r.jsx(ie,{variant:"secondary",className:"text-xs",children:F},W)),b.tags.length>3&&r.jsxs("span",{className:"text-gray-500",children:["+",b.tags.length-3]})]})]})]})]}),r.jsxs(Xs,{children:[r.jsx(Qs,{asChild:!0,children:r.jsx(R,{variant:"ghost",size:"sm",disabled:p===b.id,children:r.jsx(ac,{className:"h-4 w-4"})})}),r.jsxs(bn,{align:"end",children:[r.jsxs(jt,{onClick:()=>j(b),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"View"]}),r.jsxs(jt,{onClick:()=>N(b.id),children:[r.jsx(rc,{className:"h-4 w-4 mr-2"}),"Download"]}),r.jsx(Sn,{}),r.jsxs(jt,{onClick:()=>P(b.id),className:"text-red-600",children:[r.jsx(mt,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]},b.id))})]})]})},Ph=()=>{const[e,t]=x.useState(!1),[n,s]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState(ae(new Date,"yyyy-MM-dd")),[u,d]=x.useState("overview"),{healthEntries:c,isLoading:m,isInitialized:f,currentPersonId:g,people:h,addPerson:p,updatePerson:v,deletePerson:w,fetchAllHealthData:M,addHealthEntry:y,updateHealthEntryAction:j,deleteHealthEntryAction:N,addVitalSigns:P,addBodyMeasurement:b}=tt(),[F,W]=x.useState({id:"",personId:g,date:o,type:"weight",value:0,unit:"kg",notes:"",timestamp:new Date().toISOString()}),[E,C]=x.useState({date:o,weight:void 0,bodyFat:void 0,muscleMass:void 0,chest:void 0,waist:void 0,hips:void 0,bicep:void 0,thigh:void 0,neck:void 0,notes:""}),[T,q]=x.useState({date:o,systolic:void 0,diastolic:void 0,heartRate:void 0,temperature:void 0,oxygenSaturation:void 0,notes:""}),{convertAndFormatWeight:D,convertAndFormatTemperature:Y,getWeightUnit:Z,getHeightUnit:de,getTemperatureUnit:Q}=br(),_=[{value:"weight",label:"Weight",unit:Z(),icon:we},{value:"blood_pressure",label:"Blood Pressure",unit:"mmHg",icon:lt},{value:"heart_rate",label:"Heart Rate",unit:"bpm",icon:lt},{value:"body_fat",label:"Body Fat %",unit:"%",icon:we},{value:"muscle_mass",label:"Muscle Mass",unit:Z(),icon:we},{value:"temperature",label:"Temperature",unit:Q()==="celsius"?"C":"F",icon:us},{value:"sleep_hours",label:"Sleep Hours",unit:"hours",icon:we},{value:"water_intake",label:"Water Intake",unit:"ml",icon:os},{value:"steps",label:"Steps",unit:"steps",icon:Pt},{value:"custom",label:"Custom",unit:"",icon:we}],re=x.useMemo(()=>c.filter(S=>S.date===o&&S.personId===g),[c,o,g]);x.useEffect(()=>{f||M()},[f,M]),x.useEffect(()=>{t(m)},[m]),x.useEffect(()=>{W(S=>({...S,personId:g}))},[g]),x.useEffect(()=>{W(S=>({...S,date:o})),C(S=>({...S,date:o})),q(S=>({...S,date:o}))},[o]);const le=async S=>{S.preventDefault(),t(!0);try{a!=null&&a.id?(await j(a.id,F),B.success("Health entry updated successfully!")):(await y(F),B.success("Health entry added successfully!")),Se()}catch(ee){console.error("Error saving health entry:",ee),B.error("Failed to save health entry. Please try again.")}finally{t(!1)}},k=S=>{i(S),W(S),s(!0)},X=async S=>{if(confirm("Are you sure you want to delete this entry?")){t(!0);try{S.id&&(await N(S.id),B.success("Health entry deleted successfully!"))}catch(ee){console.error("Error deleting health entry:",ee),B.error("Failed to delete health entry. Please try again.")}finally{t(!1)}}},Se=()=>{W({id:"",personId:g,date:o,type:"weight",value:0,unit:"",notes:"",timestamp:new Date().toISOString()}),i(null),s(!1),C({date:o,weight:void 0,bodyFat:void 0,muscleMass:void 0,chest:void 0,waist:void 0,hips:void 0,bicep:void 0,thigh:void 0,neck:void 0,notes:""}),q({date:o,systolic:void 0,diastolic:void 0,heartRate:void 0,temperature:void 0,oxygenSaturation:void 0,notes:""})},ht=async()=>{t(!0);try{const S={personId:g,date:T.date,time:new Date().toTimeString().split(" ")[0]};if(T.systolic!==void 0&&(S.bloodPressureSystolic=T.systolic),T.diastolic!==void 0&&(S.bloodPressureDiastolic=T.diastolic),T.heartRate!==void 0&&(S.heartRate=T.heartRate),T.temperature!==void 0){const U=T.temperature;S.temperature=Q()==="fahrenheit"?(U-32)*5/9:U}if(T.oxygenSaturation!==void 0&&(S.oxygenSaturation=T.oxygenSaturation),T.notes&&T.notes.trim()&&(S.notes=T.notes),await P(S))B.success("Vital signs saved successfully!"),q({date:o,systolic:void 0,diastolic:void 0,heartRate:void 0,temperature:void 0,oxygenSaturation:void 0,notes:""});else throw new Error("Failed to save vital signs")}catch(S){console.error("Error saving vital signs:",S),B.error("Failed to save vital signs. Please try again.")}finally{t(!1)}},rt=async()=>{t(!0);try{const S={personId:g,date:E.date,time:new Date().toTimeString().split(" ")[0]};if(E.weight!==void 0){const U=E.weight;S.weight=Z()==="lbs"?U*.453592:U}if(E.bodyFat!==void 0&&(S.bodyFat=E.bodyFat),E.muscleMass!==void 0){const U=E.muscleMass;S.muscleMass=Z()==="lbs"?U*.453592:U}if(E.chest!==void 0&&(S.chest=E.chest),E.waist!==void 0&&(S.waist=E.waist),E.hips!==void 0&&(S.hips=E.hips),E.neck!==void 0&&(S.neck=E.neck),E.notes&&E.notes.trim()&&(S.notes=E.notes),await b(S))B.success("Body measurements saved successfully!"),C({date:o,weight:void 0,bodyFat:void 0,muscleMass:void 0,chest:void 0,waist:void 0,hips:void 0,bicep:void 0,thigh:void 0,neck:void 0,notes:""});else throw new Error("Failed to save body measurements")}catch(S){console.error("Error saving body measurements:",S),B.error("Failed to save body measurements. Please try again.")}finally{t(!1)}},Ae=S=>{const ee=_.find(pt=>pt.value===S),U=(ee==null?void 0:ee.icon)||we;return r.jsx(U,{className:"h-4 w-4"})},Et=S=>{switch(S){case"weight":return"bg-blue-100 text-blue-800";case"blood-pressure":return"bg-red-100 text-red-800";case"heart-rate":return"bg-pink-100 text-pink-800";case"body-fat":return"bg-green-100 text-green-800";case"measurements":return"bg-purple-100 text-purple-800";case"symptoms":return"bg-orange-100 text-orange-800";case"medication":return"bg-teal-100 text-teal-800";case"mood":return"bg-yellow-100 text-yellow-800";case"energy":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},Ne=S=>re.filter(ee=>ee.type===S).sort((ee,U)=>new Date(U.timestamp).getTime()-new Date(ee.timestamp).getTime())[0];return r.jsxs("div",{className:"p-2 sm:p-4 md:p-6 space-y-4 md:space-y-6 min-h-[80vh]",children:[r.jsx(Tn,{icon:lt,title:"Health Tracking",date:o,onDateChange:l,action:r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[r.jsx(rf,{"aria-label":"Select person"}),r.jsx(of,{people:h,onPersonAdd:p,onPersonUpdate:v,onPersonDelete:w}),r.jsxs(R,{onClick:()=>s(!0),className:"flex items-center justify-center gap-2 focus-visible:ring-2 focus-visible:ring-primary","aria-label":"Add Health Entry",children:[r.jsx(Mt,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Health Entry"}),r.jsx("span",{className:"sm:hidden",children:"Add Entry"})]})]})}),r.jsxs(Cr,{value:u,onValueChange:d,className:"w-full",children:[r.jsxs(Pr,{className:"grid w-full grid-cols-2 sm:grid-cols-5 h-15 sm:h-auto",children:[r.jsx(ge,{value:"overview",className:"text-xs sm:text-sm",children:"Overview"}),r.jsx(ge,{value:"vitals",className:"text-xs sm:text-sm",children:"Vitals"}),r.jsx(ge,{value:"measurements",className:"text-xs sm:text-sm",children:"Measurements"}),r.jsx(ge,{value:"documents",className:"text-xs sm:text-sm",children:"Documents"}),r.jsx(ge,{value:"analytics",className:"text-xs sm:text-sm",children:"Analytics"})]}),"        ",r.jsxs(fe,{value:"overview",className:"space-y-4 md:space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:["weight","blood-pressure","heart-rate","body-fat"].map(S=>{const ee=Ne(S),U=_.find(pt=>pt.value===S);return r.jsx(A,{children:r.jsxs(L,{className:"p-3 md:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[Ae(S),r.jsx("span",{className:"font-medium text-xs sm:text-sm",children:U==null?void 0:U.label})]}),r.jsx(ie,{variant:"outline",className:`${Et(S)} text-xs`,children:"Latest"})]}),r.jsx("div",{className:"mt-2",children:ee?r.jsxs("div",{children:[r.jsx("span",{className:"text-xl md:text-2xl font-bold",children:(U==null?void 0:U.value)==="weight"||(U==null?void 0:U.value)==="muscle_mass"?D(ee.value):(U==null?void 0:U.value)==="temperature"?Y(ee.value):(U==null?void 0:U.value)==="body_fat"?`${ee.value}%`:ee.value}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-500 ml-1",children:ee.unit}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ae(new Date(ee.timestamp),"MMM d, h:mm a")})]}):r.jsx("span",{className:"text-gray-400 text-sm",children:"No data"})})]})},S)})}),r.jsxs(A,{children:[r.jsx(H,{children:r.jsxs(z,{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5"}),"Today's Health Entries"]})}),r.jsx(L,{children:re.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(we,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No entries today"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start tracking your health by adding your first entry."})]}):r.jsx("div",{className:"space-y-4",children:re.map((S,ee)=>{var pt;const U=_.find(Tr=>Tr.value===S.type);return r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 md:p-4 border border-gray-200 rounded-lg gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[Ae(S.type),r.jsx(ie,{className:`${Et(S.type)} text-xs`,children:(pt=_.find(Tr=>Tr.value===S.type))==null?void 0:pt.label}),r.jsxs("span",{className:"font-medium text-sm sm:text-base",children:[(U==null?void 0:U.value)==="weight"||(U==null?void 0:U.value)==="muscle_mass"?D(S.value):(U==null?void 0:U.value)==="temperature"?Y(S.value):(U==null?void 0:U.value)==="body_fat"?`${S.value}%`:S.value," ",S.unit]})]}),r.jsx("div",{className:"mt-1 text-xs sm:text-sm text-gray-600",children:ae(new Date(S.timestamp),"h:mm a")}),S.notes&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-500",children:S.notes})]}),r.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>k(S),className:"h-8",children:r.jsx(Kt,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),"                          ",r.jsx(R,{variant:"outline",size:"sm",onClick:()=>X(S),className:"h-8",children:r.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]},ee)})})})]})]}),"        ",r.jsx(fe,{value:"vitals",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{className:"text-lg sm:text-xl",children:"Vital Signs"})}),r.jsxs(L,{children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("h3",{className:"font-medium flex items-center gap-2 text-sm sm:text-base",children:[r.jsx(lt,{className:"h-4 w-4 text-red-500"}),"Blood Pressure"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx(G,{placeholder:"Systolic",type:"number",value:T.systolic||"",onChange:S=>q({...T,systolic:Number(S.target.value)}),className:"text-sm"}),r.jsx(G,{placeholder:"Diastolic",type:"number",value:T.diastolic||"",onChange:S=>q({...T,diastolic:Number(S.target.value)}),className:"text-sm"})]}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"mmHg"})]})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("h3",{className:"font-medium flex items-center gap-2 text-sm sm:text-base",children:[r.jsx(lt,{className:"h-4 w-4 text-pink-500"}),"Heart Rate"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{placeholder:"Heart Rate",type:"number",value:T.heartRate||"",onChange:S=>q({...T,heartRate:Number(S.target.value)}),className:"text-sm"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"bpm"})]})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("h3",{className:"font-medium flex items-center gap-2 text-sm sm:text-base",children:[r.jsx(us,{className:"h-4 w-4 text-orange-500"}),"Temperature"]}),"                  ",r.jsxs("div",{className:"space-y-2",children:[r.jsxs(O,{htmlFor:"temperature",className:"text-sm",children:["Temperature (",Q()==="celsius"?"C":"F",")"]}),r.jsx(G,{id:"temperature",placeholder:"Temperature",type:"number",step:"0.1",value:T.temperature||"",onChange:S=>q({...T,temperature:Number(S.target.value)}),className:"text-sm"})]})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("h3",{className:"font-medium flex items-center gap-2 text-sm sm:text-base",children:[r.jsx(os,{className:"h-4 w-4 text-blue-500"}),"Oxygen Saturation"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{placeholder:"O2 Saturation",type:"number",value:T.oxygenSaturation||"",onChange:S=>q({...T,oxygenSaturation:Number(S.target.value)}),className:"text-sm"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"%"})]})]})]}),r.jsxs("div",{className:"mt-4 sm:mt-6",children:[r.jsx(O,{htmlFor:"vitalNotes",className:"text-sm sm:text-base",children:"Notes"}),r.jsx(Ee,{id:"vitalNotes",value:T.notes,onChange:S=>q({...T,notes:S.target.value}),placeholder:"Any additional notes about your vital signs...",rows:3,className:"text-sm"})]}),"              ",r.jsx(R,{className:"mt-4 w-full sm:w-auto",onClick:ht,disabled:e,children:e?"Saving...":"Save Vital Signs"})]})]})}),"        ",r.jsx(fe,{value:"measurements",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{className:"text-lg sm:text-xl",children:"Body Measurements"})}),r.jsxs(L,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h3",{className:"font-medium text-sm sm:text-base",children:"Body Composition"}),r.jsxs("div",{className:"space-y-3",children:["                    ",r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"weight",className:"text-sm",children:["Weight (",Z(),")"]}),r.jsx(G,{id:"weight",type:"number",step:"0.1",value:E.weight||"",onChange:S=>C({...E,weight:Number(S.target.value)}),className:"text-sm"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"bodyFat",className:"text-sm",children:"Body Fat (%)"}),r.jsx(G,{id:"bodyFat",type:"number",step:"0.1",value:E.bodyFat||"",onChange:S=>C({...E,bodyFat:Number(S.target.value)}),className:"text-sm"})]}),"                    ",r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"muscleMass",className:"text-sm",children:["Muscle Mass (",Z(),")"]}),r.jsx(G,{id:"muscleMass",type:"number",step:"0.1",value:E.muscleMass||"",onChange:S=>C({...E,muscleMass:Number(S.target.value)}),className:"text-sm"})]})]})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h3",{className:"font-medium text-sm sm:text-base",children:"Upper Body"}),r.jsxs("div",{className:"space-y-3",children:["                    ",r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"chest",className:"text-sm",children:["Chest (",de(),")"]}),r.jsx(G,{id:"chest",type:"number",step:"0.1",value:E.chest||"",onChange:S=>C({...E,chest:Number(S.target.value)}),className:"text-sm"})]}),r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"bicep",className:"text-sm",children:["Bicep (",de(),")"]}),r.jsx(G,{id:"bicep",type:"number",step:"0.1",value:E.bicep||"",onChange:S=>C({...E,bicep:Number(S.target.value)}),className:"text-sm"})]}),r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"neck",className:"text-sm",children:["Neck (",de(),")"]}),r.jsx(G,{id:"neck",type:"number",step:"0.1",value:E.neck||"",onChange:S=>C({...E,neck:Number(S.target.value)}),className:"text-sm"})]})]})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h3",{className:"font-medium text-sm sm:text-base",children:"Lower Body"}),r.jsxs("div",{className:"space-y-3",children:["                    ",r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"waist",className:"text-sm",children:["Waist (",de(),")"]}),r.jsx(G,{id:"waist",type:"number",step:"0.1",value:E.waist||"",onChange:S=>C({...E,waist:Number(S.target.value)}),className:"text-sm"})]}),r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"hips",className:"text-sm",children:["Hips (",de(),")"]}),r.jsx(G,{id:"hips",type:"number",step:"0.1",value:E.hips||"",onChange:S=>C({...E,hips:Number(S.target.value)}),className:"text-sm"})]}),r.jsxs("div",{children:[r.jsxs(O,{htmlFor:"thigh",className:"text-sm",children:["Thigh (",de(),")"]}),r.jsx(G,{id:"thigh",type:"number",step:"0.1",value:E.thigh||"",onChange:S=>C({...E,thigh:Number(S.target.value)}),className:"text-sm"})]})]})]})]}),r.jsxs("div",{className:"mt-4 sm:mt-6",children:[r.jsx(O,{htmlFor:"measurementNotes",className:"text-sm sm:text-base",children:"Notes"}),r.jsx(Ee,{id:"measurementNotes",value:E.notes,onChange:S=>C({...E,notes:S.target.value}),placeholder:"Any additional notes about your measurements...",rows:3,className:"text-sm"})]}),"              ",r.jsx(R,{className:"mt-4 w-full sm:w-auto",onClick:rt,disabled:e,children:e?"Saving...":"Save Measurements"})]})]})}),r.jsxs(fe,{value:"documents",className:"space-y-4 md:space-y-6",children:[r.jsx(lf,{}),r.jsx(uf,{}),r.jsx(Ch,{})]}),r.jsx(fe,{value:"analytics",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"Health Analytics"})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Pt,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Health Analytics"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View trends and insights from your health data over time."})]})})]})})]}),"      ",n&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 sm:p-4 z-50",children:r.jsxs(A,{className:"w-full max-w-sm sm:max-w-md max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[r.jsx(H,{className:"pb-3 sm:pb-6",children:r.jsx(z,{className:"text-lg sm:text-xl",children:a?"Edit Health Entry":"Add Health Entry"})}),r.jsx(L,{children:r.jsxs("form",{onSubmit:le,className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"type",className:"text-sm sm:text-base",children:"Type"}),"                  ",r.jsxs(Ke,{value:F.type,onValueChange:S=>{const ee=_.find(U=>U.value===S);W({...F,type:S,unit:(ee==null?void 0:ee.unit)||""})},children:[r.jsx(Xe,{className:"text-sm",children:r.jsx(Qe,{placeholder:"Select health metric"})}),r.jsx(Je,{children:_.map(S=>r.jsx(ce,{value:S.value,className:"text-sm",children:S.label},S.value))})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"value",className:"text-sm sm:text-base",children:"Value"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(G,{id:"value",type:"number",value:F.value,onChange:S=>W({...F,value:Number(S.target.value)}),placeholder:"Enter value",required:!0,className:"flex-1 text-sm"}),F.unit&&r.jsx("div",{className:"flex items-center px-2 sm:px-3 border border-gray-300 rounded-md bg-gray-50",children:r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:F.unit})})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"notes",className:"text-sm sm:text-base",children:"Notes (optional)"}),r.jsx(Ee,{id:"notes",value:F.notes,onChange:S=>W({...F,notes:S.target.value}),placeholder:"Any additional notes...",rows:3,className:"text-sm"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-3 sm:pt-4",children:[r.jsx(R,{type:"submit",disabled:e,className:"flex-1 text-sm sm:text-base",children:e?"Saving...":a?"Update Entry":"Add Entry"}),r.jsx(R,{type:"button",variant:"outline",onClick:Se,className:"text-sm sm:text-base",children:"Cancel"})]})]})})]})})]})},Mh=()=>{var le;const[e,t]=x.useState(!1),[n,s]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState(ae(new Date,"yyyy-MM-dd")),[u,d]=x.useState("today"),[c,m]=x.useState({duration:10,type:"mindfulness",isActive:!1,timeLeft:10*60}),[f,g]=x.useState({id:"",personId:"self",date:o,type:"mindfulness",duration:0,moodBefore:5,moodAfter:5,stressBefore:5,stressAfter:5,guided:!1,notes:"",timestamp:new Date().toISOString()}),h=[{value:"mindfulness",label:"Mindfulness",description:"Present moment awareness"},{value:"breathing",label:"Breathing",description:"Focus on breath"},{value:"body-scan",label:"Body Scan",description:"Progressive relaxation"},{value:"loving-kindness",label:"Loving Kindness",description:"Compassion meditation"},{value:"visualization",label:"Visualization",description:"Guided imagery"},{value:"walking",label:"Walking",description:"Mindful movement"},{value:"mantra",label:"Mantra",description:"Repetitive phrases"},{value:"custom",label:"Other",description:"Custom practice"}],p=[5,10,15,20,30,45,60],{meditationEntries:v,isLoading:w,isInitialized:M,fetchAllHealthData:y,addMeditationEntry:j,updateMeditationEntryAction:N,deleteMeditationEntryAction:P}=tt(),b=x.useMemo(()=>v.filter(k=>k.date===o),[v,o]);x.useEffect(()=>{M||y()},[M,y]),x.useEffect(()=>{t(w)},[w]),x.useEffect(()=>{let k;return c.isActive&&c.timeLeft>0?k=setInterval(()=>{m(X=>({...X,timeLeft:X.timeLeft-1}))},1e3):c.timeLeft===0&&c.isActive&&(m(X=>({...X,isActive:!1})),B.success(`Great job! You meditated for ${c.duration} minutes.`,{description:"Meditation Complete! "})),()=>clearInterval(k)},[c.isActive,c.timeLeft,c.duration]);const F=async k=>{k.preventDefault(),t(!0);try{a!=null&&a.id?(await N(a.id,f),B.success("Meditation entry updated successfully!")):(await j(f),B.success("Meditation entry added successfully!")),C()}catch(X){console.error("Error saving meditation entry:",X),B.error("Failed to save meditation entry. Please try again.")}finally{t(!1)}},W=k=>{i(k),g(k),s(!0)},E=async k=>{if(confirm("Are you sure you want to delete this entry?")){t(!0);try{k.id&&(await P(k.id),B.success("Meditation entry deleted successfully!"))}catch(X){console.error("Error deleting meditation entry:",X),B.error("Failed to delete meditation entry. Please try again.")}finally{t(!1)}}},C=()=>{g({id:"",personId:"self",date:o,type:"mindfulness",duration:0,moodBefore:5,moodAfter:5,stressBefore:5,stressAfter:5,guided:!1,notes:"",timestamp:new Date().toISOString()}),i(null),s(!1)},T=()=>{m(k=>({...k,isActive:!0,startTime:new Date,timeLeft:k.duration*60}))},q=()=>{m(k=>({...k,isActive:!1}))},D=()=>{m(k=>({...k,isActive:!1,timeLeft:k.duration*60}))},Y=k=>{const X=Math.floor(k/60),Se=k%60;return`${X.toString().padStart(2,"0")}:${Se.toString().padStart(2,"0")}`},Z=k=>k<=2?"":k<=4?"":k<=6?"":k<=8?"":"",de=k=>k<=3?"text-green-600":k<=6?"text-yellow-600":"text-red-600",Q=()=>b.reduce((k,X)=>k+X.duration,0),re=b.length===0?{mood:0,stress:0}:{mood:b.reduce((k,X)=>k+X.moodAfter,0)/b.length,stress:b.reduce((k,X)=>k+X.stressAfter,0)/b.length};return r.jsxs("div",{className:"p-2 sm:p-4 md:p-6 space-y-4 md:space-y-6 min-h-[80vh]",children:[r.jsx(Tn,{icon:Nt,title:"Meditation & Mindfulness",date:o,onDateChange:l,action:r.jsxs(R,{onClick:()=>s(!0),"aria-label":"Log Session",children:[r.jsx(Mt,{className:"h-4 w-4"})," Log Session"]})}),r.jsxs(Cr,{value:u,onValueChange:d,className:"w-full",children:[r.jsxs(Pr,{className:"grid w-full grid-cols-4",children:[r.jsx(ge,{value:"today",children:"Today"}),r.jsx(ge,{value:"timer",children:"Meditation Timer"}),r.jsx(ge,{value:"history",children:"History"}),r.jsx(ge,{value:"insights",children:"Insights"})]}),r.jsxs(fe,{value:"today",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(A,{children:r.jsxs(L,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium text-sm",children:"Total Time"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("span",{className:"text-2xl font-bold",children:Q()}),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"minutes"})]})]})}),r.jsx(A,{children:r.jsxs(L,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nt,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"font-medium text-sm",children:"Sessions"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("span",{className:"text-2xl font-bold",children:b.length}),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"today"})]})]})}),r.jsx(A,{children:r.jsxs(L,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ds,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"font-medium text-sm",children:"Avg. Mood"})]}),r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl font-bold",children:re.mood.toFixed(1)}),r.jsx("span",{className:"text-lg",children:Z(re.mood)})]})]})})]}),r.jsxs(A,{children:[r.jsx(H,{children:r.jsxs(z,{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5"}),"Today's Meditation Sessions"]})}),r.jsx(L,{children:b.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Nt,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No sessions today"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start your mindfulness journey by logging your first meditation session."})]}):r.jsx("div",{className:"space-y-4",children:b.map((k,X)=>{var Se;return r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ie,{variant:"outline",className:"bg-purple-100 text-purple-800",children:(Se=h.find(ht=>ht.value===k.type))==null?void 0:Se.label}),r.jsxs("span",{className:"font-medium",children:[k.duration," minutes"]}),k.guided&&r.jsx(ie,{variant:"secondary",className:"text-xs",children:"Guided"})]}),r.jsxs("div",{className:"mt-2 text-sm text-gray-600 grid grid-cols-2 md:grid-cols-3 gap-4",children:[r.jsxs("span",{children:["Mood: ",Z(k.moodBefore),"  ",Z(k.moodAfter)]}),r.jsxs("span",{className:de(k.stressAfter),children:["Stress: ",k.stressBefore,"  ",k.stressAfter]}),r.jsx("span",{children:k.timestamp&&ae(new Date(k.timestamp),"h:mm a")})]}),k.notes&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:k.notes})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>W(k),children:r.jsx(Kt,{className:"h-4 w-4"})}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>E(k),children:r.jsx(mt,{className:"h-4 w-4"})})]})]},X)})})})]})]}),r.jsx(fe,{value:"timer",children:r.jsxs(A,{className:"max-w-md mx-auto",children:[r.jsx(H,{className:"text-center",children:r.jsx(z,{children:"Meditation Timer"})}),r.jsxs(L,{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl font-bold text-purple-600 mb-4",children:Y(c.timeLeft)}),r.jsxs("div",{className:"text-lg text-gray-600 mb-6",children:[(le=h.find(k=>k.value===c.type))==null?void 0:le.label," Meditation"]})]}),!c.isActive&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(O,{children:"Duration (minutes)"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:p.map(k=>r.jsxs(R,{variant:c.duration===k?"default":"outline",size:"sm",onClick:()=>m(X=>({...X,duration:k,timeLeft:k*60})),children:[k,"m"]},k))})]}),r.jsxs("div",{children:[r.jsx(O,{children:"Meditation Type"}),r.jsxs(Ke,{value:c.type,onValueChange:k=>m(X=>({...X,type:k})),children:[r.jsx(Xe,{children:r.jsx(Qe,{})}),r.jsx(Je,{children:h.map(k=>r.jsx(ce,{value:k.value,children:k.label},k.value))})]})]})]}),r.jsxs("div",{className:"flex justify-center gap-4",children:[c.isActive?r.jsxs(R,{onClick:q,size:"lg",variant:"outline",className:"flex items-center gap-2",children:[r.jsx(jc,{className:"h-5 w-5"}),"Pause"]}):r.jsxs(R,{onClick:T,size:"lg",className:"flex items-center gap-2",children:[r.jsx(Sc,{className:"h-5 w-5"}),"Start"]}),r.jsxs(R,{onClick:D,size:"lg",variant:"outline",className:"flex items-center gap-2",children:[r.jsx(ua,{className:"h-5 w-5"}),"Reset"]})]}),c.timeLeft===0&&r.jsx(R,{onClick:()=>{g({...f,type:c.type,duration:c.duration}),s(!0)},className:"w-full",children:"Log This Session"})]})]})}),r.jsx(fe,{value:"history",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"Meditation History"})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(kt,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Meditation History"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View your meditation practice over time."})]})})]})}),r.jsx(fe,{value:"insights",children:r.jsxs(A,{children:[r.jsx(H,{children:r.jsx(z,{children:"Meditation Insights"})}),r.jsx(L,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ds,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Meditation Insights"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Discover patterns and insights from your meditation practice."})]})})]})})]}),n&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(A,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(H,{children:r.jsx(z,{children:a?"Edit Meditation Session":"Log Meditation Session"})}),r.jsx(L,{children:r.jsxs("form",{onSubmit:F,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"type",children:"Meditation Type"}),r.jsxs(Ke,{value:f.type,onValueChange:k=>g({...f,type:k}),children:[r.jsx(Xe,{children:r.jsx(Qe,{})}),r.jsx(Je,{children:h.map(k=>r.jsx(ce,{value:k.value,children:r.jsxs("div",{children:[r.jsx("div",{children:k.label}),r.jsx("div",{className:"text-xs text-gray-500",children:k.description})]})},k.value))})]})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"duration",children:"Duration (minutes)"}),r.jsx(G,{id:"duration",type:"number",value:f.duration,onChange:k=>g({...f,duration:Number(k.target.value)}),min:"1",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"moodBefore",children:"Mood Before (1-10)"}),r.jsx(G,{id:"moodBefore",type:"number",value:f.moodBefore,onChange:k=>g({...f,moodBefore:Number(k.target.value)}),min:"1",max:"10",required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"moodAfter",children:"Mood After (1-10)"}),r.jsx(G,{id:"moodAfter",type:"number",value:f.moodAfter,onChange:k=>g({...f,moodAfter:Number(k.target.value)}),min:"1",max:"10",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(O,{htmlFor:"stressBefore",children:"Stress Before (1-10)"}),r.jsx(G,{id:"stressBefore",type:"number",value:f.stressBefore,onChange:k=>g({...f,stressBefore:Number(k.target.value)}),min:"1",max:"10",required:!0})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"stressAfter",children:"Stress After (1-10)"}),r.jsx(G,{id:"stressAfter",type:"number",value:f.stressAfter,onChange:k=>g({...f,stressAfter:Number(k.target.value)}),min:"1",max:"10",required:!0})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"guided",checked:f.guided,onChange:k=>g({...f,guided:k.target.checked}),className:"rounded"}),r.jsx(O,{htmlFor:"guided",children:"Guided meditation"})]}),r.jsxs("div",{children:[r.jsx(O,{htmlFor:"notes",children:"Notes (optional)"}),r.jsx(Ee,{id:"notes",value:f.notes,onChange:k=>g({...f,notes:k.target.value}),placeholder:"How did the session go? Any insights or observations...",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(R,{type:"submit",disabled:e,className:"flex-1",children:e?"Saving...":a?"Update Session":"Log Session"}),r.jsx(R,{type:"button",variant:"outline",onClick:C,children:"Cancel"})]})]})})]})})]})},kh=()=>{const{currentView:e}=Nn();switch(e){case"dashboard":return r.jsx(Us,{});case"workouts":return r.jsx(Kg,{});case"schedule":return r.jsx(Xg,{});case"stats":return r.jsx(Qg,{});case"profile":return r.jsx(Jg,{});case"settings":return r.jsx(Zg,{});case"todos":return r.jsx(cl,{});case"muscleFatigue":return r.jsx(Dl,{});case"sleep-tracking":return r.jsx(Rl,{});case"nutrition":return r.jsx(ef,{});case"meal-planning":return r.jsx(tf,{});case"health-tracking":return r.jsx(Ph,{});case"meditation":return r.jsx(Mh,{});default:return r.jsx(Us,{})}},sp=()=>{const{exercisesStore:e}=Cn(),{fetchExercises:t}=e;return x.useEffect(()=>{t()},[t]),r.jsx(rl,{children:r.jsx(kh,{})})};export{sp as default};
//# sourceMappingURL=DashboardPage-CY2NYa70.js.map
