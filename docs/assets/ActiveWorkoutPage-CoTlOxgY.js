import{v as Ms,h as As,L as Ws,t as _s,r as l,j as e,B as p,c as Ds}from"./pwa-components-DFRzXAPN.js";import{Y as Fs,h as ls,k as Ne,I as b,X as Ps,D as Ls,m as re,n as te,o as ie,p as ne,q as ae,T as Is,L as f,s as le}from"./DashboardLayout-c4N3lsWj.js";import{c as ms,C as cs,d as os,t as h}from"./index-DoxOVinb.js";import{C as we,P as ye}from"./progress-CwerKmR9.js";import{B as D}from"./badge-DDeZSJE1.js";import{S as Os}from"./scroll-area-Coq-ol54.js";import{A as zs}from"./arrow-left-1LmNAeng.js";import{S as ds}from"./search-BZv1Nir8.js";import{S as Bs}from"./square-pen-Cv09M6XU.js";import{T as Vs}from"./trash-2-D7BXSIAU.js";import{S as Hs}from"./save-CCykoWoj.js";import"./db-utils-DgoSxAK8.js";import"./react-vendor-Csw2ODfV.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ks=ms("list",qs);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ys=ms("star",Us),ce=({value:n,onChange:M,suggestions:F,placeholder:oe,className:de})=>{const[H,C]=l.useState(!1),[k,E]=l.useState([]),[T,G]=l.useState(-1),S=l.useRef(null),w=l.useRef(null),y=l.useRef(!0),R=()=>{y.current&&(C(!1),E([]),G(-1),w.current&&(clearTimeout(w.current),w.current=null))};l.useEffect(()=>(y.current=!0,R(),()=>{y.current=!1,w.current&&clearTimeout(w.current)}),[]),l.useEffect(()=>{if(y.current)try{if(n&&n.trim()&&F.length>0){const c=F.filter(j=>j.toLowerCase().includes(n.toLowerCase()));E(c),document.activeElement===S.current&&C(c.length>0)}else E([]),C(!1);G(-1)}catch(c){console.error("Error filtering suggestions:",c),E([]),C(!1),G(-1)}},[n,F]);const P=c=>{M(c.target.value)},q=c=>{var j;M(c),R(),(j=S.current)==null||j.blur()},V=c=>{var j;if(!(!H||!y.current))switch(c.key){case"ArrowDown":c.preventDefault(),G(t=>t<k.length-1?t+1:t);break;case"ArrowUp":c.preventDefault(),G(t=>t>0?t-1:-1);break;case"Enter":c.preventDefault(),T>=0&&k[T]?q(k[T]):R();break;case"Escape":c.preventDefault(),R(),(j=S.current)==null||j.blur();break;case"Tab":R();break}},A=()=>{w.current=setTimeout(()=>{y.current&&R()},300)},K=()=>{if(w.current&&(clearTimeout(w.current),w.current=null),n&&n.trim()&&y.current){const c=F.filter(j=>j.toLowerCase().includes(n.toLowerCase()));c.length>0&&(E(c),C(!0))}};return e.jsxs("div",{className:"relative",children:[e.jsx(b,{ref:S,value:n,onChange:P,onKeyDown:V,onBlur:A,onFocus:K,placeholder:oe,className:de}),H&&k.length>0&&e.jsx("ul",{className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg max-h-60 overflow-auto",onMouseDown:c=>{c.preventDefault()},children:k.map((c,j)=>e.jsx("li",{onMouseDown:t=>{t.preventDefault(),q(c)},className:Ds("px-3 py-2 cursor-pointer text-foreground hover:bg-muted transition-colors",T===j&&"bg-muted"),children:c},c))})]})},or=()=>{var Fe,Pe,Le,Ie,Oe,ze,Be,Ve,He,qe,Ke,Ue,Ye,Qe,Xe,Je,Ze,es,ss,rs,ts,is,ns,as;const{activeWorkout:n,updateActiveWorkout:M,completeWorkout:F,addExerciseSet:oe}=Ms(),{addWorkoutLog:de,getPreviousHighestVolumeWorkout:H}=As(),{exerciseGroups:C,fetchExercises:k,getExercisesByMuscleGroup:E,getMuscleGroupsByExercise:T,getAllUniqueExerciseNames:G}=Ws(),S=_s(),[w,y]=l.useState(null),[R,P]=l.useState(!1),[q,V]=l.useState(!1),[A,K]=l.useState(!1),[c,j]=l.useState(null),[t,us]=l.useState(null),[me,W]=l.useState(0),[ue,_]=l.useState(0),[be,Ce]=l.useState(5),[pe,Se]=l.useState(!1),[L,$e]=l.useState(""),[ps,U]=l.useState(!1),[xs,Y]=l.useState(!1),[xe,he]=l.useState(null),[I,ke]=l.useState(null),[a,g]=l.useState({name:"",muscleGroup:"",sets:3,reps:10,weight:0,rest:60}),[Q,hs]=l.useState(0),[Ee,ge]=l.useState(!1),Te=l.useRef([]),[d,Ge]=l.useState({}),X=60,gs=90;l.useEffect(()=>{C.length===0&&k()},[C.length,k]);const O=a.muscleGroup,Re=a.name,Me=l.useMemo(()=>{try{return C.map(s=>s.muscleGroup).filter(Boolean)}catch(s){return console.error("Error getting muscle groups:",s),[]}},[C]),Ae=l.useMemo(()=>{try{return O?E(O):G()}catch(s){return console.error("Error getting exercises:",s),[]}},[O,E,G]),We=s=>{if(g(r=>({...r,muscleGroup:s})),Re&&s)try{T(Re).includes(s)||g(i=>({...i,name:""}))}catch(r){console.error("Error checking exercise muscle groups:",r),g(i=>({...i,name:""}))}},_e=s=>{if(g(r=>({...r,name:s})),!O&&s)try{const r=T(s);r.length>0&&g(i=>({...i,muscleGroup:r[0]}))}catch(r){console.error("Error getting muscle groups for exercise:",r)}else if(O&&s)try{const r=T(s);r.includes(O)||r.length>0&&g(i=>({...i,muscleGroup:r[0]}))}catch(r){console.error("Error validating muscle group for exercise:",r)}};l.useEffect(()=>{if(!n)S.push("/");else{const s=n.exercises.findIndex(r=>(r.setsCompleted||0)<r.sets);s!==-1&&y(s)}},[n,S]),l.useEffect(()=>{t&&(W(t.weight||0),_(t.reps||0))},[t]);const fs=()=>{if(!n)return"00:00";const s=new Date(n.startTime),i=new Date().getTime()-s.getTime(),m=Math.floor(i/1e3/60),o=Math.floor(m/60),u=m%60;return`${o>0?`${o}h `:""}${u<10?"0":""}${u}m`},js=()=>{if(!A||!c)return"00:00";const s=Date.now(),r=Math.floor((s-c)/1e3),i=Math.floor(r/60),m=r%60;return`${i}:${m<10?"0":""}${m}`},fe=(s=X)=>{j(Date.now()),K(!0),h("Rest Timer Started",{description:`Rest timer started for ${s} seconds`})},vs=()=>{if(!c)return 0;const s=Math.round((Date.now()-c)/1e3);return K(!1),j(null),s},Ns=()=>{vs(),h("Rest Timer Stopped",{description:"Rest timer has been stopped"})},J=()=>{if(!n||!n.exercises)return 0;let s=0,r=0;return n.exercises.forEach(i=>{s+=i.sets,r+=i.setsCompleted||0}),s===0?0:Math.round(r/s*100)},ws=async(s,r=3)=>{ge(!0);for(let i=1;i<=r;i++)try{return await s(),ge(!1),!0}catch(m){console.error(`API attempt ${i} failed:`,m),i<r&&await new Promise(o=>setTimeout(o,1e4))}return ge(!1),!1},ys=s=>{var m;if(!n)return;const r=n.exercises[s];if((r.setsCompleted||0)<r.sets){ke(s);const o=H(r.name,r.muscleGroup);let u=null;o&&(u={...o,allSets:((m=o.allSets)==null?void 0:m.map(x=>({id:x.id,weight:x.weight,reps:x.reps,rating:x.rating,restTime:x.restTime===void 0?null:x.restTime,volume:x.volume,used:!1})))||[]}),y(s),W(r.weight||0),_(r.reps||0),Ce(5),us({...r,index:s}),u&&Ge(x=>{const $={...x};return $[`${r.name}_${r.muscleGroup}`]=u,$}),P(!0)}},bs=async()=>{if(!(!n||w===null||!t)){Se(!0);try{const s=t.index,r=n.exercises[s],i=r.setsCompleted||0;if(i<r.sets){const m=A&&c?Math.round((Date.now()-c)/1e3):r.rest||X,o={date:new Date().toISOString().split("T")[0],muscleGroup:r.muscleGroup,exercise:r.name,sets:r.sets,reps:ue,weight:me,rating:be,restTime:m},x=ws(async()=>{await de(o)}),$=new Promise(v=>{setTimeout(()=>v(!1),3e4)}),ee=await Promise.race([x,$]),z=[...n.exercises];if(z[s]={...z[s],weight:me,reps:ue,setsCompleted:i+1,percentComplete:(i+1)/r.sets*100},M({exercises:z}),t){const v=`${r.name}_${r.muscleGroup}`,N=d[v];if(N&&N.allSets&&N.allSets.length>0){const B=[...N.allSets],je=B.findIndex(ve=>!ve.used);je!==-1&&(B[je]={...B[je],used:!0},Ge(ve=>{const se={...ve};return se[v]&&(se[v]={...se[v],allSets:B}),se}))}}if(ee?h.success("Set Completed",{description:`${r.name} set ${i+1}/${r.sets} logged successfully`}):Ee?h.warning("Set Completed (Retrying)",{description:`${r.name} set ${i+1}/${r.sets} completed. Retrying to sync...`}):h.success("Set Completed (Offline)",{description:`${r.name} set ${i+1}/${r.sets} completed. Will sync when online.`}),P(!1),i+1>=r.sets){ke(null);const v=n.exercises.findIndex((N,B)=>B>s&&(N.setsCompleted||0)<N.sets);v!==-1?(fe(gs),y(v)):(fe(r.rest||X),h.success("Workout Complete",{description:"All exercises have been completed! You can finish your workout."}))}else fe(r.rest||X)}}catch(s){console.error("Failed to update exercise progress:",s),h.error("Error",{description:"Failed to update exercise progress. Please try again."})}finally{Se(!1)}}},Cs=async()=>{if(!n)return;const s=await F();s.success?(h.success("Workout Completed",{description:"Your workout has been saved."}),S.push("/")):h.error("Error",{description:s.error||"Failed to complete workout"})},Ss=s=>{n&&(oe(s),h("Set Added",{description:`Added an extra set to ${n.exercises[s].name}`}))};l.useEffect(()=>{let s=null;return A&&(s=setInterval(()=>{$s({})},1e3)),()=>{s&&clearInterval(s)}},[A]);const[,$s]=l.useState({}),De=()=>{var r;if(!n||!L.trim())return;const s=n.exercises.findIndex(i=>i.name.toLowerCase().includes(L.toLowerCase())||i.muscleGroup.toLowerCase().includes(L.toLowerCase()));s!==-1?((r=Te.current[s])==null||r.scrollIntoView({behavior:"smooth",block:"center"}),y(s),h.success("Exercise Found",{description:`Found: ${n.exercises[s].name}`})):h.error("Not Found",{description:"No exercise matches your search"})},ks=()=>{$e("")},Z=()=>{g({name:"",muscleGroup:"",sets:3,reps:10,weight:0,rest:60}),hs(s=>s+1)},Es=async()=>{if(!n||!a.name.trim()||!a.muscleGroup.trim()){h.error("Missing Information",{description:"Please fill in exercise name and muscle group"});return}const s={name:a.name.trim(),muscleGroup:a.muscleGroup.trim(),sets:a.sets,reps:a.reps,weight:a.weight,rest:a.rest,notes:"",setsCompleted:0,percentComplete:0,difficultyLevel:"Moderate",equipmentRequired:"None",targetIntensity:"Medium",primaryMuscleGroup:a.muscleGroup.trim(),secondaryMuscleGroup:"",exerciseDuration:"",recoveryTime:"",exerciseType:"Strength",caloriesBurned:"",exerciseProgression:"",injuryRiskLevel:"Low",exerciseLink:"",imageLink:"",relativePath:""},r=[...n.exercises,s];M({exercises:r}),h.success("Exercise Added",{description:`${a.name} added to workout`}),U(!1),Z()},Ts=s=>{if(!n)return;const r=n.exercises[s];he(s),g({name:r.name,muscleGroup:r.muscleGroup,sets:r.sets,reps:r.reps,weight:r.weight,rest:r.rest}),Y(!0)},Gs=async()=>{if(!n||xe===null||!a.name.trim()||!a.muscleGroup.trim()){h.error("Missing Information",{description:"Please fill in exercise name and muscle group"});return}const s=[...n.exercises],r=s[xe];s[xe]={...r,name:a.name.trim(),muscleGroup:a.muscleGroup.trim(),sets:a.sets,reps:a.reps,weight:a.weight,rest:a.rest,primaryMuscleGroup:a.muscleGroup.trim(),percentComplete:r.setsCompleted?r.setsCompleted/a.sets*100:0},M({exercises:s}),h.success("Exercise Updated",{description:`${a.name} updated in workout`}),Y(!1),he(null),Z()},Rs=async s=>{if(!n)return;const r=n.exercises[s],i=n.exercises.filter((m,o)=>o!==s);M({exercises:i}),h.success("Exercise Deleted",{description:`${r.name} removed from workout`})};return n?e.jsxs(Fs,{children:[e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>S.push("/"),children:e.jsx(zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold ml-2",children:"Active Workout"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ls,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:fs()})]}),A&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{variant:"outline",className:"bg-primary/10 text-primary flex items-center gap-1",children:[e.jsx(ls,{className:"h-3 w-3"}),"Rest: ",js()]}),e.jsx(p,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:Ns,children:"Stop"})]}),Ee&&e.jsxs(D,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200 flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"Syncing..."]}),e.jsxs(p,{variant:"default",size:"sm",onClick:()=>V(!0),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Finish Workout"]})]})]}),e.jsx(cs,{className:"mb-6",children:e.jsx(os,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:n.templateName}),e.jsx("p",{className:"text-muted-foreground",children:n.description})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Overall Progress:"}),e.jsxs("span",{className:"font-medium",children:[J(),"%"]})]}),e.jsx(ye,{value:J(),className:"w-40"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Exercises"}),e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>U(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Add Exercise"]})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Search exercises...",value:L,onChange:s=>$e(s.target.value),onKeyPress:s=>s.key==="Enter"&&De(),className:"pl-10 pr-10"}),L&&e.jsx(p,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:ks,children:e.jsx(Ps,{className:"h-3 w-3"})})]}),e.jsx(p,{onClick:De,disabled:!L.trim(),children:e.jsx(ds,{className:"h-4 w-4"})})]}),e.jsx(Os,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-4 pr-4",children:(()=>{const s=n.exercises,r=I!==null?s[I]:null,i=s.filter((o,u)=>u!==I),m=[];return r&&I!==null&&m.push({exercise:r,originalIndex:I,isPinned:!0}),i.forEach(o=>{const u=s.findIndex((x,$)=>x===o&&$!==I);m.push({exercise:o,originalIndex:u,isPinned:!1})}),m.map(({exercise:o,originalIndex:u,isPinned:x})=>{const $=(o.setsCompleted||0)>=o.sets,ee=u===w;return e.jsxs(cs,{ref:z=>{Te.current[u]=z},className:`${x?"border-primary bg-primary/10 shadow-lg":ee?"border-primary/50 bg-primary/5":$?"border-muted bg-muted/20":""} ${x?"relative":""}`,children:[x&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium",children:"📌 Active"}),e.jsxs(os,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ls,{className:`h-4 w-4 ${ee||x?"text-primary":"text-muted-foreground"}`}),e.jsx("h3",{className:"font-medium text-lg",children:o.name})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.sets," sets × ",o.reps," reps",o.weight>0&&` @ ${o.weight}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{children:[o.setsCompleted||0,"/",o.sets," Sets"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Ts(u),title:"Edit exercise",children:e.jsx(Bs,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",onClick:()=>Rs(u),title:"Delete exercise",children:e.jsx(Vs,{className:"h-4 w-4"})})]})]})]}),e.jsx(ye,{value:(o.setsCompleted||0)/o.sets*100,className:"h-1.5 mb-4"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Array.from({length:o.sets}).map((z,v)=>{const N=(o.setsCompleted||0)>v;return e.jsxs(p,{size:"sm",variant:N?"default":"outline",className:N?"opacity-70":"",onClick:()=>!N&&ys(u),disabled:N,children:[N?e.jsx(we,{className:"h-3.5 w-3.5 mr-1"}):null,"Set ",v+1]},v)}),$&&e.jsxs(p,{size:"sm",variant:"secondary",onClick:()=>Ss(u),children:[e.jsx(Ne,{className:"h-3.5 w-3.5 mr-1"}),"Extra Set"]})]})]})]},u)})})()})})]})})]}),"      ",e.jsx(re,{open:R,onOpenChange:P,children:e.jsxs(te,{className:"max-h-[90vh] flex flex-col",children:[e.jsxs(ie,{className:"flex-shrink-0",children:[e.jsx(ne,{children:"Log Exercise Set"}),e.jsxs(ae,{children:["Record details for ",t==null?void 0:t.name," - Set ",((t==null?void 0:t.setsCompleted)||0)+1]})]}),"          ",e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 py-2",children:[t&&d[`${t.name}_${t.muscleGroup}`]&&e.jsxs("div",{className:"bg-muted/50 p-3 rounded-md border border-muted mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium mb-1 text-primary",children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsxs("span",{children:["Previous Best (",((Fe=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Fe.highestVolumeDate)||"N/A",")"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Available Volume:"})," ",e.jsx("span",{className:"font-medium",children:(()=>{const s=d[`${t.name}_${t.muscleGroup}`];return s!=null&&s.allSets?s.allSets.filter(i=>!i.used).reduce((i,m)=>i+m.volume,0).toFixed(1):"0"})()})," ",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",(Le=(Pe=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Pe.totalVolume)==null?void 0:Le.toFixed(1)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Max Weight:"})," ",e.jsx("span",{className:"font-medium",children:(Ie=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Ie.weight})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Available Sets:"})," ",e.jsxs("span",{className:"font-medium",children:[((ze=(Oe=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Oe.allSets)==null?void 0:ze.filter(s=>!s.used).length)||0," ",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",((Be=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Be.totalSets)||0]})]})]})]}),e.jsxs("div",{className:"text-xs mb-2",children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsxs("span",{className:"font-medium text-primary/80 flex items-center gap-1",children:[e.jsx(Ks,{className:"h-3 w-3"}),e.jsxs("span",{children:["All Sets from Best Workout (",((He=(Ve=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Ve.allSets)==null?void 0:He.length)||0," total sets)"]})]})}),e.jsxs("div",{className:"bg-muted/70 rounded-md overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2 p-1.5 text-[10px] font-medium text-muted-foreground border-b border-border/30",children:[e.jsx("div",{children:"Set"}),e.jsx("div",{children:"Weight"}),e.jsx("div",{children:"Reps"}),e.jsx("div",{children:"Volume"}),e.jsx("div",{children:"Status"})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto",children:(()=>{var r;const s=(r=d[`${t.name}_${t.muscleGroup}`])==null?void 0:r.allSets;return console.log("Sets data for debugging:",{exercise:t.name,muscleGroup:t.muscleGroup,sets:s,setsLength:s==null?void 0:s.length,firstSet:s==null?void 0:s[0]}),!s||s.length===0?e.jsx("div",{className:"p-2 text-center text-xs text-muted-foreground",children:"No previous workout data available"}):s.map((i,m)=>e.jsxs("div",{className:`grid grid-cols-5 gap-2 p-1.5 text-[10px] border-b border-border/20 hover:bg-muted transition-colors cursor-pointer ${i.used?"opacity-60 bg-green-50":""}`,onClick:()=>{W(i.weight),_(i.reps)},children:[e.jsx("div",{children:m+1}),e.jsx("div",{className:"font-medium",children:i.weight}),e.jsx("div",{className:"font-medium",children:i.reps}),e.jsx("div",{children:i.volume.toFixed(1)}),e.jsx("div",{className:`text-[9px] ${i.used?"text-green-600":"text-muted-foreground"}`,children:i.used?"✓ Used":"Available"})]},i.id))})()})]})]}),((qe=d[`${t.name}_${t.muscleGroup}`])==null?void 0:qe.progressionTargets)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-medium text-primary/80 mb-1 flex items-center gap-1",children:[e.jsx(Ys,{className:"h-3 w-3"}),e.jsxs("span",{children:["Progression Targets (",(Ke=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Ke.progressionTargets.progressionRate.toFixed(1),"% increase)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-muted/80 p-2 rounded-md mb-1 hover:bg-muted cursor-pointer transition-colors",onClick:()=>{var r;const s=(r=d[`${t.name}_${t.muscleGroup}`])==null?void 0:r.progressionTargets.sameWeightMoreReps;s&&(W(s.weight),_(s.reps))},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-primary",children:"Option 1: More Reps"}),e.jsxs(D,{variant:"outline",className:"bg-primary/10 text-primary text-[9px] h-4",children:[(Ue=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Ue.progressionTargets.sameWeightMoreReps.sets," set",((Ye=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Ye.progressionTargets.sameWeightMoreReps.sets)!==1?"s":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight: "}),e.jsx("span",{children:(Qe=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Qe.progressionTargets.sameWeightMoreReps.weight})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Target Reps: "}),e.jsx("span",{className:"font-medium text-primary",children:(Xe=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Xe.progressionTargets.sameWeightMoreReps.reps}),e.jsxs("span",{className:"text-green-500 text-[10px] ml-1",children:["(+",(Je=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Je.progressionTargets.sameWeightMoreReps.additionalReps,")"]})]})]}),e.jsx("div",{className:"text-[10px] mt-1 text-muted-foreground",children:"Tap to apply these values"})]}),e.jsxs("div",{className:"bg-muted/80 p-2 rounded-md mb-1 hover:bg-muted cursor-pointer transition-colors",onClick:()=>{var r;const s=(r=d[`${t.name}_${t.muscleGroup}`])==null?void 0:r.progressionTargets.moreSets;s&&(W(s.weight),_(s.reps))},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-primary",children:"Option 2: More Sets"}),e.jsxs(D,{variant:"outline",className:"bg-primary/10 text-primary text-[9px] h-4",children:[(Ze=d[`${t.name}_${t.muscleGroup}`])==null?void 0:Ze.progressionTargets.moreSets.sets," set",((es=d[`${t.name}_${t.muscleGroup}`])==null?void 0:es.progressionTargets.moreSets.sets)!==1?"s":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight: "}),e.jsx("span",{children:(ss=d[`${t.name}_${t.muscleGroup}`])==null?void 0:ss.progressionTargets.moreSets.weight})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Reps: "}),e.jsx("span",{children:(rs=d[`${t.name}_${t.muscleGroup}`])==null?void 0:rs.progressionTargets.moreSets.reps})]})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Tap to apply these values"}),e.jsxs("div",{className:"text-green-500 text-[10px]",children:["(+",(ts=d[`${t.name}_${t.muscleGroup}`])==null?void 0:ts.progressionTargets.moreSets.additionalSets," sets)"]})]})]}),e.jsxs("div",{className:"bg-muted/80 p-2 rounded-md hover:bg-muted cursor-pointer transition-colors",onClick:()=>{var r;const s=(r=d[`${t.name}_${t.muscleGroup}`])==null?void 0:r.progressionTargets.balancedProgression;s&&(W(s.weight),_(s.reps))},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-primary",children:"Option 3: Balanced"}),e.jsx(D,{variant:"outline",className:"bg-primary/10 text-primary text-[9px] h-4",children:"Recommended"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight: "}),e.jsx("span",{className:"font-medium text-primary",children:(is=d[`${t.name}_${t.muscleGroup}`])==null?void 0:is.progressionTargets.balancedProgression.weight})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Reps: "}),e.jsx("span",{className:"font-medium text-primary",children:(ns=d[`${t.name}_${t.muscleGroup}`])==null?void 0:ns.progressionTargets.balancedProgression.reps}),e.jsxs("span",{className:"text-green-500 text-[10px] ml-1",children:["(+",(as=d[`${t.name}_${t.muscleGroup}`])==null?void 0:as.progressionTargets.balancedProgression.additionalReps,")"]})]})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Tap to apply these values"}),e.jsx("div",{className:"text-green-500 text-[10px]",children:(()=>{var r,i,m;const s=(m=(i=(r=d[`${t.name}_${t.muscleGroup}`])==null?void 0:r.progressionTargets)==null?void 0:i.balancedProgression)==null?void 0:m.additionalSets;return s&&s>0?`(+${s} sets)`:""})()})]})]})]}),"                "]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"weight",children:"Weight"}),e.jsx(b,{id:"weight",type:"number",min:0,value:me,onChange:s=>W(Number(s.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"reps",children:"Reps"}),e.jsx(b,{id:"reps",type:"number",min:0,value:ue,onChange:s=>_(Number(s.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Rating (How difficult was this set?)"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 pt-2",children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(p,{type:"button",variant:be===s?"default":"outline",size:"sm",onClick:()=>Ce(s),className:"px-2 text-xs",children:[s,s===1&&e.jsx("span",{className:"hidden sm:inline",children:" - Easy"}),s===5&&e.jsx("span",{className:"hidden sm:inline",children:" - Normal"}),s===10&&e.jsx("span",{className:"hidden sm:inline",children:" - Hard"})]},s))}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"1 = Very Easy → 10 = Very Hard"})]})]})]}),e.jsxs(le,{className:"flex-shrink-0 pt-4 border-t",children:[e.jsx(p,{variant:"outline",onClick:()=>P(!1),disabled:pe,children:"Cancel"}),e.jsx(p,{onClick:bs,disabled:pe,children:pe?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]})]})}),e.jsx(re,{open:q,onOpenChange:V,children:e.jsxs(te,{children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Complete Workout?"}),e.jsx(ae,{children:"Are you sure you want to finish this workout? This action will save your progress."})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{children:"Progress:"}),e.jsxs(D,{children:[J(),"% Complete"]})]}),e.jsx(ye,{value:J()})]}),e.jsxs(le,{children:[e.jsx(p,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsxs(p,{onClick:Cs,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Complete Workout"]})]})]})}),e.jsx(re,{open:ps,onOpenChange:U,children:e.jsxs(te,{className:"max-w-md",children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Add New Exercise"}),e.jsx(ae,{children:"Add a new exercise to your current workout"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"muscle-group",children:"Muscle Group"}),e.jsx(ce,{value:a.muscleGroup,onChange:We,suggestions:Me,placeholder:"Type or select muscle group..."},`muscle-group-${Q}`)]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"exercise-name",children:"Exercise Name"}),e.jsx(ce,{value:a.name,onChange:_e,suggestions:Ae,placeholder:"Type or select exercise..."},`exercise-name-${Q}`)]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"sets",children:"Sets"}),e.jsx(b,{id:"sets",type:"number",min:"1",value:a.sets,onChange:s=>g(r=>({...r,sets:Number(s.target.value)}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"reps",children:"Reps"}),e.jsx(b,{id:"reps",type:"number",min:"1",value:a.reps,onChange:s=>g(r=>({...r,reps:Number(s.target.value)}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"weight",children:"Weight"}),e.jsx(b,{id:"weight",type:"number",min:"0",value:a.weight,onChange:s=>g(r=>({...r,weight:Number(s.target.value)}))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"rest",children:"Rest Time (seconds)"}),e.jsx(b,{id:"rest",type:"number",min:"0",value:a.rest,onChange:s=>g(r=>({...r,rest:Number(s.target.value)}))})]})]}),e.jsxs(le,{children:[e.jsx(p,{variant:"outline",onClick:()=>{U(!1),Z()},children:"Cancel"}),e.jsxs(p,{onClick:Es,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Add Exercise"]})]})]})}),e.jsx(re,{open:xs,onOpenChange:Y,children:e.jsxs(te,{className:"max-w-md",children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Edit Exercise"}),e.jsx(ae,{children:"Modify the exercise details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"edit-muscle-group",children:"Muscle Group"}),e.jsx(ce,{value:a.muscleGroup,onChange:We,suggestions:Me,placeholder:"Type or select muscle group..."},`edit-muscle-group-${Q}`)]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"edit-exercise-name",children:"Exercise Name"}),e.jsx(ce,{value:a.name,onChange:_e,suggestions:Ae,placeholder:"Type or select exercise..."},`edit-exercise-name-${Q}`)]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"edit-sets",children:"Sets"}),e.jsx(b,{id:"edit-sets",type:"number",min:"1",value:a.sets,onChange:s=>g(r=>({...r,sets:Number(s.target.value)}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"edit-reps",children:"Reps"}),e.jsx(b,{id:"edit-reps",type:"number",min:"1",value:a.reps,onChange:s=>g(r=>({...r,reps:Number(s.target.value)}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"edit-weight",children:"Weight"}),e.jsx(b,{id:"edit-weight",type:"number",min:"0",value:a.weight,onChange:s=>g(r=>({...r,weight:Number(s.target.value)}))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"edit-rest",children:"Rest Time (seconds)"}),e.jsx(b,{id:"edit-rest",type:"number",min:"0",value:a.rest,onChange:s=>g(r=>({...r,rest:Number(s.target.value)}))})]})]}),e.jsxs(le,{children:[e.jsx(p,{variant:"outline",onClick:()=>{Y(!1),he(null),Z()},children:"Cancel"}),e.jsxs(p,{onClick:Gs,children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})]}):e.jsx("div",{className:"flex justify-center items-center h-full",children:"Loading workout..."})};export{or as default};
//# sourceMappingURL=ActiveWorkoutPage-CoTlOxgY.js.map
