import{r as t,j as e,i as B,B as P}from"./pwa-components-DCYiFtsM.js";import{C as H,a as W,d as F,b as U}from"./index-CASXVt64.js";import{S as T,a as I,b as $,c as z,d as M}from"./select-0bFZk7A6.js";import{S as K}from"./scroll-area-mrj2kg5u.js";import{e as R}from"./DashboardLayout-vCgA3Lyl.js";import{M as O,u as q,P as X,a as J,b as Q,L as Y,m as D}from"./proxy-CXd9L7EY.js";import"./db-utils-DgoSxAK8.js";import"./react-vendor-Csw2ODfV.js";import"./index-iCFrSJtA.js";class Z extends t.Component{getSnapshotBeforeUpdate(a){const r=this.props.childRef.current;if(r&&a.isPresent&&!this.props.isPresent){const c=r.offsetParent,f=c instanceof HTMLElement&&c.offsetWidth||0,d=this.props.sizeRef.current;d.height=r.offsetHeight||0,d.width=r.offsetWidth||0,d.top=r.offsetTop,d.left=r.offsetLeft,d.right=f-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ee({children:n,isPresent:a,anchorX:r}){const c=t.useId(),f=t.useRef(null),d=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=t.useContext(O);return t.useInsertionEffect(()=>{const{width:u,height:h,top:x,left:m,right:p}=d.current;if(a||!f.current||!u||!h)return;const g=r==="left"?`left: ${m}`:`right: ${p}`;f.current.dataset.motionPopId=c;const l=document.createElement("style");return y&&(l.nonce=y),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${g}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(l)&&document.head.removeChild(l)}},[a]),e.jsx(Z,{isPresent:a,childRef:f,sizeRef:d,children:t.cloneElement(n,{ref:f})})}const se=({children:n,initial:a,isPresent:r,onExitComplete:c,custom:f,presenceAffectsLayout:d,mode:y,anchorX:u})=>{const h=q(te),x=t.useId();let m=!0,p=t.useMemo(()=>(m=!1,{id:x,initial:a,isPresent:r,custom:f,onExitComplete:g=>{h.set(g,!0);for(const l of h.values())if(!l)return;c&&c()},register:g=>(h.set(g,!1),()=>h.delete(g))}),[r,h,c]);return d&&m&&(p={...p}),t.useMemo(()=>{h.forEach((g,l)=>h.set(l,!1))},[r]),t.useEffect(()=>{!r&&!h.size&&c&&c()},[r]),y==="popLayout"&&(n=e.jsx(ee,{isPresent:r,anchorX:u,children:n})),e.jsx(X.Provider,{value:p,children:n})};function te(){return new Map}const G=n=>n.key||"";function V(n){const a=[];return t.Children.forEach(n,r=>{t.isValidElement(r)&&a.push(r)}),a}const re=({children:n,custom:a,initial:r=!0,onExitComplete:c,presenceAffectsLayout:f=!0,mode:d="sync",propagate:y=!1,anchorX:u="left"})=>{const[h,x]=J(y),m=t.useMemo(()=>V(n),[n]),p=y&&!h?[]:m.map(G),g=t.useRef(!0),l=t.useRef(m),v=q(()=>new Map),[S,N]=t.useState(m),[j,_]=t.useState(m);Q(()=>{g.current=!1,l.current=m;for(let C=0;C<j.length;C++){const o=G(j[C]);p.includes(o)?v.delete(o):v.get(o)!==!0&&v.set(o,!1)}},[j,p.length,p.join("-")]);const w=[];if(m!==S){let C=[...m];for(let o=0;o<j.length;o++){const b=j[o],k=G(b);p.includes(k)||(C.splice(o,0,b),w.push(b))}return d==="wait"&&w.length&&(C=w),_(V(C)),N(m),null}const{forceRender:L}=t.useContext(Y);return e.jsx(e.Fragment,{children:j.map(C=>{const o=G(C),b=y&&!h?!1:m===j||p.includes(o),k=()=>{if(v.has(o))v.set(o,!0);else return;let s=!0;v.forEach(i=>{i||(s=!1)}),s&&(L==null||L(),_(l.current),y&&(x==null||x()),c&&c())};return e.jsx(se,{isPresent:b,initial:!g.current||r?void 0:!1,custom:a,presenceAffectsLayout:f,mode:d,onExitComplete:b?void 0:k,anchorX:u,children:C},o)})})};function ie(n,a){const[r,c]=t.useState(n);return t.useEffect(()=>{const f=setTimeout(()=>{c(n)},a);return()=>{clearTimeout(f)}},[n,a]),r}const fe=()=>{const{exercises:n,fetchExercises:a,isLoading:r,error:c,getExercisesByMuscleGroup:f,getMuscleGroupsByExercise:d,getAllUniqueExerciseNames:y}=B(),[u,h]=t.useState(""),[x,m]=t.useState(""),[p,g]=t.useState(""),l=ie(p,300),[v,S]=t.useState([]),[N,j]=t.useState(!1);t.useEffect(()=>{a()},[a]);const _=t.useMemo(()=>{const s=new Set(n.map(i=>i.muscleGroup));return[...Array.from(s)].sort()},[n]),w=t.useMemo(()=>u?[...f(u)].sort():[...y()].sort(),[u,y,f]),L=s=>{h(s==="_all_muscle_groups_"?"":s),m(""),g(""),j(!1)},C=s=>{const i=s==="_all_exercises_"?"":s;if(m(i),i){const E=d(i);E.length>0&&!E.includes(u)&&h(E[0])}g(""),j(!1)},o=t.useCallback(()=>{if(!u&&!x&&!l){S([]),j(!1);return}j(!0);let s=n;u&&(s=s.filter(i=>i.muscleGroup===u)),x&&(s=s.filter(i=>i.exercise===x)),l&&(s=s.filter(i=>i.exercise.toLowerCase().includes(l.toLowerCase())||i.muscleGroup.toLowerCase().includes(l.toLowerCase()))),S(s)},[n,u,x,l,S,j]);t.useEffect(()=>{N||l?o():S([])},[l,u,x,N,o]);const[b,k]=t.useState({});return t.useEffect(()=>{const s={...b};v.forEach(i=>{if(i.imageLink&&!s[i.imageLink]){const E=new Image;E.src=i.imageLink,E.onload=()=>{k(A=>({...A,[i.imageLink]:i.imageLink}))},s[i.imageLink]="loading"}})},[v,b]),r&&n.length===0?e.jsx(R,{children:e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-var(--header-height,64px))]",children:e.jsx("p",{children:"Loading exercise data..."})})}):c?e.jsx(R,{children:e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-var(--header-height,64px))]",children:e.jsxs("p",{children:["Error: ",c]})})}):e.jsxs(R,{children:[" ",e.jsxs("div",{className:"container mx-auto p-4 md:p-8 bg-background text-foreground",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-primary",children:"Exercise Database"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Explore and discover new exercises."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 p-6 bg-card rounded-xl shadow-lg sticky top-[var(--header-height,64px)] z-10",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"muscleGroupSelect",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Muscle Group"}),e.jsxs(T,{value:u||"_all_muscle_groups_",onValueChange:L,children:[e.jsx(I,{id:"muscleGroupSelect",className:"w-full bg-input border-border",children:e.jsx($,{placeholder:"Select Muscle Group"})}),e.jsxs(z,{children:[e.jsx(M,{value:"_all_muscle_groups_",children:"All Muscle Groups"}),_.map(s=>e.jsx(M,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"exerciseSelect",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Exercise"}),e.jsxs(T,{value:x||"_all_exercises_",onValueChange:C,children:[e.jsx(I,{id:"exerciseSelect",className:"w-full bg-input border-border",children:e.jsx($,{placeholder:"Select Exercise"})}),e.jsxs(z,{children:[e.jsx(M,{value:"_all_exercises_",children:"All Exercises"}),w.map(s=>e.jsx(M,{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"md:col-span-1 flex items-end",children:e.jsx(P,{onClick:o,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:"Search Exercises"})})]}),N&&r&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{children:"Searching..."})})," ",!r&&N&&v.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-xl text-muted-foreground",children:"No exercises found matching your criteria."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your filters or search term."})]}),e.jsxs(K,{className:"h-[calc(100vh-var(--header-height,64px)-200px)]",children:[" ",e.jsx(re,{children:e.jsx(D.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pt-4",initial:"hidden",animate:"visible",exit:"hidden",children:v.map((s,i)=>e.jsx(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:i*.05}}},layout:!0,children:e.jsxs(H,{className:"overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out bg-card h-full flex flex-col",children:[e.jsx(W,{className:"p-0 relative aspect-square",children:s.imageLink&&b[s.imageLink]?e.jsx("img",{src:b[s.imageLink],alt:s.exercise,className:"w-full h-full object-cover",loading:"lazy"}):s.imageLink?e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading image..."})}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No Image"})})}),e.jsxs(F,{className:"p-4 flex-grow flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-lg font-semibold text-primary mb-1 truncate",title:s.exercise,children:s.exercise}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 capitalize",children:s.muscleGroup}),e.jsxs("div",{className:"text-xs space-y-1 text-foreground/80",children:[s.difficultyLevel&&e.jsxs("p",{children:[e.jsx("strong",{children:"Difficulty:"})," ",s.difficultyLevel]}),s.equipmentRequired&&e.jsxs("p",{children:[e.jsx("strong",{children:"Equipment:"})," ",s.equipmentRequired]}),s.exerciseType&&e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.exerciseType]})]})]}),s.exerciseLink&&e.jsx(P,{variant:"link",size:"sm",asChild:!0,className:"mt-3 p-0 h-auto self-start",children:e.jsx("a",{href:s.exerciseLink,target:"_blank",rel:"noopener noreferrer",children:"Watch Video"})})]})]})},`${s.exercise}-${s.muscleGroup}-${i}`))})})]}),!N&&!r&&e.jsx("div",{className:"text-center py-10 mt-8",children:e.jsx("p",{className:"text-xl text-muted-foreground",children:'Select filters and click "Search Exercises" to view data.'})})]})]})};export{fe as default};
//# sourceMappingURL=ExerciseDBPage-C_WBnuNl.js.map
