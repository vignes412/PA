import{j as e,c as De,r as a,b as Ee,B as l}from"./pwa-components-BjuB_FvI.js";import{e as Le,L as D,I as g,P,f as H,g as Q,h as X,i as J,j as K,k as Y,X as Ge}from"./DashboardLayout-V_9g2wH0.js";import{c as Ae,a as Me,b as $e}from"./index-BTAPVsZ3.js";import{S as Ie,a as Pe,b as We,c as Re,d as Z}from"./select-jGbyt049.js";import{S as W}from"./scroll-area-D9O9ckaB.js";import{T as Fe,a as Oe,b as ee,c as se}from"./tabs-SqtmW0B7.js";import{c as Be,C as E}from"./index-_pxMlPBE.js";import{b as te,c as ae,d as N,e as u,f as le,g as m,T as re}from"./table-CVV7nUPe.js";import{S as Ue}from"./save-MKdLR_df.js";import{S as ze}from"./square-pen-DdNHHkFy.js";import"./db-utils-DgoSxAK8.js";import"./react-vendor-Csw2ODfV.js";import"./gapiScript-D2rOjFaT.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qe=Be("search",Ve);function ce({className:f,shape:h="rect",pulse:T=!0,variant:o="default",...x}){return e.jsx("div",{className:De("animate-pulse",{"rounded-md":h==="rect","rounded-full":h==="circle","rounded-lg":h==="rounded","bg-muted/70":o==="default","bg-muted/30":o==="subtle"},f),...x})}function _e(){const[f,h]=a.useState([]);return{toast:o=>{h(x=>[...x,o]),alert(`${o.title}${o.description?`
`+o.description:""}`)},toasts:f}}const cs=()=>{const{exercises:f,exerciseGroups:h,fetchExercises:T,isLoading:o}=Ae(),{templates:x,fetchTemplates:R,saveTemplate:ie,deleteTemplate:ne,startWorkout:oe,isLoading:de}=Me();_e();const me=Ee(),[ue,b]=a.useState("build"),[L,he]=a.useState(null),[y,xe]=a.useState(""),[v,S]=a.useState(""),[F,w]=a.useState(""),[d,p]=a.useState([]),[pe,k]=a.useState(!1),[je,C]=a.useState(!1),[j,O]=a.useState(null),[B,U]=a.useState(!1),[z,V]=a.useState(!1),[ge,G]=a.useState(!1),[fe,ve]=a.useState(""),[Ne,Te]=a.useState("success"),[n,A]=a.useState(!1),[r,M]=a.useState(null);a.useEffect(()=>{T(),R()},[T,R]),a.useEffect(()=>{r&&n&&(S(r.name),w(r.description),p(r.exercises),b("build"))},[r,n]);const q=f.filter(s=>{const t=!L||s.muscleGroup===L,i=!y||s.exercise.toLowerCase().includes(y.toLowerCase())||s.muscleGroup.toLowerCase().includes(y.toLowerCase());return t&&i}),be=s=>{const t={name:s.exercise,muscleGroup:s.muscleGroup,sets:3,reps:10,weight:0,rest:60,notes:"",difficultyLevel:s.difficultyLevel,equipmentRequired:s.equipmentRequired,targetIntensity:String(s.targetIntensity),primaryMuscleGroup:s.primaryMuscleGroup,secondaryMuscleGroup:String(s.secondaryMuscleGroup||""),exerciseDuration:s.exerciseDuration,recoveryTime:s.recoveryTime,exerciseType:s.exerciseType,caloriesBurned:String(s.caloriesBurned),exerciseProgression:s.exerciseProgression,injuryRiskLevel:s.injuryRiskLevel,exerciseLink:s.exerciseLink,imageLink:s.imageLink,relativePath:s.relatedPath};p([...d,t]),c(`${s.exercise} added to template`,"success")},ye=s=>{const t=[...d];t.splice(s,1),p(t)},$=(s,t,i)=>{const I=[...d];I[s]={...I[s],[t]:i},p(I)},Se=async()=>{if(!v.trim()){c("Please enter a template name","error");return}if(d.length===0){c("Please add at least one exercise to the template","error");return}U(!0);const s={name:v,description:F,exercises:d,createdAt:n&&r?r.createdAt:new Date().toISOString(),lastUsed:n&&(r!=null&&r.lastUsed)?r.lastUsed:""};try{const t=await ie(s);t.success?(c(`Workout template ${n?"updated":"saved"} successfully`,"success"),S(""),w(""),p([]),k(!1),A(!1),M(null),n&&b("view")):c(`Error saving template: ${t.error}`,"error")}catch(t){c(`Error: ${t.message}`,"error")}finally{U(!1)}},we=async()=>{if(j){V(!0);try{const s=await ne(j.name);s.success?(c(`Template "${j.name}" deleted successfully`,"success"),C(!1),O(null)):c(`Error deleting template: ${s.error}`,"error")}catch(s){c(`Error: ${s.message}`,"error")}finally{V(!1)}}},ke=s=>{M(s),A(!0)},_=()=>{S(""),w(""),p([]),A(!1),M(null),b("build")},c=(s,t="success")=>{ve(s),Te(t),G(!0),setTimeout(()=>{G(!1)},3e3)},Ce=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return e.jsx(Le,{children:e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Workout Templates"})}),e.jsxs(Fe,{value:ue,onValueChange:b,className:"w-full",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-2",children:[e.jsx(ee,{value:"build",children:"Build Template"}),e.jsx(ee,{value:"view",children:"View Templates"})]}),e.jsxs(se,{value:"build",className:"mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"template-name",children:"Template Name"}),e.jsx(g,{id:"template-name",placeholder:"My Workout Template",value:v,onChange:s=>S(s.target.value),className:"mb-2"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"template-description",children:"Description (Optional)"}),e.jsx(g,{id:"template-description",placeholder:"Description of your workout template...",value:F,onChange:s=>w(s.target.value)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(D,{htmlFor:"muscle-group",children:"Filter by Muscle Group"}),"                  ",e.jsxs(Ie,{value:L||"all",onValueChange:s=>he(s==="all"?null:s),children:[e.jsx(Pe,{id:"muscle-group",children:e.jsx(We,{placeholder:"All Muscle Groups"})}),e.jsxs(Re,{children:[e.jsx(Z,{value:"all",children:"All Muscle Groups"}),h.map(s=>e.jsx(Z,{value:s.muscleGroup,children:s.muscleGroup},s.muscleGroup))]})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(D,{htmlFor:"search",children:"Search Exercises"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(g,{id:"search",type:"text",placeholder:"Search by name...",className:"pl-9",value:y,onChange:s=>xe(s.target.value)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_1fr] gap-6",children:[e.jsxs(E,{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Exercise Library"}),o?e.jsx("div",{className:"space-y-2",children:Array(5).fill(0).map((s,t)=>e.jsx(ce,{className:"h-16 w-full"},t))}):e.jsx(W,{className:"h-[500px]",children:e.jsxs(te,{children:[e.jsx(ae,{children:e.jsxs(N,{children:[e.jsx(u,{children:"Action"}),e.jsx(u,{children:"Exercise"}),e.jsx(u,{children:"Muscle Group"})]})}),e.jsx(le,{children:q.length>0?q.map((s,t)=>e.jsxs(N,{children:[e.jsx(m,{children:e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>be(s),children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsx(m,{children:s.exercise}),e.jsx(m,{children:s.muscleGroup})]},`${s.exercise}-${t}`)):e.jsx(N,{children:e.jsx(m,{colSpan:3,className:"text-center py-4",children:"No exercises found"})})})]})})]}),e.jsxs(E,{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Selected Exercises"}),e.jsx(W,{className:"h-[400px] mb-4",children:d.length>0?e.jsxs(te,{children:[e.jsx(ae,{children:e.jsxs(N,{children:[e.jsx(u,{children:"Exercise"}),e.jsx(u,{children:"Sets"}),e.jsx(u,{children:"Reps"}),e.jsx(u,{children:"Rest (s)"}),e.jsx(u,{children:"Action"})]})}),e.jsx(le,{children:d.map((s,t)=>e.jsxs(N,{children:[e.jsx(m,{children:s.name}),e.jsx(m,{children:e.jsx(g,{type:"number",value:s.sets,min:1,className:"w-16",onChange:i=>$(t,"sets",parseInt(i.target.value)||1)})}),e.jsx(m,{children:e.jsx(g,{type:"number",value:s.reps,min:1,className:"w-16",onChange:i=>$(t,"reps",parseInt(i.target.value)||1)})}),e.jsx(m,{children:e.jsx(g,{type:"number",value:s.rest,min:0,className:"w-16",onChange:i=>$(t,"rest",parseInt(i.target.value)||0)})}),e.jsx(m,{children:e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>ye(t),children:e.jsx(re,{className:"h-4 w-4"})})})]},t))})]}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"No exercises added yet. Add some from the library."})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(l,{variant:"default",onClick:()=>k(!0),disabled:d.length===0||!v.trim(),children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"})," ",n?"Update":"Save"," Template"]})})]})]})]}),e.jsxs(se,{value:"view",className:"mt-6",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs(l,{onClick:_,children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," New Template"]})}),de?e.jsx("div",{className:"space-y-4",children:Array(3).fill(0).map((s,t)=>e.jsx(ce,{className:"h-24 w-full"},t))}):x.length===0?e.jsxs(E,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Templates Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first workout template to get started."}),e.jsxs(l,{onClick:_,children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," Create New Template"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(s=>e.jsxs(E,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>ke(s),children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>{O(s),C(!0)},children:e.jsx(re,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Exercises:"})," ",e.jsx("span",{className:"font-medium",children:s.exercises.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",e.jsx("span",{className:"font-medium",children:Ce(s.createdAt)})]})]}),s.exercises.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Exercises:"}),e.jsx(W,{className:"h-32",children:e.jsxs("ul",{className:"space-y-1",children:[s.exercises.slice(0,5).map((t,i)=>e.jsxs("li",{className:"text-sm",children:[t.name," - ",t.sets,"×",t.reps]},i)),s.exercises.length>5&&e.jsxs("li",{className:"text-sm text-muted-foreground",children:["+",s.exercises.length-5," more"]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(l,{size:"sm",onClick:async()=>{const t=await oe(s.name);t.success?(c(`Workout started with template "${s.name}"`,"success"),me.push("/workout")):c(`Error starting workout: ${t.error}`,"error")},children:[e.jsx($e,{className:"mr-2 h-4 w-4"})," Start Workout"]})})]},s.name))})]})]}),e.jsx(H,{open:pe,onOpenChange:k,children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsxs(J,{children:[n?"Update":"Save"," Workout Template"]}),e.jsxs(K,{children:["Are you sure you want to ",n?"update":"save"," this workout template?"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Template Name:"})," ",v]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Exercises:"})," ",d.length]})]}),e.jsxs(Y,{children:[e.jsx(l,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(l,{onClick:Se,disabled:B,children:B?"Saving...":(n?"Update":"Save")+" Template"})]})]})}),e.jsx(H,{open:je,onOpenChange:C,children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsx(J,{children:"Delete Workout Template"}),e.jsx(K,{children:"Are you sure you want to delete this template? This action cannot be undone."})]}),j&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Template Name:"})," ",j.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Exercises:"})," ",j.exercises.length]})]}),e.jsxs(Y,{children:[e.jsx(l,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(l,{variant:"destructive",onClick:we,disabled:z,children:z?"Deleting...":"Delete Template"})]})]})}),ge&&e.jsxs("div",{className:`fixed bottom-4 right-4 z-50 bg-background border shadow-lg rounded-md px-4 py-2 flex items-center gap-2 ${Ne==="error"?"border-destructive text-destructive":"border-primary text-primary"}`,children:[fe,e.jsx("button",{onClick:()=>G(!1),className:"ml-2",children:e.jsx(Ge,{className:"h-4 w-4"})})]})]})})};export{cs as default};
//# sourceMappingURL=WorkoutTemplateBuilderPage-Bu3DvFuI.js.map
