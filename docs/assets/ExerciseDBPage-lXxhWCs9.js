import{r as t,j as e,B as T}from"./pwa-components-CT9i-ezC.js";import{w as I,x as P}from"./index-CHpeBst9.js";import{C as W,a as F,d as U,b as K}from"./index-DBtSAeQr.js";import{S as $,a as z,b as D,c as V,d as G}from"./select-CUnKq-MX.js";import{S as O}from"./scroll-area-I5Ixuqn2.js";import{M as X,u as B,P as J,a as Q,b as Y,L as Z,m as q}from"./proxy-DNL9cFv2.js";import"./db-utils-DgoSxAK8.js";import"./react-vendor-Csw2ODfV.js";import"./gapiScript-D2rOjFaT.js";import"./index-CwQNJK3M.js";class ee extends t.Component{getSnapshotBeforeUpdate(a){const r=this.props.childRef.current;if(r&&a.isPresent&&!this.props.isPresent){const l=r.offsetParent,f=l instanceof HTMLElement&&l.offsetWidth||0,d=this.props.sizeRef.current;d.height=r.offsetHeight||0,d.width=r.offsetWidth||0,d.top=r.offsetTop,d.left=r.offsetLeft,d.right=f-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function se({children:i,isPresent:a,anchorX:r}){const l=t.useId(),f=t.useRef(null),d=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=t.useContext(X);return t.useInsertionEffect(()=>{const{width:u,height:h,top:x,left:m,right:p}=d.current;if(a||!f.current||!u||!h)return;const g=r==="left"?`left: ${m}`:`right: ${p}`;f.current.dataset.motionPopId=l;const c=document.createElement("style");return y&&(c.nonce=y),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${g}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(c)&&document.head.removeChild(c)}},[a]),e.jsx(ee,{isPresent:a,childRef:f,sizeRef:d,children:t.cloneElement(i,{ref:f})})}const te=({children:i,initial:a,isPresent:r,onExitComplete:l,custom:f,presenceAffectsLayout:d,mode:y,anchorX:u})=>{const h=B(re),x=t.useId();let m=!0,p=t.useMemo(()=>(m=!1,{id:x,initial:a,isPresent:r,custom:f,onExitComplete:g=>{h.set(g,!0);for(const c of h.values())if(!c)return;l&&l()},register:g=>(h.set(g,!1),()=>h.delete(g))}),[r,h,l]);return d&&m&&(p={...p}),t.useMemo(()=>{h.forEach((g,c)=>h.set(c,!1))},[r]),t.useEffect(()=>{!r&&!h.size&&l&&l()},[r]),y==="popLayout"&&(i=e.jsx(se,{isPresent:r,anchorX:u,children:i})),e.jsx(J.Provider,{value:p,children:i})};function re(){return new Map}const R=i=>i.key||"";function A(i){const a=[];return t.Children.forEach(i,r=>{t.isValidElement(r)&&a.push(r)}),a}const ie=({children:i,custom:a,initial:r=!0,onExitComplete:l,presenceAffectsLayout:f=!0,mode:d="sync",propagate:y=!1,anchorX:u="left"})=>{const[h,x]=Q(y),m=t.useMemo(()=>A(i),[i]),p=y&&!h?[]:m.map(R),g=t.useRef(!0),c=t.useRef(m),v=B(()=>new Map),[S,N]=t.useState(m),[j,M]=t.useState(m);Y(()=>{g.current=!1,c.current=m;for(let C=0;C<j.length;C++){const o=R(j[C]);p.includes(o)?v.delete(o):v.get(o)!==!0&&v.set(o,!1)}},[j,p.length,p.join("-")]);const L=[];if(m!==S){let C=[...m];for(let o=0;o<j.length;o++){const b=j[o],_=R(b);p.includes(_)||(C.splice(o,0,b),L.push(b))}return d==="wait"&&L.length&&(C=L),M(A(C)),N(m),null}const{forceRender:k}=t.useContext(Z);return e.jsx(e.Fragment,{children:j.map(C=>{const o=R(C),b=y&&!h?!1:m===j||p.includes(o),_=()=>{if(v.has(o))v.set(o,!0);else return;let E=!0;v.forEach(s=>{s||(E=!1)}),E&&(k==null||k(),M(c.current),y&&(x==null||x()),l&&l())};return e.jsx(te,{isPresent:b,initial:!g.current||r?void 0:!1,custom:a,presenceAffectsLayout:f,mode:d,onExitComplete:b?void 0:_,anchorX:u,children:C},o)})})};function ne(i,a){const[r,l]=t.useState(i);return t.useEffect(()=>{const f=setTimeout(()=>{l(i)},a);return()=>{clearTimeout(f)}},[i,a]),r}const pe=()=>{const{exercises:i,fetchExercises:a,isLoading:r,error:l,getExercisesByMuscleGroup:f,getMuscleGroupsByExercise:d,getAllUniqueExerciseNames:y}=I(),[u,h]=t.useState(""),[x,m]=t.useState(""),[p,g]=t.useState(""),c=ne(p,300),[v,S]=t.useState([]),[N,j]=t.useState(!1);t.useEffect(()=>{a()},[a]);const M=t.useMemo(()=>{const s=new Set(i.map(n=>n.muscleGroup));return Array.from(s).sort()},[i]),L=t.useMemo(()=>u?f(u).sort():y().sort(),[u,y,f]),k=s=>{h(s==="_all_muscle_groups_"?"":s),m(""),g(""),j(!1)},C=s=>{const n=s==="_all_exercises_"?"":s;if(m(n),n){const w=d(n);w.length>0&&!w.includes(u)&&h(w[0])}g(""),j(!1)},o=t.useCallback(()=>{if(!u&&!x&&!c){S([]),j(!1);return}j(!0);let s=i;u&&(s=s.filter(n=>n.muscleGroup===u)),x&&(s=s.filter(n=>n.exercise===x)),c&&(s=s.filter(n=>n.exercise.toLowerCase().includes(c.toLowerCase())||n.muscleGroup.toLowerCase().includes(c.toLowerCase()))),S(s)},[i,u,x,c,S,j]);t.useEffect(()=>{N||c?o():S([])},[c,u,x,N,o]);const[b,_]=t.useState({});t.useEffect(()=>{const s={...b};v.forEach(n=>{if(n.imageLink&&!s[n.imageLink]){const w=new Image;w.src=n.imageLink,w.onload=()=>{_(H=>({...H,[n.imageLink]:n.imageLink}))},s[n.imageLink]="loading"}})},[v,b]);const E=I(s=>s.isLoading);return E&&i.length===0?e.jsx(P,{children:e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-var(--header-height,64px))]",children:e.jsx("p",{children:"Loading exercise data..."})})}):l?e.jsx(P,{children:e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-var(--header-height,64px))]",children:e.jsxs("p",{children:["Error: ",l]})})}):e.jsxs(P,{children:[" ",e.jsxs("div",{className:"container mx-auto p-4 md:p-8 bg-background text-foreground",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-primary",children:"Exercise Database"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Explore and discover new exercises."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 p-6 bg-card rounded-xl shadow-lg sticky top-[var(--header-height,64px)] z-10",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"muscleGroupSelect",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Muscle Group"}),e.jsxs($,{value:u||"_all_muscle_groups_",onValueChange:k,children:[e.jsx(z,{id:"muscleGroupSelect",className:"w-full bg-input border-border",children:e.jsx(D,{placeholder:"Select Muscle Group"})}),e.jsxs(V,{children:[e.jsx(G,{value:"_all_muscle_groups_",children:"All Muscle Groups"}),M.map(s=>e.jsx(G,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"exerciseSelect",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Exercise"}),e.jsxs($,{value:x||"_all_exercises_",onValueChange:C,children:[e.jsx(z,{id:"exerciseSelect",className:"w-full bg-input border-border",children:e.jsx(D,{placeholder:"Select Exercise"})}),e.jsxs(V,{children:[e.jsx(G,{value:"_all_exercises_",children:"All Exercises"}),L.map(s=>e.jsx(G,{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"md:col-span-1 flex items-end",children:e.jsx(T,{onClick:o,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:"Search Exercises"})})]}),N&&r&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{children:"Searching..."})})," ",!E&&N&&v.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-xl text-muted-foreground",children:"No exercises found matching your criteria."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your filters or search term."})]}),e.jsxs(O,{className:"h-[calc(100vh-var(--header-height,64px)-200px)]",children:[" ",e.jsx(ie,{children:e.jsx(q.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pt-4",initial:"hidden",animate:"visible",exit:"hidden",children:v.map((s,n)=>e.jsx(q.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:n*.05}}},layout:!0,children:e.jsxs(W,{className:"overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out bg-card h-full flex flex-col",children:[e.jsx(F,{className:"p-0 relative aspect-square",children:s.imageLink&&b[s.imageLink]?e.jsx("img",{src:b[s.imageLink],alt:s.exercise,className:"w-full h-full object-cover",loading:"lazy"}):s.imageLink?e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading image..."})}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No Image"})})}),e.jsxs(U,{className:"p-4 flex-grow flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-lg font-semibold text-primary mb-1 truncate",title:s.exercise,children:s.exercise}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 capitalize",children:s.muscleGroup}),e.jsxs("div",{className:"text-xs space-y-1 text-foreground/80",children:[s.difficultyLevel&&e.jsxs("p",{children:[e.jsx("strong",{children:"Difficulty:"})," ",s.difficultyLevel]}),s.equipmentRequired&&e.jsxs("p",{children:[e.jsx("strong",{children:"Equipment:"})," ",s.equipmentRequired]}),s.exerciseType&&e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.exerciseType]})]})]}),s.exerciseLink&&e.jsx(T,{variant:"link",size:"sm",asChild:!0,className:"mt-3 p-0 h-auto self-start",children:e.jsx("a",{href:s.exerciseLink,target:"_blank",rel:"noopener noreferrer",children:"Watch Video"})})]})]})},`${s.exercise}-${s.muscleGroup}-${n}`))})})]}),!N&&!E&&e.jsx("div",{className:"text-center py-10 mt-8",children:e.jsx("p",{className:"text-xl text-muted-foreground",children:'Select filters and click "Search Exercises" to view data.'})})]})]})};export{pe as default};
//# sourceMappingURL=ExerciseDBPage-lXxhWCs9.js.map
