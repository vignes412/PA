import{r as t,j as e,L as F,B as D}from"./pwa-components-DFRzXAPN.js";import{C as W,a as O,d as U,b as K}from"./index-DoxOVinb.js";import{S as I,a as $,b as z,c as A,d as G}from"./select-C1ZopsoU.js";import{S as X}from"./scroll-area-Coq-ol54.js";import{Y as T,A as Y}from"./DashboardLayout-c4N3lsWj.js";import{P as J}from"./PageHeader-wjss6V3A.js";import{M as Q,u as B,P as Z,a as ee,b as se,L as te,m as V}from"./proxy-C4UgOg9u.js";import"./db-utils-DgoSxAK8.js";import"./react-vendor-Csw2ODfV.js";import"./check-CiQyU1a7.js";class re extends t.Component{getSnapshotBeforeUpdate(a){const r=this.props.childRef.current;if(r&&a.isPresent&&!this.props.isPresent){const c=r.offsetParent,f=c instanceof HTMLElement&&c.offsetWidth||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=f-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ie({children:n,isPresent:a,anchorX:r}){const c=t.useId(),f=t.useRef(null),o=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=t.useContext(Q);return t.useInsertionEffect(()=>{const{width:d,height:u,top:x,left:h,right:p}=o.current;if(a||!f.current||!d||!u)return;const g=r==="left"?`left: ${h}`:`right: ${p}`;f.current.dataset.motionPopId=c;const l=document.createElement("style");return b&&(l.nonce=b),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(l)&&document.head.removeChild(l)}},[a]),e.jsx(re,{isPresent:a,childRef:f,sizeRef:o,children:t.cloneElement(n,{ref:f})})}const ne=({children:n,initial:a,isPresent:r,onExitComplete:c,custom:f,presenceAffectsLayout:o,mode:b,anchorX:d})=>{const u=B(le),x=t.useId();let h=!0,p=t.useMemo(()=>(h=!1,{id:x,initial:a,isPresent:r,custom:f,onExitComplete:g=>{u.set(g,!0);for(const l of u.values())if(!l)return;c&&c()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,c]);return o&&h&&(p={...p}),t.useMemo(()=>{u.forEach((g,l)=>u.set(l,!1))},[r]),t.useEffect(()=>{!r&&!u.size&&c&&c()},[r]),b==="popLayout"&&(n=e.jsx(ie,{isPresent:r,anchorX:d,children:n})),e.jsx(Z.Provider,{value:p,children:n})};function le(){return new Map}const R=n=>n.key||"";function q(n){const a=[];return t.Children.forEach(n,r=>{t.isValidElement(r)&&a.push(r)}),a}const ce=({children:n,custom:a,initial:r=!0,onExitComplete:c,presenceAffectsLayout:f=!0,mode:o="sync",propagate:b=!1,anchorX:d="left"})=>{const[u,x]=ee(b),h=t.useMemo(()=>q(n),[n]),p=b&&!u?[]:h.map(R),g=t.useRef(!0),l=t.useRef(h),v=B(()=>new Map),[w,S]=t.useState(h),[j,M]=t.useState(h);se(()=>{g.current=!1,l.current=h;for(let y=0;y<j.length;y++){const m=R(j[y]);p.includes(m)?v.delete(m):v.get(m)!==!0&&v.set(m,!1)}},[j,p.length,p.join("-")]);const k=[];if(h!==w){let y=[...h];for(let m=0;m<j.length;m++){const C=j[m],E=R(C);p.includes(E)||(y.splice(m,0,C),k.push(C))}return o==="wait"&&k.length&&(y=k),M(q(y)),S(h),null}const{forceRender:_}=t.useContext(te);return e.jsx(e.Fragment,{children:j.map(y=>{const m=R(y),C=b&&!u?!1:h===j||p.includes(m),E=()=>{if(v.has(m))v.set(m,!0);else return;let N=!0;v.forEach(P=>{P||(N=!1)}),N&&(_==null||_(),M(l.current),b&&(x==null||x()),c&&c())};return e.jsx(ne,{isPresent:C,initial:!g.current||r?void 0:!1,custom:a,presenceAffectsLayout:f,mode:o,onExitComplete:C?void 0:E,anchorX:d,children:y},m)})})};function ae(n,a){const[r,c]=t.useState(n);return t.useEffect(()=>{const f=setTimeout(()=>{c(n)},a);return()=>{clearTimeout(f)}},[n,a]),r}const be=()=>{const{exercises:n,fetchExercises:a,isLoading:r,error:c,getExercisesByMuscleGroup:f,getMuscleGroupsByExercise:o,getAllUniqueExerciseNames:b}=F(),[d,u]=t.useState(""),[x,h]=t.useState(""),[p,g]=t.useState(""),l=ae(p,300),[v,w]=t.useState([]),[S,j]=t.useState(!1),[M,k]=t.useState(new Date().toISOString().split("T")[0]);t.useEffect(()=>{a()},[a]);const _=t.useMemo(()=>{const s=new Set(n.map(i=>i.muscleGroup).filter(i=>i&&i.trim()!==""));return[...Array.from(s)].sort()},[n]),y=t.useMemo(()=>d?[...f(d)].sort():[...b()].sort(),[d,b,f]),m=s=>{u(s==="_all_muscle_groups_"?"":s),h(""),g(""),j(!1)},C=s=>{const i=s==="_all_exercises_"?"":s;if(h(i),i){const L=o(i);L.length>0&&!L.includes(d)&&u(L[0])}g(""),j(!1)},E=t.useCallback(()=>{if(!d&&!x&&!l){w([]),j(!1);return}j(!0);let s=n;d&&(s=s.filter(i=>i.muscleGroup===d)),x&&(s=s.filter(i=>i.exercise===x)),l&&(s=s.filter(i=>i.exercise.toLowerCase().includes(l.toLowerCase())||i.muscleGroup.toLowerCase().includes(l.toLowerCase()))),w(s)},[n,d,x,l,w,j]);t.useEffect(()=>{S||l?E():w([])},[l,d,x,S,E]);const[N,P]=t.useState({});return t.useEffect(()=>{const s={...N};v.forEach(i=>{if(i.imageLink&&!s[i.imageLink]){const L=new Image;L.src=i.imageLink,L.onload=()=>{P(H=>({...H,[i.imageLink]:i.imageLink}))},s[i.imageLink]="loading"}})},[v,N]),r&&n.length===0?e.jsx(T,{children:e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-var(--header-height,64px))]",children:e.jsx("p",{children:"Loading exercise data..."})})}):c?e.jsx(T,{children:e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-var(--header-height,64px))]",children:e.jsxs("p",{children:["Error: ",c]})})}):e.jsxs(T,{children:[" ",e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 md:px-8 py-4 bg-background text-foreground",children:[e.jsx(J,{icon:Y,title:"Exercise Database",date:M,onDateChange:k}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8 p-4 sm:p-6 bg-card/90 rounded-xl shadow-lg sticky top-[var(--header-height,64px)] z-20 backdrop-blur-md border border-border",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},"aria-label":"Exercise Filters",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"muscleGroupSelect",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Muscle Group"}),e.jsxs(I,{value:d||"_all_muscle_groups_",onValueChange:m,children:[e.jsx($,{id:"muscleGroupSelect",className:"w-full bg-input border-border min-h-12 text-base","aria-label":"Select Muscle Group",children:e.jsx(z,{placeholder:"Select Muscle Group"})}),e.jsxs(A,{children:[e.jsx(G,{value:"_all_muscle_groups_",children:"All Muscle Groups"}),_.map(s=>e.jsx(G,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"md:col-span-1 mt-4 md:mt-0",children:[e.jsx("label",{htmlFor:"exerciseSelect",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Exercise"}),e.jsxs(I,{value:x||"_all_exercises_",onValueChange:C,children:[e.jsx($,{id:"exerciseSelect",className:"w-full bg-input border-border min-h-12 text-base","aria-label":"Select Exercise",children:e.jsx(z,{placeholder:"Select Exercise"})}),e.jsxs(A,{children:[e.jsx(G,{value:"_all_exercises_",children:"All Exercises"}),y.map(s=>e.jsx(G,{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"md:col-span-1 flex items-end mt-4 md:mt-0",children:e.jsx(D,{onClick:E,className:"w-full min-h-12 text-base bg-primary hover:bg-primary/90 text-primary-foreground","aria-label":"Search Exercises",children:"Search Exercises"})})]}),e.jsx("div",{className:"h-2 sm:h-4"}),S&&r&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{children:"Searching..."})}),!r&&S&&v.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-xl text-muted-foreground",children:"No exercises found matching your criteria."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your filters or search term."})]}),e.jsx(X,{className:"max-h-[calc(100vh-var(--header-height,64px)-220px)] sm:max-h-[calc(100vh-var(--header-height,64px)-200px)]",children:e.jsx(ce,{children:e.jsx(V.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 pt-2 sm:pt-4",initial:"hidden",animate:"visible",exit:"hidden",children:v.map((s,i)=>e.jsx(V.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:i*.05}}},layout:!0,children:e.jsxs(W,{className:"overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out bg-card h-full flex flex-col",children:[e.jsx(O,{className:"p-0 relative aspect-square",children:s.imageLink&&N[s.imageLink]?e.jsx("img",{src:N[s.imageLink],alt:s.exercise,className:"w-full h-full object-cover",loading:"lazy"}):s.imageLink?e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading image..."})}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No Image"})})}),e.jsxs(U,{className:"p-3 sm:p-4 flex-grow flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-base sm:text-lg font-semibold text-primary mb-1 truncate",title:s.exercise,children:s.exercise}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2 capitalize",children:s.muscleGroup}),e.jsxs("div",{className:"text-xs space-y-1 text-foreground/80",children:[s.difficultyLevel&&e.jsxs("p",{children:[e.jsx("strong",{children:"Difficulty:"})," ",s.difficultyLevel]}),s.equipmentRequired&&e.jsxs("p",{children:[e.jsx("strong",{children:"Equipment:"})," ",s.equipmentRequired]}),s.exerciseType&&e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.exerciseType]})]})]}),s.exerciseLink&&e.jsx(D,{variant:"link",size:"sm",asChild:!0,className:"mt-3 p-0 h-auto self-start",children:e.jsx("a",{href:s.exerciseLink,target:"_blank",rel:"noopener noreferrer",children:"Watch Video"})})]})]})},`${s.exercise}-${s.muscleGroup}-${i}`))})})}),!S&&!r&&e.jsx("div",{className:"text-center py-10 mt-8",children:e.jsx("p",{className:"text-xl text-muted-foreground",children:'Select filters and click \\"Search Exercises\\" to view data.'})})]})]})};export{be as default};
//# sourceMappingURL=ExerciseDBPage-CI6EMKUI.js.map
